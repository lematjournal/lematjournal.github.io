"use strict";angular.module("lematClient",["lematClient.controllers","lematClient.constants","lematClient.directives","lematClient.factories","lematClient.filters","lematClient.routes","lematClient.services"]).config(["$locationProvider",function(a){a.html5Mode(!1).hashPrefix("!")}]),angular.module("lematClient.controllers",["lematClient.controllers.admin","lematClient.controllers.entries","lematClient.controllers.issues","lematClient.controllers.main","lematClient.controllers.pieces","lematClient.controllers.posts","lematClient.controllers.users"]),angular.module("lematClient.controllers.admin",[]),angular.module("lematClient.controllers.entries",[]),angular.module("lematClient.controllers.issues",[]),angular.module("lematClient.controllers.main",[]),angular.module("lematClient.controllers.pieces",[]),angular.module("lematClient.controllers.posts",[]),angular.module("lematClient.controllers.users",[]),angular.module("lematClient.constants",[]),angular.module("lematClient.directives",["ngTouch","ui.bootstrap","duScroll","wysiwyg.module","angularUtils.directives.dirPagination","angularUtils.directives.dirDisqus","angucomplete-alt","ngTagsInput","validation.match","akoenig.deckgrid","bootstrapColumnsSameHeight","socialLinks"]),angular.module("lematClient.factories",[]),angular.module("lematClient.filters",["angular.filter"]),angular.module("lematClient.services",["ngCookies","ngResource","ngSanitize","ng.deviceDetector"]),angular.module("lematClient.routes",["lematClient.core.routes","lematClient.client.routes","lematClient.admin.routes"]),angular.module("lematClient.admin.routes",["ngRoute"]),angular.module("lematClient.core.routes",["ngRoute"]),angular.module("lematClient.client.routes",["ngRoute"]),angular.module("lematClient.admin.routes").config(["$routeProvider",function(a){a.when("/admin",{templateUrl:"views/admin/control-panel.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/entries",{templateUrl:"views/admin/entry-admin.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/entries/create",{templateUrl:"views/admin/forms/entry-create.html",resolve:{permission:["SecFactory",function(a){a.setPermission("editor")}]}}).when("/admin/entries/:entry/edit",{templateUrl:"views/admin/forms/entry-edit.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/issues",{templateUrl:"views/admin/issue-admin.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/issues/:id/edit",{templateUrl:"views/admin/forms/issue-edit.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/issues/:id/:piece",{templateUrl:"views/admin/piece-preview.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/issues/:id/:piece/edit",{templateUrl:"views/admin/forms/piece-edit.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/issues/:id/pieces/create",{templateUrl:"views/admin/forms/piece-create.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/posts",{templateUrl:"views/admin/online-admin.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/posts/create",{templateUrl:"views/admin/forms/post-create.html",resolve:{permission:["SecFactory",function(a){a.setPermission("editor")}]}}).when("/admin/posts/:post/edit",{templateUrl:"views/admin/forms/post-edit.html",resolve:{permission:["SecFactory",function(a){a.setPermission("editor")}]}}).when("/admin/users",{templateUrl:"views/admin/user-admin.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/users/create",{templateUrl:"views/admin/forms/user-create.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/users/:user/edit",{templateUrl:"views/admin/forms/user-edit.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/images",{templateUrl:"views/admin/images-admin.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/submissions/",{templateUrl:"views/admin/submission-admin.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/submissions/:submission",{templateUrl:"views/admin/submission-view.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/submissions/:submission/comments",{templateUrl:"views/admin/submission-comments.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/email/",{templateUrl:"views/admin/email-admin.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).when("/admin/email/:email",{templateUrl:"views/admin/email-view.html",resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}})}]),angular.module("lematClient.client.routes").config(["$routeProvider",function(a){a.when("/profile/",{templateUrl:"views/client/user-view.html",resolve:{permission:["SecFactory",function(a){a.setPermission("contributor")}]}}).when("/profile/settings",{templateUrl:"views/client/forms/user-settings.html",resolve:{permission:["SecFactory",function(a){a.setPermission("contributor")}]}}).when("/profile/:user/pieces",{templateUrl:"views/client/forms/pieces-list.html",resolve:{permission:["SecFactory",function(a){a.setPermission("contributor")}]}}).when("/prfile/:user/pieces/:piece",{templateUrl:"views/client/forms/post-view.html",resolve:{permission:["SecFactory",function(a){a.setPermission("contributor")}]}}).when("/profile/:user/posts/:post/edit",{templateUrl:"views/client/forms/post-edit.html",resolve:{permission:["SecFactory",function(a){a.setPermission("contributor")}]}}).when("/profle/:user/posts/create",{templateUrl:"views/client/forms/post-create.html",resolve:{permission:["SecFactory",function(a){a.setPermission("contributor")}]}})}]),angular.module("lematClient.core.routes").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/core/main.html"}).when("/entry/:entry",{templateUrl:"views/core/entry-view.html"}).when("/issues/",{templateUrl:"views/core/issue-list.html"}).when("/issues/:id",{templateUrl:"views/core/issue.html"}).when("/issues/:id/:piece",{templateUrl:"views/core/piece-view.html"}).when("/online",{templateUrl:"views/core/online.html"}).when("/online/:post",{templateUrl:"views/core/post-view.html"}).when("/user/:user",{templateUrl:"views/core/user-view.html"}).when("/submissions",{templateUrl:"views/core/submissions.html"}).when("/editors",{templateUrl:"views/core/editors.html"}).when("/about",{templateUrl:"views/core/about.html"}).when("/login",{templateUrl:"views/core/login.html"}).otherwise({redirectTo:"/"})}]),angular.module("lematClient.constants").constant("ServerUrl","https://lematjournal.herokuapp.com"),function(a){function b(a,b,c,d,e,f,g,h){var i=this;i.entry={},i.identifier=d.id,i.getEntries=function(){h.getEntries(),i.entries=h.entries},i.getEntry=function(){h.getEntry(d.entry),i.entry=h.entry},i.upsertEntry=function(a){g.isAuthenticated()&&(h.upsertEntry(a),e.path("/admin/entries"),c.reload())},i.deleteEntry=function(a){g.isAuthenticated()&&(h.deleteEntry(a),e.path("/admin/entries"),c.reload())},a.openUserModal=function(){a.$modalInstance=f.open({scope:a,templateUrl:"views/modals/user-create.html",controller:"UserController",size:"lg"})},a.$on("selectedUser",function(a,b){i.entry.user_id=b.id})}a.module("lematClient.controllers.entries").controller("EntryAdminController",b),b.$inject=["$scope","$rootScope","$route","$routeParams","$location","$uibModal","AuthFactory","EntryFactory"]}(angular),function(a){function b(a,b,c,d){var e=this;e.url=b.absUrl(),e.entry={},e.entries=[],e.identifier=c.id,e.getEntries=function(){d.getEntries(),e.entries=d.entries},e.getEntry=function(){d.getEntry(c.entry),e.entry=d.entry},a.pageChangeHandler=function(a){console.log("going to page "+a)},a.currentPage=1}a.module("lematClient.controllers.entries").controller("EntryClientController",b),b.$inject=["$scope","$location","$routeParams","EntryFactory"]}(angular),function(a){function b(b,c,d,e,f,g,h,i,j,k,l,m){function n(a){for(var b=0;b<o.issue.piece.length;b++)if(o.issue.pieces[b].id===a)return o.issue.pieces[b].id}var o=this;o.image={},o.getIssues=function(){k.getIssues(),o.issues=k.issues},o.getIssue=function(){k.getIssue(e.id),o.issue=k.issue},o.getPieces=function(){k.getIssue(e.id),o.pieces=k.pieces},o.upsertIssue=function(a){console.log(),i.isAuthenticated()&&(k.upsertIssue(a),k.getIssues())},o.deleteIssue=function(a){i.isAuthenticated()&&k.deletePost(a)},o.upsertPiece=function(a){i.isAuthenticated()&&m.upsertPiece(a,e.id).then(function(){o.getIssue(e.id),o.getPieces()})},o.deletePiece=function(){i.isAuthenticated()&&(m.deletePiece(b.piece),o.issue.pieces.splice(n(id),1))},o.updatePieces=function(){a.forEach(b.issue.pieces,function(a){o.upsertPiece(a)})},b.uploadImage=function(){var a={user_id:c.userId,image_url:o.issue.image_url};l.uploadImage(a)},b.openImageManager=function(){b.$modalInstance=h.open({scope:b,templateUrl:"views/admin/modals/issue-image-upload.html",controller:"IssueModalAdminController",controllerAs:"vm",windowClass:"app-modal-window",size:"lg"}),b.$modalInstance.result.then(function(a){o.issue.image_url=a,o.upsertIssue(o.issue)})}}a.module("lematClient.controllers.issues").controller("IssueAdminController",b),b.$inject=["$scope","$rootScope","$route","$routeParams","$location","$http","$uibModal","AuthFactory","AS3Factory","IssueFactory","ImageFactory","PieceFactory"]}(angular),function(a){function b(a,b,c,d,e,f,g,h,i,j,k){var l=this;l.title="",l.scrollToTop=function(){f.scrollTopAnimated(0)},l.getIssues=function(){k.getIssues(),l.issues=k.issues},l.getIssue=function(){k.getIssue(d.id),l.issue=k.issue},l.getPieces=function(){k.getIssue(d.id),a.pieces=k.issue.pieces},l.getPiece=function(){k.getIssuePiece(d.id,d.piece),l.piece=k.piece},l.exclude=function(a){return a.role.includes("contributor")}}a.module("lematClient.controllers.issues").controller("IssueClientController",b),b.$inject=["$scope","$rootScope","$route","$routeParams","$location","$document","$http","$uibModal","AuthFactory","AS3Factory","IssueFactory"]}(angular),function(a){function b(a,b,c,d){var e=this;e.getImages=function(){d.getImages().then(function(){e.images=d.images})},e.setIssueImage=function(a){e.image_url=a,toastr.info("Issue cover image selected","Selected")},e.uploadImage=function(){var a={user_id:b.userId,image_url:e.issue.image_url};d.uploadImage(a).then(function(){d.getImages()})},a.ok=function(){c.close(e.image_url)},a.cancel=function(){c.dismiss("cancel")}}a.module("lematClient.controllers.issues").controller("IssueModalAdminController",b),b.$inject=["$scope","$rootScope","$modalInstance","ImageFactory"]}(angular),function(a){function b(a,b,c,d,e,f,g,h){a.url=d.absUrl(),a.postCredentials=function(a){h.login(a).then(function(){b.session=h.setUser(),b.userId=h.session.id,d.path("/")}),toastr.success("Logged in","Done")},b.session=h.setUser(),b.userId=h.session.id,a.isAuthenticated=function(){return h.isAuthenticated()},a.getUserName=function(){b.userName=h.getUserName()},a.isAdmin=function(){return h.isAdmin()},a.logout=function(){h.logout(),b.session={}},a.$on("scroll",function(b,c){a.title=c}),a.$on("$locationChangeStart",function(){"/issue/:id"!==d.url()&&(a.title="")}),a.scrollShow=function(){return"/issue/1"===d.url()},a.isLoading=function(){return g.pendingRequests.length>0},a.filters={},a.setFilter=function(b){a.filters.tags=b,d.path("/online"),a.$emit("filter",a.filters)}}a.module("lematClient.controllers.main").controller("MainController",b),b.$inject=["$scope","$rootScope","$document","$location","$route","$routeParams","$http","AuthFactory"]}(angular),function(a){function b(a,b,c,d,e,f,g,h,i){function j(a){for(var b=0;b<k.piece.users.length;b++)if(k.piece.users[b].id===a)return k.piece.users[b]}var k=this;k.piece={users:[]},k.getPiece=function(){i.getPiece(d.id,d.piece),k.piece=i.piece},k.upsertPiece=function(a){g.isAuthenticated()&&i.upsertPiece(a,d.id).then(function(){h.getIssue(d.id),k.getPiece()})},k.deletePiece=function(){g.isAuthenticated()&&i.deletePiece(k.piece)},k.removeUser=function(a){k.piece.users.splice(j(a),1)},a.openUserModal=function(){a.$modalInstance=f.open({scope:a,templateUrl:"views/modals/user-create.html",controller:"UserController",size:"lg"})}}a.module("lematClient.controllers.pieces").controller("PieceAdminController",b),b.$inject=["$scope","$rootScope","$route","$routeParams","$location","$uibModal","AuthFactory","IssueFactory","PieceFactory"]}(angular),function(a){function b(a,b,c,d){var e=this;e.getPiece=function(){d.getPiece(b.id,b.piece),e.piece=d.piece}}a.module("lematClient.controllers.pieces").controller("PieceClientController",b),b.$inject=["$scope","$routeParams","$location","PieceFactory"]}(angular),function(a){function b(b,c,d,e,f,g,h,i){function j(a){for(var b=0;b<k.posts.length;b++)if(k.posts[b].id===a)return k.posts[b].id}var k=this;k.post={},k.getPost=function(){i.getPost(e.post).then(function(){k.post=i.post})},k.getPosts=function(){i.getPosts().then(function(){k.posts=i.posts})},k.resetPost=function(){a.copy({},k.post)},k.getUsers=function(){h.getUsers().then(function(){k.users=h.users})},k.upsertPost=function(a){g.isAuthenticated()&&(i.upsertPost(a),c.path("/admin/posts"),d.reload())},k.deletePost=function(a){g.isAuthenticated()&&(i.deletePost(a),k.posts.splice(j(a),1))},b.openUserModal=function(){b.$modalInstance=f.open({scope:b,templateUrl:"views/admin/modals/user-create.html",controller:"UserController",size:"lg"})},b.ok=function(){b.$modalInstance.close()},b.cancel=function(){b.$modalInstance.dismiss("cancel")},b.$on("selectedUser",function(a,b){k.post.user_id=b.id}),k.getTags=function(){console.log("called"),i.getTags().then(function(){k.tags=i.tags})}}a.module("lematClient.controllers.posts").controller("PostAdminController",b),b.$inject=["$scope","$location","$route","$routeParams","$uibModal","AuthFactory","UserFactory","PostFactory"]}(angular),function(a){function b(a,b,c,d){var e=this;e.getPost=function(){d.getPost(c.post),e.post=d.post},e.getPosts=function(){d.getPosts(),e.posts=d.posts},a.$on("filter",function(c,d){a.filters=d,b.path("/online")})}a.module("lematClient.controllers.posts").controller("PostClientController",b),b.$inject=["$scope","$location","$routeParams","PostFactory"]}(angular),function(a){function b(b,c,d,e,f,g,h,i){function j(){b.$modalInstance=d.open({templateUrl:"views/admin/modals/profile-image-upload.html",controller:"UserModalController",controllerAs:"vm",windowClass:"app-modal-window",size:"lg",resolve:{images:function(){return k.user.images}}}),b.$modalInstance.result.then(function(a){k.user.profile_image=a,k.upsertUser(k.user)})}var k=this;k.master={},k.getUsers=function(){i.getUsers().then(function(){k.users=i.users})},k.getUser=function(){i.getUser(g.user).then(function(){k.user=i.user,a.copy(k.user,k.master)})},k.getProfile=function(){h.setUser().then(function(){c.session=h.session,i.getProfile(c.session).then(function(){k.user=i.profile,a.copy(k.user,k.master)})})},k.upsertUser=function(b){h.isAuthenticated()&&!a.equals(k.user,k.master)&&i.upsertUser(b).then(function(){toastr.success("User updated successfully","Done")})},k.deleteUser=function(a,b){h.isAuthenticated()&&i.deleteUser(a,b)},k.resetUser=function(){b.user=b.master,toastr.info("User reset to last save","Done")},b.selectedUser=function(a){a&&b.$emit("selectedUser",a.originalObject)},b.exclude=function(a){return!a.role.match(/^(admin|editor)$/)},b.select=function(b){a.element(b.target).hasClass("active")?a.element(b.target).removeClass("active"):a.element(b.target).addClass("active"),a.element(b.target).siblings().removeClass("active")},k.openImageUploadModal=j,k.fields={},k.save=function(a,b,c){k.fields[b]=!k.fields[b],k.upsertUser(c),toastr.success("User updated successfully","Done")},k.reset=function(a){27===a.keyCode&&k.userForm.$rollbackViewValue()},b.popover={templateUrl:"popoverTemplate.html"}}a.module("lematClient.controllers.users").controller("UserController",b),b.$inject=["$scope","$rootScope","$uibModal","$location","$route","$routeParams","AuthFactory","UserFactory"]}(angular),function(a){function b(a,b,c,d){var e=this;e.file={},e.images=d,e.profileImage="",a.ok=function(){c.close(e.profileImage)},a.cancel=function(){c.dismiss("cancel")}}a.module("lematClient.controllers.users").controller("UserModalController",b),b.$inject=["$scope","$uibModal","$modalInstance","images"]}(angular),function(a){function b(a,b,c,d,e){function f(a){for(var b=0;b<g.images.length;b++)if(g.images[b].id===a)return b}var g=this;a.isAdmin=function(){return d.isAdmin()},g.getImages=function(){e.getImages().then(function(){g.images=e.images})},g.deleteImage=function(a){e.deleteImage(a.id).then(function(){g.images.splice(f(a.id),1)})},a.pageChangeHandler=function(){},a.currentPage=1}a.module("lematClient.controllers.admin").controller("ImageController",b),b.$inject=["$scope","$q","$routeParams","AuthFactory","ImageFactory"]}(angular),function(a){function b(a,b,c){var d=this;d.emails=[],d.getEmails=function(){c.getEmails().then(function(){d.emails=c.emails})},d.getEmail=function(){c.getEmail(b.email).then(function(){d.email=c.email})}}a.module("lematClient.controllers.admin").controller("MailController",b),b.$inject=["$scope","$routeParams","EmailFactory"]}(angular),function(a){function b(b,c,d,e,f,g,h){function i(a){b.$modalInstance=d.open({templateUrl:"views/admin/modals/submission-vote.html",controller:"SubmissionModalController",controllerAs:"vm",size:"lg",resolve:{submission:function(){return j.submissions[a]}}}),b.$modalInstance.result.then(function(b){j.submissions[a]=b,g.updateVotes(j.submissions[a])})}var j=this;j.getEditors=function(){return h.getEditors().then(function(){j.editors=h.editors})},j.getNumber=function(a){return new Array(a)},j.getSubmissions=function(){g.getSubmissions().then(function(){j.submissions=g.submissions})},j.getSubmission=function(){g.getSubmission(f.submission).then(function(){j.submission=g.submission})},j.editors=function(a){return a.role.match(/^(admin|editor)$/)},j.submissionModal=i,j.querySubmission=function(b,c){var d=void 0;return a.forEach(j.submissions[b].votes_array,function(a){d=a.user_id===c&&a.vote?!0:!1}),d}}a.module("lematClient.controllers.admin").controller("SubmissionController",b),b.$inject=["$scope","$filter","$uibModal","$rootScope","$routeParams","SubFactory","UserFactory"]}(angular),function(a){function b(a,b,c,d,e){var f=this;f.submission=e,f.comment={user_id:b.userId,submission_id:e.id,body:""},a.index=f.submission.votes_array.length,f.submission.votes_array[a.index]={user_id:b.userId,vote:void 0},f.incrementVotes=function(a){f.submissions[a].votes_array[b.userId-1]?f.submissions[a].votes++:f.submissions[a].votes_array[b.userId-1]||f.submissions[a].votes--},a.ok=function(){d.upsertComment(f.comment),f.submission.votes++,f.submission.comments.push(f.comment),c.close(f.submission)},a.cancel=function(){f.submission=e,c.dismiss("cancel")},a.customMenu=[["bold","italic","underline","strikethrough","subscript","superscript"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["code","quote","paragraph"],["link"]]}a.module("lematClient.controllers.admin").controller("SubmissionModalController",b),b.$inject=["$scope","$rootScope","$modalInstance","SubFactory","submission"]}(angular),function(a){function b(){function a(a,b){b.bind("change",function(b){var c=b.target.files,d=c[0];a.file=d,a.$parent.file=d,a.$apply()})}var b={restrict:"AE",scope:{file:"@"},link:a};return b}a.module("lematClient.directives").directive("file",b)}(angular),function(a){function b(a,b,c){function d(d,e,f,g){d.uploadFile=function(b,e){var f=a.defer();return f.resolve(c.uploadFile(b,e).then(function(a){var b="https://lematjournal.s3.amazonaws.com/"+a.params.Key;d.filename=b})),f.promise},e.bind("change",function(a){var c=a.target.files,e=c[0];d.file=e,d.uploadFile(d.file,d.folder,d.uploadAction).then(function(){console.log(d.filename),b(function(){g.$setViewValue(d.filename)},1e3).then(function(){d.uploadAction&&d.uploadAction()})})})}var e={restrict:"AE",require:"ngModel",scope:{folder:"=",uploadAction:"="},link:d};return e}a.module("lematClient.directives").directive("fileSelect",b),b.$inject=["$q","$timeout","AS3Factory"]}(angular),function(a){function b(){function b(b,c){c.bind("click",function(b){a.element(b.target).siblings("#upload").trigger("click")})}var c={restrict:"A",link:b};return c}a.module("lematClient.directives").directive("uploadfile",b)}(angular),function(a){function b(a){function b(b){a.getPostUsers().then(function(){b.postUsers=a.postUsers}),a.getIssueUsers().then(function(){b.issueUsers=a.issueUsers})}var c={restrict:"E",templateUrl:"views/core/partials/footer.html",scope:!1,link:b};return c}a.module("lematClient.directives").directive("lematFooter",b),b.$inject=["UserFactory"]}(angular),function(a){function b(){var a={restrict:"E",templateUrl:"views/core/partials/header.html",controller:"MainController",scope:!1};return a}a.module("lematClient.directives").directive("lematHeader",b)}(angular),function(a){function b(){var b=function(b,c){a.element(c),b.$last&&setTimeout(function(){b.$emit("lastElem")},1)};return b}a.module("lematClient.directives").directive("lematRepeat",b)}(angular),function(a){function b(a){function b(b,c){b.isLoading=function(){return a.pendingRequests.length>0},b.$watch(b.isLoading,function(a){a?c.show():c.hide()})}var c={restrict:"A",link:b};return c}a.module("lematClient.directives").directive("lematLoading",b),b.$inject=["$http"]}(angular),function(a){function b(){var a=function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})};return a}a.module("lematClient.directives").directive("ngEnter",b)}(angular),function(a){function b(){var a=function(a,b,c){b.bind("keydown keypress",function(b){27===b.which&&(a.$apply(function(){a.$eval(c.ngEsc)}),b.preventDefault())})};return a}a.module("lematClient.directives").directive("ngEsc",b)}(angular),function(a){function b(b){function c(c){var d=[];c.$on("lastElem",function(){a.forEach(c.vm.issue.pieces,function(a){var b="#"+a.title_url.toString(),c=document.querySelector(b),e=c.getBoundingClientRect().top;d.push({title:a.title,pos:e})}),d.sort(function(a,b){return parseFloat(a.pos-b.pos)})});var e=0;b.on("scroll",function(){try{c.scroll<d[0].pos&&(c.title="")}catch(a){}try{c.scroll>d[e].pos&&c.scroll>d[0].pos&&(c.vm.title=d[e].title)}catch(a){}try{c.scroll>d[e+1].pos&&e++}catch(a){}try{c.scroll<d[e].pos&&c.scroll>d[0].pos&&e--}catch(a){}c.$emit("scroll",c.vm.title.toUpperCase())})}var d={scope:!1,controller:"IssueClientController",controllerAs:"vm",bindToController:!0,link:c};return d}a.module("lematClient.directives").directive("scroll",b),b.$inject=["$document"]}(angular),function(a){function b(b){function c(c,d){var e=a.element(b),f=function(){c.scroll=e.scrollTop()};e.on("scroll",c.$apply.bind(c,f)),f()}var d={scope:{scroll:"=scrollPosition"},link:c};return d}a.module("lematClient.directives").directive("scrollPosition",b),b.$inject=["$document"]}(angular),angular.module("lematClient.factories").factory("IssueFactory",["$http","$window","AuthFactory","ServerUrl",function(a,b,c,d){var e=[],f={},g=[],h=function(){angular.copy({},f)},i=function(){return a.get(d+"/content/issues/").then(function(a){angular.copy(a.data,e)})},j=function(b){return a.get(d+"/content/issues/"+b).then(function(a){angular.copy(a.data,f)})},k=function(b){var c={issue:{title:b.title,image_url:b.image_url,download_link:b.download_link}};return console.log(b),b.id?a.patch(d+"/content/issues/"+b.id,c).then(function(a){j(a.data.id)},function(a){console.log(a)}):a.post(d+"/content/issues/",c).then(function(a){e.push(a.data)},function(a){console.log("response: ",a)})},l=function(b,c){return a["delete"](d+"/content/issues/"+c).then(function(){e.splice(m(b),1)})},m=function(a){for(var b=0;b<f.length;b++)if(e[b].id===a)return b},n=function(b){return a.get(d+"/content/issues/"+b+"/pieces").then(function(a){angular.copy(a.data,g)})},o=function(b){var c={image:{image_url:b.imageUrl,user_id:b.userId,issue_id:b.issueId}};return a.post(d+"/content/images/",c).then(function(a){angular.copy(a.data,b)},function(a){console.log("error: ",a)})};return{getIssues:i,getIssue:j,getIssuePieces:n,issues:e,issue:f,pieces:g,upsertIssue:k,deleteIssue:l,resetIssue:h,uploadIssueImage:o}}]),angular.module("lematClient.factories").factory("ImageFactory",["$http","ServerUrl",function(a,b){var c=[],d={},e=function(){return a.get(b+"/content/images/").then(function(a){angular.copy(a.data,c)})},f=function(c){return a["delete"](b+"/content/images/"+c).then(function(){})},g=function(c){console.log("input image",c);var d={image:{image_url:c.image_url,user_id:c.user_id}};return console.log("params",d),a.post(b+"/content/images/",d).then(function(a){angular.copy(a.data,c)},function(a){console.log("error: ",a)})};return{getImages:e,uploadImage:g,deleteImage:f,images:c,image:d}}]),angular.module("lematClient.factories").factory("AuthFactory",["$http","$q","$window","ServerUrl",function(a,b,c,d){var e={},f={},g=function(b){return a.post(d+"/users/login",b).then(function(a){e=a.id,n(a)})},h=function(){return a.post(d+"/users/logout").then(function(){c.localStorage.removeItem("lemat-user"),e={},console.log("logged out")})},i=function(b){var c={user:{email:b.email,password:b.password}};return a.post(d+"/users/",c).then(function(a){n(a)},function(a){console.log(a)})},j=function(){var a=JSON.parse(c.localStorage.getItem("lemat-user"));return a?!0:!1},k=function(){if(c.localStorage.getItem("lemat-user")){var a=JSON.parse(c.localStorage.getItem("lemat-user"));return"admin"===a.data.role?!0:!1}},l=function(){if(j()){var a=JSON.parse(c.localStorage.getItem("lemat-user"));return a.data.role}return"user"},m=function(){var a=b.defer();if(c.localStorage.getItem("lemat-user")){var d=JSON.parse(c.localStorage.getItem("lemat-user")),d={id:d.data.id,email:d.data.email,username:d.data.username,role:d.data.role};a.resolve(angular.copy(d,f))}return a.promise},n=function(b){c.localStorage.setItem("lemat-user",JSON.stringify(b)),(b.data.role="admin")&&(a.defaults.headers.common.Authorization="Token token="+b.data.token,console.log(b.data.token))};return{login:g,logout:h,register:i,isAuthenticated:j,isAdmin:k,getUserRole:l,setUser:m,session:f}}]),angular.module("lematClient.factories").factory("PostFactory",["$http","AuthFactory","ServerUrl",function(a,b,c){var d=[],e={},f=[],g=function(){angular.copy({},e)},h=function(){return a.get(c+"/content/posts/").then(function(a){angular.copy(a.data,d)})},i=function(b){return a.get(c+"/content/posts/"+b).then(function(a){angular.copy(a.data,e),console.log(e)})},j=function(){return a.get(c+"/content/tags/").then(function(a){angular.copy(a.data,f),console.log(a.data)})},k=function(b){var d={post:{title:b.title,tag_names:b.tags,user_id:b.user_id,content:b.content,title_url:b.title.replace(/\s/g,"-").substring(0,25).toLowerCase()}};return console.log(d),b.id?a.patch(c+"/content/posts/"+b.id,d).then(function(a){console.log(a)}):a.post(c+"/content/posts/",d).then(function(a){console.log(a)})},l=function(a){for(var b=0;b<d.length;b++)if(d[b].id===a)return b},m=function(b){return a["delete"](c+"/content/posts/"+b).then(function(){d.splice(l(b),1)})};return{getPosts:h,getPost:i,getTags:j,posts:d,post:e,tags:f,upsertPost:k,deletePost:m,resetPost:g}}]),angular.module("lematClient.factories").factory("EntryFactory",["$http","$window","AuthFactory","ServerUrl",function(a,b,c,d){var e={},f=[],g=function(){return a.get(d+"/news/entries/").then(function(a){angular.copy(a.data,f)})},h=function(b){return a.get(d+"/news/entries/"+b).then(function(a){angular.copy(a.data,e)})},i=function(b){console.log(b);var c={entry:{title:b.title,content:b.content,user_id:b.user_id,title_url:b.title.replace(/\s/g,"-").substring(0,25).toLowerCase()}};return b.id?a.patch(d+"/news/entries/"+b.id,c).then(function(a){console.log("response: ",a)},function(a){console.log(a)}):a.post(d+"/news/entries/",c).then(function(a){console.log("response: ",a),h(a.data.id)},function(a){console.log("response: ",a)})},j=function(b){return a["delete"](d+"/news/entries/"+b).then(function(){f.splice(k(b),1)})},k=function(a){for(var b=0;b<e.length;b++)if(e[b].id===a)return b};return{getEntries:g,getEntry:h,upsertEntry:i,deleteEntry:j,entry:e,entries:f}}]),angular.module("lematClient.factories").factory("UserFactory",["$http","AuthFactory","ServerUrl",function(a,b,c){var d=[],e=[],f={},g=[],h={},i=[],j=function(b){return a.get(c+"/users/"+b).then(function(a){angular.copy(a.data,f)})},k=function(){return a.get(c+"/users/").then(function(a){angular.copy(a.data,e)})},l=function(){return a.get(c+"/users/post-users").then(function(a){angular.copy(a.data,g)})},m=function(){return a.get(c+"/users/issue-users").then(function(a){angular.copy(a.data,i)})},n=function(){return a.get(c+"/users/editors").then(function(a){angular.copy(a.data,d)})},o=function(b){var d={user:{email:b.email,username:b.username.replace(/[^\w\s]/gi,""),role:b.role,bio:b.bio,password:b.password,profile_image:b.profile_image,social_links:b.social_links}};return b.id?a.patch(c+"/users/"+b.id,d).then(function(a){angular.copy(a.data,b),e.push(a.data),k()}):a.post(c+"/users/",d).then(function(a){angular.copy(a.data,b),e.push(a.data),k()})},p=function(a){for(var b=0;b<e.length;b++)if(e[b].id===a)return b},q=function(b,d){return a["delete"](c+"/users/"+d).then(function(){e.splice(p(b),1)})},r=function(b){return a.get(c+"/users/profiles/"+b.id).then(function(a){angular.copy(a.data,h)})};return{getEditors:n,getUser:j,getUsers:k,getPostUsers:l,getIssueUsers:m,getProfile:r,upsertUser:o,deleteUser:q,editors:d,user:f,users:e,profile:h,postUsers:g,issueUsers:i}}]),angular.module("lematClient.factories").factory("AS3Factory",["$http","$q","ServerUrl",function(a,b,c){var d={},e=function(){return a.get(c+"/amazon/sign_key").then(function(a){angular.copy(a.data,d)})},f=function(a,c){var f=b.defer();return e().then(function(){var b=new AWS.S3({region:"us-east-1",credentials:new AWS.Credentials(d.access_key,d.secret_key)});if(a){var e=h()+"-"+a.name,g={Bucket:"lematjournal",Key:"uploads/"+c+e,ContentType:a.type,Body:a,ServerSideEncryption:"AES256"};f.resolve(b.putObject(g,function(a,b){return a?!1:!0}))}else console.log("Please select a file to upload")}),f.promise},g=function(a){var b=new AWS.S3({region:"us-east-1",credentials:new AWS.Credentials(d.access_key,d.secret_key)});a=a.replace("https://lematjournal.s3.amazonaws.com/","");var c={Bucket:"lematjournal",Key:a};b.deleteObject(c,function(a,b){a&&console.log(a,a.stack)})},h=function(){for(var a="",b="abcdefghijklmnopqrstuvwxyz0123456789",c=0;16>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a};return{getKeys:e,uploadFile:f,deleteFile:g,keys:d}}]),angular.module("lematClient.factories").factory("SecFactory",["$rootScope","$location","AuthFactory",function(a,b,c){var d={admin:3,editor:2,author:1,contributor:1,user:0},e={},f={},g=function(){var a=c.getUserRole();return"admin"===a?e=3:"editor"===a?e=2:"author"===a?e=1:"contributor"===a?e=1:"user"===a&&(e=0),e},h=function(a){"admin"===a?this.role=d.admin:"editor"===a?this.role=d.editor:"author"===a?this.role=d.author:"contributor"===a?this.role=d.contributor:this.role=d.user};h.prototype.getLevel=function(){return this.role};var i=function(a){f=new h(a),j()},j=function(){var a=!1;a=g()>=f.getLevel()?!0:!1,a||b.path("/")};return{roles:d,clearance:e,setPermission:i,getPermission:j,permission:f,permissionLevel:h,permissionCheck:g}}]),angular.module("lematClient.factories").factory("SubFactory",["$http","ServerUrl",function(a,b){var c={},d=[],e={},f=function(){return a.get(b+"/submissions/").then(function(a){
angular.copy(a.data,d)})},g=function(c){return a.get(b+"/submissions/"+c).then(function(a){angular.copy(a.data,e)})},h=function(d){var e={comment:d};return a.post(b+"/submissions/comments",e).then(function(a){angular.copy(a.data,c),console.log("comment: ",c)})},i=function(c){console.log("input: ",c);var d={submission:{votes:c.votes,votes_array:c.votes_array}};return a.patch(b+"/submissions/"+c.id,d).then(function(a){angular.copy(a.data,c)})};return{upsertComment:h,getSubmissions:f,getSubmission:g,submissions:d,submission:e,updateVotes:i}}]),angular.module("lematClient.factories").factory("EmailFactory",["$http","ServerUrl",function(a,b){var c=[],d={},e=function(){return a.get(b+"/emails/").then(function(a){angular.copy(a.data,c)})},f=function(c){return a.get(b+"/emails/"+c).then(function(a){angular.copy(a.data,d)})};return{getEmails:e,getEmail:f,emails:c,email:d}}]),angular.module("lematClient.factories").factory("PieceFactory",["$http","$window","AuthFactory","ServerUrl",function(a,b,c,d){var e={},f=function(b,c){return a.get(d+"/content/issues/"+b+"/pieces/"+c).then(function(a){angular.copy(a.data,e)})},g=function(b,c){var e=[];b.users&&b.users.map(function(a){console.log(a),e.push(a.id)});var f={piece:{title:b.title,content:b.content,piece_type:b.piece_type,user_ids:e,issue_id:c,order:b.order,title_url:b.title.replace(/\s/g,"-").substring(0,25).toLowerCase()}};return b.id?a.patch(d+"/content/issues/"+b.issue_id+"/pieces/"+b.id,f).then(function(a){pieces.push(a.data)},function(a){console.log(a)}):a.post(d+"/content/issues/"+c+"/pieces/",f).then(function(){},function(a){console.log("error: ",a)})},h=function(b){return a["delete"](d+"/content/issues/"+b.issue_id+"/pieces/"+b.id).then(function(a){console.log("response: ",a)})};return{getPiece:f,upsertPiece:g,deletePiece:h,piece:e}}]),angular.module("lematClient.filters").filter("to_trusted",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("lematClient.filters").filter("escapeHtml",function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return function(b){return String(b).replace(/[&<>"'\/]/g,function(b){return a[b]})}}),angular.module("lematClient.filters").filter("spaceless",function(){return function(a){return a?a.replace(/[()&<>"'\/]/g,"").replace(/\s+/g,"-"):void 0}}),angular.module("lematClient.filters").filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!==e&&(a=a.substr(0,e))}return a+(d||"…")}}),function(){angular.module("bootstrapColumnsSameHeight",[]).directive("sameHeight",["$window",function(a){var b=function(a){var b=0;angular.forEach(a,function(a){a.style.minHeight="0px",a.offsetHeight>b&&(b=a.offsetHeight)}),angular.forEach(a,function(a){a.style.minHeight=b+"px"})},c=function(a){var b=a.children(),c=[],d=function(a){var b=/col-xs-([0-9]{1,2})/.exec(a);return b?parseInt(b[1],10):0},e=function(a){var b=/col-sm-([0-9]{1,2})/.exec(a);return b?parseInt(b[1],10):d(a)},f=function(a){var b=/col-md-([0-9]{1,2})/.exec(a);return b?parseInt(b[1],10):e(a)},g=function(a){var b=/col-lg-([0-9]{1,2})/.exec(a);return b?parseInt(b[1],10):f(a)};return angular.forEach(b,function(a){var b=angular.element(a).attr("class");c.push({xs:d(b),sm:e(b),md:f(b),lg:g(b)})}),c},d=function(){return a.innerWidth<768?"xs":a.innerWidth>=768&&a.innerWidth<992?"sm":a.innerWidth>=992&&a.innerWidth<1200?"md":"lg"},e=function(a){var e=c(a),f=a.children(),g=[],h=0,i=[];angular.forEach(e,function(a,b){h+a[d()]<=12?(i.push(f[b]),h+=a[d()]):(g.push(i),i=[],i.push(f[b]),h=a[d()])}),i.length>0&&g.push(i),angular.forEach(g,function(a){b(a)})};return{restrict:"EA",link:function(b,c){e(c),angular.element(a).bind("resize",function(){e(c)})}}}])}(),angular.module("lematClient").run(["$templateCache",function(a){a.put("views/admin/control-panel.html",'<div class="container"> <div class="row"> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"><a href="#!/admin/posts">Posts</a> </h3> </div> <div class="panel-body"> Manage online content </div> </div> </div> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"><a href="#!/admin/users">Users</a> </h3> </div> <div class="panel-body"> Manage user settings and privileges </div> </div> </div> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"><a href="#!/admin/entries">News</a> </h3> </div> <div class="panel-body"> Manage front page news articles </div> </div> </div> </div> <div class="row"> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"><a href="#!/admin/issues">Issues and Pieces</a> </h3> </div> <div class="panel-body"> Manage Issues and pieces </div> </div> </div> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"><a href="#!/admin/images">Images</a> </h3> </div> <div class="panel-body"> Manage uploaded images </div> </div> </div> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"><a href="#!/admin/submissions">Submissions</a> </h3> </div> <div class="panel-body"> Comment and vote on submissions </div> </div> </div> </div> <div class="row"> <div class="col-md-4"> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title"><a href="#!/admin/email">Email</a> </h3> </div> <div class="panel-body"> View the Le Mat email account </div> </div> </div> </div> </div>'),a.put("views/admin/email-admin.html",'<div class="container" ng-controller="MailController as vm" ng-init="vm.getEmails()"> <div class="row"> <table class="table"> <tr> <th>subject</th> <th>sender</th> <th>options</th> </tr> <tr ng-repeat="email in vm.emails | orderBy:\'uid\' : reverse"> <td>{{ ::email.subject }}</td> <td>{{ ::email.sender }}</td> <td> <a class="btn btn-default" href="#!/admin/email/{{ ::email.message_id }}">View</a> </td> </tr> </table> </div> </div>'),a.put("views/admin/email-view.html",'<div class="content" ng-controller="MailController as vm" ng-init="vm.getEmail()"> <div class="container"> <p>subject: {{ vm.email.subject }}</p> <p>sender: {{ vm.email.sender }}</p> <p ng-bind-html="vm.email.body | to_trusted"></p> </div> </div>'),a.put("views/admin/entry-admin.html",'<div class="container" ng-controller="EntryAdminController as vm" ng-init="vm.getEntries()"> <table class="table"> <tr> <th>title</th> <th>author</th> <th>options</th> </tr> <tr ng-repeat="entry in vm.entries"> <td>{{ entry.title }}</td> <td>{{ entry.user.username }}</td> <td> <a class="btn btn-default" href="#!/admin/entries/{{ ::entry.title_url }}/edit">Edit</a> <a class="btn btn-default" ng-click="vm.deleteEntry(vm.entry.id)">Delete</a> </td> </tr> </table> <a class="btn btn-default" href="#!/admin/entries/create">Add Entry</a> </div>'),a.put("views/admin/forms/entry-create.html",'<div class="content" ng-controller="EntryAdminController as vm"> <div class="container"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="vm.entry.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group" ng-controller="UserController as user" ng-init="user.getUsers()"> <label for="user">Author: </label>{{ ::vm.entry.user.username }} <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="user.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="content" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="vm.entry.content"></wysiwyg> </div> <div class="form-group"> <label for="content">Embedded HTML</label> <input type="text" class="form-control" ng-model="vm.entry.content"> </div> <a class="btn btn-default" ng-click="vm.upsertEntry(vm.entry)">Submit</a> </div> </div>'),a.put("views/admin/forms/entry-edit.html",'<div class="content" ng-controller="EntryAdminController as vm" ng-init="vm.getEntry()"> <div class="container"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="vm.entry.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group" ng-controller="UserController as user" ng-init="user.getUsers()"> <label for="user">Author: </label>{{ vm.entry.user.username }} <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="user.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" initial-value="vm.entry.user.username" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="content" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="vm.entry.content"></wysiwyg> </div> <div class="form-group"> <label for="content">Embedded HTML</label> <input type="text" class="form-control" ng-model="vm.entry.content"> </div> <a class="btn btn-default" ng-click="vm.upsertEntry(vm.entry)">Submit</a> <a class="btn btn-default" ng-click="vm.deleteEntry()"><i class="glyphicon glyphicon-trash"></i></a> </div> </div>'),a.put("views/admin/forms/issue-edit.html",'<div class="container" ng-controller="IssueAdminController as vm" ng-init="vm.getIssue()"> <div class="row"> <h3>issue name: <input type="text" style="width: 50%" ng-model="vm.issue.title"></h3> <h3>created: {{ ::vm.issue.created_at | date: \'medium\' }}</h3> <h3>updated: {{ ::vm.issue.updated_at | date: \'medium\' }}</h3> <h3>num. of pieces: {{ vm.issue.pieces.length }}</h3> <h3>download link: {{ vm.issue.download_link }}</h3> <h3>cover image:</h3> <img class="center-block" uib-tooltip="click to change" ng-click="openImageManager()" ng-src="{{ vm.issue.image_url }}" style="width: 50%; height: 25%; margin-bottom: 5px"> <div class="form-group"> <input id="upload" type="file" name="cover" class="upload" style="display: none" file-select folder="\'covers/\'" accept="image/*" ng-model="vm.issue.image_url" upload-action="uploadImage"> <button type="button" uploadfile class="btn btn-default btn-block">Upload Cover Image</button> </div> <div class="form-group"> <input id="upload" type="file" name="pdf" class="upload" style="display: none" file-select folder="\'issues/\'" accept=".pdf" ng-model="vm.issue.download_link"> <button type="button" uploadfile class="btn btn-default btn-block">Upload Issue pdf</button> </div> <div class="form-group"> <a class="btn btn-default btn-block" href="#!/admin/issues/{{ vm.issue.id}}/pieces/create">Add Piece</a> </div> <div class="form-group"> <button class="btn btn-default btn-block" ng-click="vm.upsertIssue(vm.issue)">Save</button> </div> </div> <div class="row" style="margin-top: 15px"> <h3>pieces</h3> <table class="table"> <tr> <th>order</th> <th>title</th> <th>author</th> <th>options</th> </tr> <tr ng-repeat="piece in vm.issue.pieces | orderBy: \'order\'"> <td>{{ piece.order }}</td> <td>{{ piece.title | cut:true: 25 }}</td> <td>by <font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font> </td> <th><a class="btn btn-default" href="#!/admin/issues/{{ ::vm.issue.id }}/{{ ::piece.title_url }}/edit">Edit</a> <a class="btn btn-default" href="#!/admin/issues/{{ ::vm.issue.id }}/{{ ::piece.title_url }}">Preview</a> <a class="btn btn-default" ng-click="piece.order = piece.order + 1"><span class="glyphicon glyphicon-chevron-up"></span></a> <a class="btn btn-default" ng-click="piece.order = piece.order - 1"><span class="glyphicon glyphicon-chevron-down"></span></a> </th> </tr> </table> <a class="btn btn-default" ng-click="vm.updatePieces()">Update Order</a> </div> </div>'),a.put("views/admin/forms/piece-create.html",'<div class="container" ng-controller="PieceAdminController as vm"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="vm.piece.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="type">Type</label> <input type="text" ng-model="vm.piece.piece_type" id="type" class="form-control" placeholder="type" required> </div> <div class="form-group" ng-controller="UserController" ng-init="getUsers()"> <label for="user">Author(s):</label><font ng-repeat="user in vm.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font> <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create User</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="vm.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="vm.piece.content"></wysiwyg> </div> <a class="btn btn-default" ng-click="vm.upsertPiece(piece)">Submit</a> </div>'),a.put("views/admin/forms/piece-edit.html",'<div class="container" ng-controller="PieceAdminController as vm" ng-init="vm.getPiece()"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="vm.piece.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="type">Type</label> <input type="text" ng-model="vm.piece.piece_type" id="type" class="form-control" placeholder="type" required> </div> <div class="form-group" ng-controller="UserController as user" ng-init="user.getUsers()"> <label for="user">Author(s):</label> <font ng-repeat="user in vm.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}<a ng-click="vm.removeUser(user.id)"><span class="glyphicon glyphicon-remove"></span></a></font> <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="user.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" initial-value="vm.piece.author" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="vm.piece.content"></wysiwyg> </div> <a class="btn btn-default" ng-click="vm.upsertPiece(piece)">Submit</a> <a class="btn btn-default" ng-click="vm.deletePiece()"><i class="glyphicon glyphicon-trash"></i></a> </div>'),a.put("views/admin/forms/post-create.html",'<div class="container" ng-controller="PostAdminController as vm" ng-init="vm.getTags()"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="vm.post.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="tags">Tags</label> <tags-input display-property="name" ng-model="vm.post.tags"> <auto-complete source="vm.tags"></auto-complete> </tags-input> </div> <div class="form-group" ng-controller="UserController as user" ng-init="user.getUsers()"> <label for="user">Author(s):</label><font ng-repeat="user in vm.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last & !$first"> and </span>{{ user.username }}</font> <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="user.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="vm.post.content"></wysiwyg> </div> <div class="form-group"> <label>Embedded html</label> <input type="text" class="form-control" ng-model="vm.post.content"> </div> <a class="btn btn-default" ng-click="vm.upsertPost(vm.post)">Submit</a> </div>'),a.put("views/admin/forms/post-edit.html",'<div class="container" ng-controller="PostAdminController as vm" ng-init="vm.getPost()"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="vm.post.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group" ng-init="vm.getTags()"> <label for="tags">Tags</label> <tags-input display-property="name" ng-model="vm.post.tags"> <auto-complete source="vm.tags"></auto-complete> </tags-input> </div> <div class="form-group" ng-controller="UserController" ng-init="getUsers()"> <label for="user">Author(s):</label><font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last"> and </span>{{ user.username }}</font> <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="users" search-fields="username" title-field="username" minlength="1" input-class="form-control form-control-small" initial-value="vm.post.user.username" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="post" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="vm.post.content"></wysiwyg> </div> <div class="form-group"> <label>Embedded html</label> <input type="text" class="form-control" ng-model="vm.post.content"> </div> <a class="btn btn-default" ng-click="vm.upsertPost(vm.post)">Submit</a> <a class="btn btn-default" ng-click="vm.deletePost()"><i class="glyphicon glyphicon-trash"></i> Delete</a> </div>'),a.put("views/admin/forms/user-create.html",'<div class="container" ng-controller="UserController as vm"> <div class="row"> <div class="form-group"> <label for="name">Email</label> <input type="text" ng-model="vm.user.email" id="email" class="form-control" placeholder="email"> </div> <div class="form-group"> <label for="author">Username</label> <input type="name" ng-model="vm.user.username" id="username" class="form-control" placeholder="username" required> </div> <div class="form-group"> <label for="role">Role</label> <select ng-model="vm.user.role" class="form-control"> <option value="admin">admin</option> <option value="editor">editor</option> <option value="author">author</option> <option value="contributor">contributor</option> </select> </div> </div> <div class="row" ng-if="vm.user.role === \'admin\'"> <div class="form-group"> <label for="password">Password</label> <input type="password" ng-model="vm.user.password" id="password" class="form-control" placeholder="password" required> </div> <div class="form-group"> <label for="password">Confirm Password</label> <input type="password" ng-model="vm.user.passwordConfirm" id="passord" class="form-control" placeholder="password" match="vm.user.password" required> </div> </div> <hr> <a class="btn btn-default" ng-click="vm.upsertUser(user)">Submit</a> </div>'),a.put("views/admin/forms/user-edit.html",'<div class="container" ng-controller="UserController as vm" ng-init="vm.getUser()"> <div class="row"> <h3 class="title text-center">{{ vm.user.username }}</h3> <hr> <div class="profile-image"> <a ng-click="vm.openImageUploadModal()" uib-tooltip="click to change"><img class="img-responsive center-block" src="{{ vm.user.profile_image }}" height="455px" width="455px"> </a> </div> <br> </div> <hr> <div class="row"> <!--panel--> <div class="panel panel-default"> <div class="panel-heading">User</div> <div class="panel-body"> <div class="row"> <div class="col-md-6"> <div class="list-group"> <a class="list-group-item" ng-click="select($event); selection = \'info\'">Info</a> <a class="list-group-item" ng-click="select($event); selection = \'role\'">Role</a> <a class="list-group-item active" ng-click="select($event); selection = \'settings\'">Settings</a> <a class="list-group-item" ng-click="select($event); selection = \'password\'">Password</a> <a class="list-group-item" ng-click="select($event); selection = \'actions\'">Actions</a> </div> </div> <div class="col-md-6" ng-switch on="selection"> <div class="animate-switch" ng-switch-when="actions"> <a class="btn btn-default btn-block" ng-click="vm.upsertUser(user)">Save</a> <a class="btn btn-default btn-block" ng-click="vm.resetUser()">Reset</a> <a class="btn btn-default btn-block" ng-click="vm.deleteUser(vm.user.id, vm.user.username)">Delete</a> </div> <div class="animate-switch" ng-switch-default> <div class="form-group"> <label for="name">Email</label> <input type="text" ng-model="vm.user.email" id="email" class="form-control" placeholder="email"> </div> <div class="form-group"> <label for="name">Username</label> <input type="text" ng-model="vm.user.username" id="username" class="form-control" placeholder="username"> </div> </div> <div class="animate-switch" ng-switch-when="role"> <div class="form-group" ng-if="isAdmin()"> <label for="role">Role</label> <select class="form-control" ng-model="vm.user.role"> <option value="admin">admin</option> <option value="editor">editor</option> <option value="author">author</option> <option value="contributor">contributor</option> </select> </div> </div> <div class="animate-switch" ng-switch-when="info"> <h4>email: {{ vm.user.email }}</h4> <h4>username: {{ vm.user.username }}</h4> <h4>role: {{ vm.user.role }}</h4> <h4>issue pieces: {{ vm.user.pieces.length }}</h4> <h4>online content: {{ vm.user.posts.length }}</h4> <h4>news entries: {{ vm.user.entries.length }}</h4> </div> <div class="animate-switch" ng-switch-when="password"> <div class="form-group"> <label for="password">Password</label> <input type="password" ng-model="vm.user.password" id="author" class="form-control" placeholder="password" required> </div> <div class="form-group"> <label for="author">Confirm Password</label> <input type="password" ng-model="vm.user.passwordConfirm" id="password" class="form-control" placeholder="password confirm" match="vm.user.password" required> </div> </div> </div> </div> </div> </div> </div> <div class="row" ng-if="vm.user.bio"> <div class="panel panel-default"> <div class="panel-heading">Bio</div> <div class="panel-body"> <p>{{ vm.user.bio }}</p> </div> </div> </div> <div class="row"> <div class="panel panel-default"> <div class="panel-heading">Content</div> <div class="panel-body"> <div class="container" style="margin-top: -50px"> <div class="row" ng-if="vm.user.pieces.length > 0"> <table class="table"> <col style="width: 50%"> <col style="width: 50%"> <tr> <th>pieces</th> <th>options</th> </tr> <tr ng-repeat="piece in vm.user.pieces | orderBy: \'order\'"> <th>{{ ::piece.title | cut:true: 25 }}</th> <th><a class="btn btn-default" href="#!/admin/issues/{{ ::piece.issue_id }}/{{ ::piece.title_url }}/edit">Edit</a> <a class="btn btn-default" href="#!/admin/issues/{{ ::piece.issue_id }}/{{ ::piece.title_url }}">Preview</a> </th> </tr> </table> </div> <div class="row" ng-if="vm.user.posts.length > 0"> <table class="table"> <tr> <th>online content</th> <th>options</th> </tr> <col style="width: 50%"> <col style="width: 50%"> <tr ng-repeat="post in vm.user.posts"> <th>{{ ::post.title }}</th> <th><a class="btn btn-default" href="#!/admin/posts/{{ ::post.title_url }}/edit">Edit</a> <a class="btn btn-default" href="#!/online/{{ ::post.title_url }}">Preview</a> </th> </tr> </table> </div> <div class="row" ng-if="vm.user.entries.length > 0"> <table class="table"> <tr> <th>news entries</th> <th>options</th> </tr> <col style="width: 50%"> <col style="width: 50%"> <tr ng-repeat="entry in vm.user.entries"> <th>{{ ::entry.title }}</th> <th> <a class="btn btn-default" href="#!/admin/entries/{{ ::entry.title_url }}/edit">Edit</a> <a class="btn btn-default" href="#!/entry/{{ ::entry.title_url }}">Preview</a> </th> </tr> </table> </div> </div> </div> </div> </div> </div>'),a.put("views/admin/images-admin.html",'<div class="container" ng-controller="ImageController as vm" ng-init="vm.getImages()"> <div class="row"> <div dir-paginate="image in vm.images | itemsPerPage: 8" current-page="currentPage"> <div class="col-xs-3"> <div class="profile-image"> <img ng-src="{{ image.image_url }}" height="255" width="255"> </div> <div class="description"> owner: {{ image.user }} </div> </div> </div> </div> <div class="row"> <ul class="pager"> <dir-pagination-controls template-url="views/core/partials/pagination.html"></dir-pagination-controls> </ul> </div> </div>'),a.put("views/admin/issue-admin.html",'<div class="container" ng-controller="IssueAdminController as vm" ng-init="vm.getIssues()"> <div class="row" ng-repeat="issue in vm.issues"> <h2><a href="#!/admin/issues/{{ ::issue.id }}/edit">{{ ::issue.title }}</a></h2> <h3>created: {{ ::issue.created_at | date: \'medium\' }}</h3> </div> <hr> <div class="row"> <h1>Add Issue:</h1> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="issue.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="download">Download Link</label> <input id="upload" type="file" name="pdf" class="upload" style="display: none" file-select folder="\'issues/\'" accept=".pdf" ng-model="issue.downloadLink"> <button type="button" uploadfile class="btn btn-default btn-block">Select pdf to upload</button> </div> <!--\n      <div class="form-group">\n         <label for="image">Cover Image</label>\n         <input id="upload" type="file" name="cover" class="upload" style="display: none" file-select folder="\'covers/\'" accept="image/*" ng-model="image" />\n         <button type="button" uploadfile class="btn btn-default btn-block">Select Image to upload</button>\n      </div>\n--> <a class="btn btn-default" ng-click="upsertIssue(vm.issue)">Submit</a> </div> </div>'),a.put("views/admin/modals/issue-image-upload.html",'<div class="container" ng-init="vm.getImages()"> <div class="row"> <div class="col-md-6"> <div class="profile-image"> <carousel> <slide ng-repeat="image in vm.images" active="slide.active" actual> <div class="profile-image"> <a ng-click="vm.setIssueImage(image.image_url)"><img ng-src="{{ image.image_url }}" height="455px" width="600px"> </a> </div> <div class="carousel-caption"> <p>profile image {{ $index }}</p> </div> </slide> </carousel> <p><i>* click to set cover image</i> </p> </div> </div> <div class="col-md-6"> <div class="row" style="height: 440px"> <div class="content-inner" ng-repeat="image in user.images"> <h4>{{ image.title }}</h4> </div> <div class="form-group"> <input id="upload" type="file" name="cover" class="upload" style="display: none" file-select folder="\'covers/\'" accept="image/*" ng-model="issue.image_url" upload-action="uploadImage"> <button type="button" uploadfile class="btn btn-default btn-block">Upload Cover Image</button> <!--               <button type="button" ng-click="openImageManager()" class="btn btn-default btn-block">Manage User Images</button>--> </div> </div> <div class="row"> <div class="btn-group pull-right"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok()" style="margin-left: 5px">Save</a> </div> </div> </div> </div> </div>'),a.put("views/admin/modals/profile-image-manager.html",'<div class="container" style="width: 700px" ng-init="vm.getUserImages()"> <div class="deckgrid clearfix center-block" deckgrid source="images" cardtemplate="views/core/partials/deckgrid-template.html"></div> <br> <a class="btn btn-default btn-block" ng-click="$modalInstance.dismiss(\'cancel\'); getUser()" style="margin-bottom: 20px">Close</a> </div>'),a.put("views/admin/modals/profile-image-upload.html",'<div class="modal-content"> <div class="container"> <div class="row"> <div class="profile-image"> <carousel> <slide ng-repeat="image in vm.images" active="slide.active" actual> <div class="profile-image"> <a ng-click="vm.profileImage = image.image_url"><img ng-src="{{ image.image_url }}" height="455px" width="100%"> </a> </div> <div class="carousel-caption"> <p>profile image {{ $index }}</p> </div> </slide> </carousel> <p><i>* click to set profile image</i> </p> </div> <div class="row"> <div class="content-inner" ng-repeat="image in vm.user.images"> <h4>{{ image.title }}</h4> </div> <div class="form-group"> <input id="upload" type="file" name="file" class="upload" style="display: none" file> <button type="button" uploadfile class="btn btn-default btn-block">Select Image to upload</button> <!--               <button type="button" ng-click="openImageManager()" class="btn btn-default btn-block">Manage User Images</button>--> </div> </div> <div class="row"> <div class="btn-group pull-right"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok()" style="margin-left: 5px">Save</a> </div> </div> </div> </div> </div>'),a.put("views/admin/modals/submission-vote.html",'<div class="container" style="width: 99%"> <label>Cast your vote and give a detailed comment about your reasoning</label> <label>{{ vm.submission.votes_array }}</label> <div class="radio"> <label> <input type="radio" value="YES" ng-model="vm.submission.votes_array[index].vote"> Yes </label> </div> <div class="radio"> <label> <input type="radio" value="NO" ng-model="vm.submission.votes_array[index].vote"> No </label> </div> <div class="radio"> <label> <input type="radio" value="ABSTAIN" ng-model="vm.submission.votes_array[index].vote"> Abstain </label> </div> <div class="row" style="margin-bottom: 5px"> <wysiwyg style="margin-bottom: 5px" textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="comment" textarea-required ng-model="vm.comment.body" textarea-menu="customMenu"></wysiwyg> <div class="btn-group pull-right"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok()" style="margin-left: 5px">Cast Vote</a> </div> </div> </div>'),a.put("views/admin/modals/user-create.html",'<div class="container" style="width: 850px; height: 350px"> <div class="row"> <div class="form-group"> <label for="name">Email</label> <input type="text" ng-model="user.email" id="email" class="form-control" placeholder="email"> </div> <div class="form-group"> <label for="author">Username</label> <input type="name" ng-model="user.username" id="username" class="form-control" placeholder="username" required> </div> <div class="form-group"> <label for="role">Role</label> <select class="form-control" ng-model="user.role"> <option value="editor">editor</option> <option value="author">author</option> <option value="contributor">contributor</option> </select> </div> </div> <div class="row" style="margin-bottom: 15px"> <a class="btn btn-default" ng-click="$modalInstance.dismiss();">Cancel</a> <a class="btn btn-default" ng-click="upsertUser(user); $modalInstance.close()">Submit</a> </div> </div>'),a.put("views/admin/online-admin.html",'<div class="container" ng-controller="PostAdminController as vm" ng-init="vm.getPosts()"> <table class="table"> <tr> <th>title</th> <th>author</th> <th>options</th> </tr> <tr ng-repeat="post in vm.posts"> <td>{{ ::post.title }} </td> <td>{{ ::post.user.username }}</td> <td><a class="btn btn-default" href="#!/admin/posts/{{ ::post.title_url }}/edit">Edit</a> <a class="btn btn-default" ng-click="vm.deletePost(post.id)">Delete</a> </td> </tr> </table> <a class="btn btn-default" href="#!/admin/posts/create">Add Post</a> </div>'),
a.put("views/admin/piece-preview.html",'<div class="container" ng-controller="PieceAdminController as vm" ng-init="vm.getPiece()"> <div class="content"> <h4 class="title text-center">{{ ::vm.piece.title }}</h4> <p class="text-center"><font ng-repeat="user in vm.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="!$first && $last"> and </span>{{ ::user.username }}</font></p> <br> <p ng-bind-html="vm.piece.content | to_trusted"></p> </div> </div>'),a.put("views/admin/submission-admin.html",'<div class="container" ng-controller="SubmissionController as vm" ng-init="vm.getSubmissions(); vm.getEditors()"> <div class="row"> <table class="table"> <col style="width: 15%"> <col style="width: 10%"> <col style="width: 15%"> <col style="width: 70%"> <tr> <th>sender</th> <th>total votes</th> <th>time remaining</th> <th>options</th> </tr> <tr ng-repeat="submission in vm.submissions"> <td>{{ ::submission.email_address }}</td> <td>{{ submission.votes }} out of {{ vm.editors.length }}</td> <td>{{ submission.time_remaining }}</td> <td> <a class="btn btn-default" href="#!/admin/submissions/{{ ::submission.id }}">view</a> <a class="btn btn-default" href="#!/admin/submissions/{{ ::submission.id }}/comments">view comments</a> <a class="btn btn-default" ng-disabled="vm.querySubmission($index, userId)" ng-click="vm.submissionModal($index)">Cast Vote</a> <a class="btn btn-default" href="{{ ::submission.attachment }}">download submission</a> </td> </tr> </table> </div> </div>'),a.put("views/admin/submission-comments.html",'<div class="container" ng-controller="SubmissionController as vm" ng-init="vm.getSubmission()"> <div class="row" ng-repeat="comment in vm.submission.comments"> <div class="media"> <div class="media-left"> <div class="profile-image"> <img class="media-object" ng-src="{{ comment.user.profile_image }}" alt="..." height="64px" width="64px"> </div> </div> <div class="media-body"> <h4 class="media-heading">{{ vm.submission.vote_array[userId ]}}</h4> <p>{{ comment.body }}</p> </div> </div> </div> </div>'),a.put("views/admin/submission-view.html",'<div class="content" ng-controller="SubmissionController as vm" ng-init="vm.getSubmission()"> <div class="container"> <div class="row"> <p ng-bind-html="vm.submission.email_content | to_trusted"></p> </div> <div class="row" ng-repeat="attachment in vm.submission.attachments"> <a class="btn btn-default" href="{{ attachment }}">download submission</a> </div> </div> </div>'),a.put("views/admin/user-admin.html",'<div class="container" ng-controller="UserController as vm" ng-init="vm.getUsers()"> <table class="table"> <tr> <th>user</th> <th>name</th> <th>role</th> <th>options</th> </tr> <tr ng-repeat="user in vm.users"> <td>{{ ::user.email }}</td> <td>{{ ::user.username }}</td> <td>{{ ::user.role }}</td> <td><a class="btn btn-default" href="#!/admin/users/{{ ::user.username }}/edit">Edit</a></td> </tr> </table> <a class="btn btn-default" href="#!/user-create">Add User</a> </div>'),a.put("views/client/forms/user-settings.html",'<div class="container" ng-init="getProfile()"> <div class="row"> <div class="panel panel-default"> <div class="panel-heading">Settings</div> <div class="panel-body"> <div class="form-group"> <label for="email">email address</label> <input type="email" name="email" class="form-control" ng-model="user.email"> </div> <div class="form-group"> <label for="password">password</label> <input type="password" name="password" class="form-control" ng-model="user.password"> </div> <div class="form-group"> <label for="passwordConfirm">password confirm</label> <input type="password" name="password confirm" class="form-control" ng-model="user.passwordConfirm" match="user.password"> </div> <a class="btn btn-default btn-block" ng-click="upsertUser(user)">Save</a> <a class="btn btn-default btn-block" ng-click="resetUser()">Reset</a> </div> </div> </div> </div>'),a.put("views/client/modals/image-upload.html",'<div class="container" ng-init="getUserImages()"> <div class="row"> <div class="col-md-6"> <div class="profile-image"> <carousel> <slide ng-repeat="image in user.images" active="slide.active" actual> <div class="profile-image"> <a ng-click="setProfileImage(image.image_url)"><img ng-src="{{ image.image_url }}" height="455px" width="600px"> </a> </div> <div class="carousel-caption"> <p>profile image {{ $index }}</p> </div> </slide> </carousel> <p><i>* click to set image as profile image</i> </p> </div> </div> <div class="col-md-6"> <div class="row" style="height: 440px"> <div class="content-inner" ng-repeat="image in user.images"> <h4>{{ image.title }}</h4> </div> <div class="form-group"> <input id="upload" type="file" name="file" class="upload" style="display: none" file> <button type="button" uploadfile class="btn btn-default btn-block">Select Image to upload</button> <button type="button" ng-click="openImageManager()" class="btn btn-default btn-block">Manage User Images</button> <!-- Progress Bar --> <div class="progress" style="margin-top: 15px"> <div class="progress-bar" role="progressbar" aria-valuenow="{{ uploadProgress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ uploadProgress }}%"> {{ uploadProgress == 0 ? \'\' : uploadProgress + \'%\' }} </div> </div> <a class="btn btn-block btn-lg" ng-click="uploadImage()">Upload</a> </div> </div> <div class="row"> <div class="btn-group pull-right"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok(); upsertUser(user)" style="margin-left: 5px">Save</a> </div> </div> </div> </div> </div>'),a.put("views/client/user-view.html",'<div class="container" ng-controller="UserController as vm" ng-init="vm.getProfile()"> <form name="userForm"> <div class="row"> <h3 class="title text-center"><a ng-click="vm.fields.editName = !vm.fields.editName" ng-show="!fields.editName">{{ vm.user.username }}</a></h3> <h3><input type="text" name="editName" class="title text-center" ng-model="vm.user.username" style="width: 100%" ng-keyup="reset($event, field)" ng-show="vm.fields.editName" ng-enter="save($event, \'editName\', user)"></h3> <hr> <a ng-click="vm.openImageUploadModal()" uib-tooltip="click to change"><img class="img-responsive center-block" src="{{ vm.user.profile_image }}"> </a> <br> </div> <div class="row"> <a ng-click="vm.fields.editBio = !vm.fields.editBio"><h4 class="title text-center">BIO</h4> <p class="text-center" ng-hide="vm.fields.editBio" ng-show="!vm.fields.editBio">{{ vm.user.bio }}</p></a> <input type="text" name="userBio" ng-model="vm.user.bio" ng-keyup="reset($event, field)" ng-if="vm.fields.editBio" class="form-control" ng-enter="vm.save($event, \'editBio\', vm.user)"> <i ng-if="editBio">* press \'esc\' to reset field</i> </div> <div class="row" ng-if="vm.user.pieces.length > 0"> <h4 class="title text-center">ISSUE PIECES</h4> <div ng-repeat="piece in vm.user.pieces"> <p class="text-center"><a href="#!/issue/{{ piece.issue_id }}/{{ piece.title_url }}">{{ piece.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="vm.user.posts.length > 0"> <h4 class="title text-center">ARTWORK/ONLINE CONTENT</h4> <div ng-repeat="post in vm.user.posts"> <p class="text-center"><a href="#!/online/{{ post.title_url }}">{{ post.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="vm.user.entries.length > 0"> <h4 class="title text-center">NEWS ENTRIES</h4> <div ng-repeat="entry in vm.user.entries"> <p class="text-center"><a href="#!/entry/{{ entry.title_url }}">{{ entry.title | uppercase }}</a> </p> </div> </div> <div class="row"> <h4 class="title text-center">SOCIAL LINKS</h4> <div class="col-xs-6 col-center-block"> <ul class="social" ng-repeat="(key, val) in vm.user.social_links"> <li class="social-link" uib-popover-template="popover.templateUrl" tooltip-trigger="mouseenter"><a><i ng-class="{\'fa fa-twitter\' : key === \'twitter\', \'fa fa-facebook\' : key === \'facebook\', \'fa fa-linkedin\' : key === \'linked_in\', \'fa fa-tumblr\' : key === \'tumblr\', \'fa fa-behance\' : key === \'behance\', \'fa fa-github\' : key === \'github\', \'fa fa-youtube-play\' : key === \'youtube\', \'fa fa-wordpress\' : key === \'wordpress\', \'fa fa-instagram\' : key === \'instagram\', \'fa fa-google-plus\' : key === \'google_plus\' }"></i></a> <script type="text/ng-template" id="popoverTemplate.html"><div class="form-group">\n                        <input type="text" ng-model="vm.user.social_links[key]" class="form-control" style="width: 100%" placeholder="enter {{ key }} link" ng-enter="vm.save($event, nil, vm.user)" />\n                     </div>\n                     <a class="btn-default"></a></script> </li> </ul> </div> </div> </form> </div>'),a.put("views/core/about.html",'<div class="container"> <h1 class="text-center title">LE MAT POST-JOKE NON-MANIFESTO</h1> <hr> <p style="line-height: 200%; font-size: 16px">Le Mat is a non-philosophical enterprise that programmatically exploits its own ignorance in the name of annihilating—aesthetically and discursively—the “subject of science” or a “subject supposed to know” which has haunted philosophical and artistic discourse. Le Mat decisively locates itself as the obverse of this subject; by making it speak it deploys an unconscious strategy of subverting or exiting their (philosophy and art’s) linear dialectics of negation/deconstruction as a wager that, by knowing nothing at all, it situates itself in the position of truth. Thus, it engages a dehiscent discourse emerging in the real or recognized absence of this subject of science—a situation which authorizes—proscribes the generative program/analytic practice of dialectically anticipating, reproducing, and directing the negativizing effects of this absence as a strategy of anti-pedagogical and anti-humanist dissemination of a “problem set” or a “program of research” informed our elected discursive procedures in the domains of psychoanalysis, aesthetics, politics, etc.</p> <br> <p style="line-height: 200%; font-size: 16px">Thus, Le Mat is a [de]regulated cybernetics of the discursive effects of ignorance, a playful Jacobinism-Reagonomics (Reacobinism) in the political economy of philosophy which simultaneously decenters as it aggregates the remnants of the philosophical state’s [logo]centralized humanist discursive apparatus—undoing and exposing philosophy’s various decisions and deploying it in the name of our aesthetic and political practices—heretofore parasitized for philosophy’s own purposes (namely, to validate and exercise the Principle of Sufficient Philosophy) and used to scaffold its degenerating program of research.</p> <br> <p style="line-height: 200%; font-size: 16px">In a word, Le Mat makes extensive use of Evil (reflexivity, infinite exchangeability, spiraling negativity, undecidability, undeconstructability, etc.) as a part of its philosophical conspiracy to establish localized hallucinogenic epistemologies, agitate, or produce “revolutionary flows” by engaging a set of philosophical reciprocally redefined pragmatics (Lacauzian, Delecanian, Dergelian, and Herridian) as the groundwork for an as-yet-unknown and nonspecific democratic/democratizing project.</p> <p style="font-size: 16px" class="pull-right">- The Editors</p> </div>'),a.put("views/core/editors.html",'<div class="container" ng-controller="UserController as vm" ng-init="vm.getUsers()"> <div class="row" ng-repeat="user in vm.users | omit: exclude"> <div> <div class="row"> <h3 class="title text-center">{{ ::user.username }}</h3> <hr> <img class="img-responsive center-block" src="{{ ::user.profile_image }}"> <br> </div> <div class="row" ng-if="user.pieces.length > 0"> <h4 class="title text-center">ISSUE PIECES</h4> <div ng-repeat="piece in user.pieces"> <p class="text-center"><a href="#!/issue/{{ ::piece.issue_id }}/{{ ::piece.title_url }}">{{ piece.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="user.posts.length > 0"> <h4 class="title text-center">ARTWORK/ONLINE CONTENT</h4> <div ng-repeat="post in user.posts"> <p class="text-center"><a href="#!/online/{{ ::post.title_url }}">{{ ::post.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="user.entries.length > 0"> <h4 class="title text-center">NEWS ENTRIES</h4> <div ng-repeat="entry in user.entries"> <p class="text-center"><a href="#!/entry/{{ ::entry.id }}">{{ ::entry.title | uppercase }}</a> </p> </div> </div> </div> </div> </div>'),a.put("views/core/entry-view.html",'<div class="container" ng-controller="EntryClientController as vm" ng-init="vm.getEntry()"> <div class="row"> <h1 class="news-entry">{{ vm.entry.title }}</h1> <hr> <p class="post-meta">Posted by <a ng-href="#!/user/{{ vm.entry.user.username }}"> {{ vm.entry.user.email }}</a> on {{ vm.entry.created_at | date:\'medium\' }}</p> <p ng-bind-html="vm.entry.content | to_trusted"></p> <p class="pull-right">- {{ vm.entry.user.email }}</p> </div> <hr> <div class="row"> <a class="btn btn-default" ng-href="/#!/">Back</a> <a class="btn btn-default" social-twitter custom-url="{{ ::vm.url }}"><span class="fa fa-twitter"></span></a> <dir-disqus disqus-shortname="lematjournal" disqus-identifier="{{ vm.identifier }}" disqus-url="{{ vm.url }}" disqus-title="{{ vm.entry.title }}"> </dir-disqus> </div> </div>'),a.put("views/core/issue-list.html",'<div class="container" ng-controller="IssueClientController as vm" ng-init="vm.getIssues()"> <div class="content" ng-repeat="issue in vm.issues"> <div class="content-inner"> <h2><a href="#!/issues/{{ ::issue.id }}">{{ ::issue.title | uppercase }}:</a></h2> <h2><a href="#!/issues/{{ ::issue.id }}"><img ng-src="{{ ::issue.image_url }}" class="img-responsive"></a> </h2> </div> <div class="content-inner"> <h3>CONTENTS:</h3> <hr> <div class="content-inner" ng-repeat="piece in issue.pieces | orderBy: \'order\'"> <li><a href="#!/issues/{{ ::issue.id }}/{{ ::piece.title_url }}"><h4>{{ ::piece.title }} - <font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font></h4></a>  </li> </div> </div> <br> <div class="content-inner" ng-if="issue.download_link"> <h3>DOWNLOAD ISSUE: <a href="{{ ::issue.download_link }}"></a></h3> <hr> </div> </div> <br> </div>'),a.put("views/core/issue.html",'<div class="container" ng-controller="IssueClientController as vm" id="contents" ng-init="vm.getIssue()" scroll> <div class="row"> <div class="col-md-4"> <h2>WRITTEN</h2> <ul ng-repeat="piece in vm.issue.pieces | orderBy: \'order\' | filter: { piece_type: \'!Picture\' }"> <li><a href="#{{ ::piece.title_url }}" du-smooth-scroll>{{ ::piece.title }}</a> </li> </ul> </div> <div class="col-md-4"> <h2>PICTURED</h2> <ul ng-repeat="piece in vm.issue.pieces | filter: { piece_type: \'Picture\'}"> <li><a href="#{{ ::piece.title_url }}" du-smooth-scroll>{{ ::piece.title }}</a></li> </ul> </div> <div class="col-md-4"> <h2>CONTRIBUTORS</h2> <ul ng-repeat="piece in vm.issue.pieces | unique:\'users\' | orderBy: \'order\'" author> <li><font ng-repeat="user in piece.users | reverse"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span><a href="#!/user/{{ ::user.username }}">{{ ::user.username }}</a></font></li> </ul> </div> </div> <div class="row"> <div ng-repeat="piece in vm.issue.pieces | orderBy: \'order\' | filter: author.name" lemat-repeat> <div class="content" id="{{ ::piece.title_url }}"> <h4 class="title text-center">{{ ::piece.title }}</h4> <p class="text-center"><font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span><a href="#!/user/{{ ::user.username }}">{{ ::user.username }}</a></font></p> <br> <p ng-bind-html="piece.content | to_trusted"></p> </div> </div> </div> </div>'),a.put("views/core/login.html",'<div class="container"> <form name="loginForm" novalidate> <div class="form-group"> <label for="email">Email address</label> <input type="email" class="form-control" id="email" placeholder="Enter email" ng-model="credentials.email" required> </div> <div class="form-group"> <label for="password">Password</label> <input type="password" class="form-control" id="password" placeholder="Password" ng-model="credentials.password" required> </div> <button class="btn" value="Login" ng-click="postCredentials(credentials)">Submit</button> </form> <br> </div>'),a.put("views/core/main.html",'<div class="container" ng-controller="EntryClientController as vm" ng-init="vm.getEntries()"> <div dir-paginate="entry in vm.entries | itemsPerPage: 5 | orderBy: \'-created_at\'" current-page="currentPage"> <a ng-href="#!/entry/{{ ::entry.title_url }}"> <h1 class="news-entry">{{ ::entry.title | uppercase }}</h1> </a> <hr class="entry-rule"> <p class="post-meta">Posted by <a ng-href="#!/user/{{ ::entry.user.username }}"> {{ ::entry.user.email }}</a> on {{ ::entry.created_at | date:\'medium\' }} <span class="disqus-comment-count" data-disqus-url="{{ ::url }}entry/{{ ::entry.title_url }}"></span> </p> <br> <p class="post-subtitle" ng-bind-html="entry.content | to_trusted"></p> </div> <br> <ul class="pager"> <dir-pagination-controls template-url="views/core/partials/pagination.html"></dir-pagination-controls> </ul> </div> <script type="text/javascript">/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */\n   var disqus_shortname = \'lematjournal\'; // required: replace example with your forum shortname\n\n   /* * * DON\'T EDIT BELOW THIS LINE * * */\n   (function () {\n      var s = document.createElement(\'script\');\n      s.async = true;\n      s.type = \'text/javascript\';\n'+"      s.src = '//' + disqus_shortname + '.disqus.com/count.js';\n      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);\n   }());</script>"),a.put("views/core/online.html",'<div class="container" ng-controller="PostClientController as vm" ng-init="vm.getPosts()"> <header class="contrast-bar"> <h3 class="section-title"><a ng-click="setFilter()">all</a> // <a ng-click="setFilter(\'art\')">art</a> // <a ng-click="setFilter(\'essay\')"> essays</a> // <a ng-click="setFilter(\'poetry\')">poetry</a> // search: <input type="text" style="width: 200px" ng-model="filters.tags"></h3> </header> <hr> <div same-height class="row"> <div class="col-md-4" ng-repeat="post in vm.posts | filter:filters"> <div class="panel panel-default"> <div class="panel-heading"><a style="text-transform: uppercase" href="/#!/online/{{ ::post.title_url }}">{{ ::post.title }}</a> <p> - {{ ::post.user.username }}</p> </div> <div class="panel-body"><p>tags: <font ng-repeat="tag in post.tags"><span ng-show="!$first">, </span><a ng-click="setFilter(tag)">#{{ ::tag | uppercase }}</a></font></p></div> </div> </div> </div></div>'),a.put("views/core/partials/deckgrid-template.html",'<div class="photo"> <div class="photo-index" data-ng-if="card.showIndex"> <p><a ng-click="mother.deleteImage(card)">click to delete</a></p> </div> <a href="" ng-click="card.showIndex = !card.showIndex"> <div class="photo-wrapper"> <img ng-src="{{ card.image_url }}" width="200px"> </div> <div class="photo-description" ng-if="mother.isAdmin()"> <p>owner: {{ card.user.username }}</p> </div> </a> </div>'),a.put("views/core/partials/footer.html",'<div class="footer" id="footer"> <div class="container"> <div class="row"> <div class="col-lg-2 col-md-2 col-sm-4 col-xs-6"> <h3>EDITORS</h3> <ul> <li><a href="#!/user/Carter Halbrooks">Carter Halbrooks</a> </li> <li><a href="#!/user/Danielle Norris">Danielle Norris</a> </li> <li><a href="#!/user/Ian Delairre">Ian Delairre</a> </li> <li><a href="#!/user/Phoebe Meskill">Phoebe Meskill</a> </li> <li><a href="#!/user/Ian McCament">Ian McCament</a> </li> <li><a href="#!/user/Shelby Jackson">Shelby Jackson</a> </li> <li><a href="#!/user/Turner Roth">Turner Roth</a> </li> <li><a href="#!/user/Jacky Connolly">Jacky Connolly</a> </li> </ul> </div> <div class="col-lg-2 col-md-2 col-sm-4 col-xs-6"> <h3>CONTRIBUTORS</h3> <ul> <li ng-repeat="user in issueUsers"><a href="#!/user/{{ user }}">{{ user }}</a> </li> </ul> </div> <div class="col-lg-2 col-md-2 col-sm-4 col-xs-6"> <h3>ONLINE</h3> <ul> <li ng-repeat="user in postUsers"><a href="#!/user/{{ user }}">{{ user }}</a> </li> </ul> </div> <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12 pull-right social-buttons"> <h3>SOCIAL LINKS</h3> <ul class="social"> <li> <a href="https://www.facebook.com/lematjournal"><i class="fa fa-facebook"></i></a> </li> <li> <a href="https://twitter.com/lematjournal"><i class="fa fa-twitter"></i></a> </li> <li> <a href="https://github.com/lematjournal"><i class="fa fa-github"></i></a> </li> </ul> </div> </div> <!--/.row--> </div> <!--/.container--> </div> <!--/.footer--> <!--\n<div class="footer-bottom">\n	<div class="container">\n		<p class="pull-left"></p>\n	</div>\n</div>-->'),a.put("views/core/partials/header.html",'<nav class="navbar navbar-default navbar-fixed-top" style="margin-top: -25px" scroll-position="scroll"> <div class="container-fluid"> <div class="navbar-header-dropdown" uib-dropdown dropdown-append-to-body> <a class="menu-bar" uib-dropdown-toggle><span class="glyphicon glyphicon-menu-hamburger" style="font-size: 16px"></span><font class="menu-logo">LE MAT<b ng-if="title"> //</b> {{ title }}</font></a> <div class="dropdown-menu"> <ul class="nav col-sm-6 col-xs-6" role="menu"> <li> <h4 style="padding-left: 5px">HOME</h4> </li> <li class="divider"></li> <li><a href="#!/">MAIN PAGE</a> </li> <li><a href="#!/issues/">ISSUES</a> </li> <li><a href="#!/issues/1">CURRENT ISSUE</a> </li> <li><a href="#!/about">ABOUT</a> </li> <li ng-if="!isAuthenticated()"><a href="#!/login">LOGIN</a> </li> <li ng-if="isAuthenticated()"><a href="#!/" ng-click="logout()">LOGOUT</a> </li> </ul> <ul class="nav col-sm-6 col-xs-6" role="menu"> <li> <h4 style="padding-left: 5px">ONLINE</h4> </li> <li class="divider"></li> <li><a ng-click="setFilter()">CONTENTS</a> </li> <li><a ng-click="setFilter(\'art\')">ART</a> </li> <li><a ng-click="setFilter(\'essay\')">ESSAYS</a> </li> <li><a ng-click="setFilter(\'poetry\')">POETRY</a> </li> </ul> <ul class="nav col-sm-6 col-xs-6" role="menu" ng-if="isAuthenticated()"> <li> <h4 style="padding-left: 5px">USER</h4> </li> <li class="divider"></li> <li ng-if="isAdmin()"><a href="#!/admin">ADMIN</a> </li> <li ng-if="isAdmin()"><a href="#!/profile">PROFILE</a> </li> <li ng-if="isAuthenticated()"><a href="#!/profile/settings">USER SETTINGS</a> </li> </ul> <ul class="nav col-sm-6 col-xs-6 contact" role="menu"> <li> <h4 style="padding-left: 5px">CONTACT</h4> </li> <li class="divider"></li> <li><a href="#!/submissions">SUBMISSIONS</a> </li> <li><a href="#!/editors">EDITORS</a> </li> </ul> <ul class="nav col-sm-6 col-xs-6" role="menu"> <li> <h4 style="padding-left: 5px">SOCIAL</h4> </li> <li class="divider"></li> <li> <a href="https://www.facebook.com/lematjournal"><i class="fa fa-facebook"></i></a> </li> <li> <a href="https://twitter.com/lematjournal"><i class="fa fa-twitter"></i></a> </li> <li> <a href="https://github.com/lematjournal"><i class="fa fa-github"></i></a> </li> </ul> </div> </div> </div> </nav>'),a.put("views/core/partials/pagination.html",'<ul class="pagination" ng-if="1 < pages.length"> <li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"> <a class="pager" href="" ng-click="setCurrent(1)">&laquo;</a> </li> <li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }" class="ng-scope"> <a class="pager" href="" ng-click="setCurrent(pagination.current - 1)" class="ng-binding">‹</a> </li> <li ng-repeat="pageNumber in pages track by $index" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' }"> <a class="pager" href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a> </li> <li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }" class="ng-scope"> <a class="pager" href="" ng-click="setCurrent(pagination.current + 1)" class="ng-binding">›</a> </li> <li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == pagination.last }"> <a class="pager" href="" ng-click="setCurrent(pagination.last)">&raquo;</a> </li> </ul>'),a.put("views/core/piece-view.html",'<div class="container" ng-controller="PieceClientController as vm" ng-init="vm.getPiece()"> <div class="content"> <h4 class="title text-center">{{ ::vm.piece.title }}</h4> <p class="text-center"><font ng-repeat="user in vm.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font></p> <br> <p ng-bind-html="vm.piece.content | to_trusted"></p> </div> </div>'),a.put("views/core/post-view.html",'<div class="container" ng-controller="PostClientController as vm" ng-init="vm.getPost()"> <div class="row"> <h4 class="title text-center">{{ vm.post.title }}</h4> <p class="text-center">{{ vm.post.user.username }} - {{ vm.post.created_at | date: \'medium\' }}</p> <hr> <p>{{ vm.post.description }}</p> <p ng-bind-html="vm.post.content | to_trusted"></p> <hr> <a class="btn btn-default" ng-href="/#!/online">Back</a> <a class="btn btn-default" social-twitter custom-url="{{ vm.url }}"><span class="fa fa-twitter"></span></a> <dir-disqus disqus-shortname="lematjournal" disqus-identifier="{{ vm.identifier }}" disqus-url="{{ vm.url }}" disqus-title="{{ vm.post.title }}"> </dir-disqus> </div> </div>'),a.put("views/core/submissions.html",'<div class="container"> <h1 class="text-center title">LE MAT SUBMISSION GUIDELINES</h1> <hr> <p class="lead"><i>Note: open to revision</i></p> <li class="lead">Send submissions to lematjournal@gmail.com</li> <li class="lead">For visual art submit 2 to 3 images. If you are submitting photo-documentation or digital photography we will accept any size or file type of at least 300dpi; final proportions are to be determined by the editors and printing/cost constraints. We accept all species of photography. All submissions should be captioned in the following format: <br> <br> <i class="lead">Artist, title, date, medium, and dimensions are separated by commas, and these elements are followed by a period. Collection, city, and credit lines follow, separated by commas. After this, in parentheses, come all copyright and photograph credit lines. There is no terminal period, unless the basic caption information is followed by a descriptive sentence, which occurs rarely. Complete information on medium, dimensions, and collection should be provided if possible.</i> </li> <br> <li class="lead">3 to 5 poems of any length. Include a short author biography. Feel free to destroy your personality.</li> <li class="lead">Short stories and experimental fiction of 1000 to 3000 words.</li> <li class="lead">Critical works (art criticism, philosophy, literary theory/analysis, art history, knickknacks) of 1000 to 3000 words. Please use MLA format for footnoting, etc.</li> </div>'),a.put("views/core/user-view.html",'<div class="container" ng-controller="UserController as vm" ng-init="vm.getUser()"> <div class="row"> <h3 class="title text-center">{{ vm.user.username }}</h3> <hr> <img class="img-responsive center-block" src="{{ vm.user.profile_image }}"> <br> </div> <div class="row" ng-if="vm.user.bio"> <h4 class="title text-center">BIO</h4> <p class="text-center">{{ vm.user.bio }}</p> </div> <div class="row" ng-if="vm.user.pieces.length > 0"> <h4 class="title text-center">ISSUE PIECES</h4> <div ng-repeat="piece in vm.user.pieces"> <p class="text-center"><a href="#!/issue/{{ piece.issue_id }}/{{ piece.title_url }}">{{ piece.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="vm.user.posts.length > 0"> <h4 class="title text-center">ARTWORK/ONLINE CONTENT</h4> <div ng-repeat="post in vm.user.posts"> <p class="text-center"><a href="#!/online/{{ post.title_url }}">{{ post.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="vm.user.entries.length > 0"> <h4 class="title text-center">NEWS ENTRIES</h4> <div ng-repeat="entry in vm.user.entries"> <p class="text-center"><a href="#!/entry/{{ entry.title_url }}">{{ entry.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="vm.user.social_links.length > 0"> <h4 class="title text-center">SOCIAL LINKS</h4> <div class="col-xs-6 col-center-block"> <ul class="social" ng-repeat="(key, val) in vm.user.social_links"> <li class="social-link" ng-if="val"><a ng-href="{{ val }}"><i ng-class="{\'fa fa-twitter\' : key === \'twitter\', \'fa fa-facebook\' : key === \'facebook\', \'fa fa-linkedin\' : key === \'linked_in\', \'fa fa-tumblr\' : key === \'tumblr\', \'fa fa-behance\' : key === \'behance\', \'fa fa-github\' : key === \'github\', \'fa fa-youtube-play\' : key === \'youtube\', \'fa fa-wordpress\' : key === \'wordpress\', \'fa fa-instagram\' : key === \'instagram\', \'fa fa-google-plus\' : key === \'google_plus\' }"></i></a> </li> </ul> </div> </div> </div>')}]);