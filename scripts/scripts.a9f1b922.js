!function(a){"use strict";a.module("lematClient",["lematClient.admin","lematClient.common","lematClient.core","lematClient.services","ui.router"]).config(["$locationProvider",function(a){a.html5Mode({enabled:!1}).hashPrefix("!")}]),a.module("lematClient.common.constants",[]),a.module("lematClient.common.directives",["ngAnimate","ngTouch","ui.bootstrap","duScroll","wysiwyg.module","angularUtils.directives.dirPagination","angularUtils.directives.dirDisqus","angucomplete-alt","ngTagsInput","validation.match","akoenig.deckgrid","bootstrapColumnsSameHeight","socialLinks","youtube-embed","slugifier","timer","truncate","angular-loading-bar","angular-confirm"]),a.module("lematClient.common.factories",[]),a.module("lematClient.common.filters",["angular.filter"]),a.module("lematClient.common",["lematClient.common.constants","lematClient.common.directives","lematClient.common.factories","lematClient.common.filters","lematClient.common.libs"]),a.module("lematClient.admin",[]),a.module("lematClient.admin.entries",[]),a.module("lematClient.admin.images",[]),a.module("lematClient.admin.issues",[]),a.module("lematClient.admin.mail",[]),a.module("lematClient.admin.posts",[]),a.module("lematClient.admin.submissions",[]),a.module("lematClient.admin.users",[]),a.module("lematClient.admin",["lematClient.admin.entries","lematClient.admin.images","lematClient.admin.issues","lematClient.admin.mail","lematClient.admin.posts","lematClient.admin.submissions","lematClient.admin.users"]),a.module("lematClient.core",[]),a.module("lematClient.core.editors",[]),a.module("lematClient.core.entries",[]),a.module("lematClient.core.issues",[]),a.module("lematClient.core.layout.footer",[]),a.module("lematClient.core.layout.header",[]),a.module("lematClient.core.layout.logo",[]),a.module("lematClient.core.layout.nav",[]),a.module("lematClient.core.layout",["lematClient.core.layout.header","lematClient.core.layout.footer","lematClient.core.layout.nav","lematClient.core.layout.logo"]),a.module("lematClient.core.login",[]),a.module("lematClient.core.posts",[]),a.module("lematClient.core.profile",[]),a.module("lematClient.core.submissions",[]),a.module("lematClient.core",["lematClient.core.editors","lematClient.core.entries","lematClient.core.issues","lematClient.core.layout","lematClient.core.login","lematClient.core.posts","lematClient.core.profile","lematClient.core.submissions"]),a.module("lematClient.services",["ngCookies","ngSanitize","ng.deviceDetector","ngFileSaver","ngStorage"]),a.module("lematClient.common.libs",[])}(angular),angular.module("lematClient.common.constants").constant("ServerUrl","https://lematjournal.herokuapp.com"),function(a){"use strict";function b(a,b,c,d,e,f,g){function h(){a.$uibModalInstance=d.open({scope:a,templateUrl:"scripts/admin/users/users.create.modal/users.create.modal.html",controller:"UsersCreateModalController",controllerAs:"usersCreateModalCtrl",size:"lg"}),a.$uibModalInstance.result.then(function(a){j.entry.user_id=a.id})}function i(){a.$uibModalInstance=d.open({scope:a,templateUrl:"scripts/admin/images/images.upload.modal/images.upload.modal.html",controller:"ImagesUploadModalController",controllerAs:"imagesUploadModalCtrl",size:"lg",resolve:{images:function(){return g.getImages(),g.images}}}),a.$uibModalInstance.result.then(function(a){j.entry.image_url=a.image_url,console.log(a)})}var j=this;j.entry={},j.identifier=b.entry,j.getEntries=function(){f.getEntries().then(function(){j.entries=f.entries})},j.getEntry=function(){f.getEntry(b.entry).then(function(){j.entry=f.entry})},j.upsertEntry=function(a){e.isAuthenticated()&&(f.upsertEntry(a),c.path("/admin/entries"))},j.deleteEntry=function(a){e.isAuthenticated()&&(f.deleteEntry(a),c.path("/admin/entries"))},j.openUserModal=h,j.openImageUploadModal=i,a.$on("selectedUser",function(a,b){j.entry.user_id=b.id})}a.module("lematClient.admin.entries").controller("EntriesAdminController",b),b.$inject=["$scope","$stateParams","$location","$uibModal","AuthFactory","EntryFactory","ImagesFactory"]}(angular),function(a){"use strict";function b(a,b,c,d,e){function f(a){for(var b=0;b<g.images.length;b++)if(g.images[b].id===a)return b}var g=this;a.isAdmin=function(){return c.isAdmin()},g.getImages=function(){e.getImages().then(function(){g.images=e.images})},g.deleteImage=function(a){d.deleteFile(a.image_url).then(function(){e.deleteImage(a.id).then(function(){g.images.splice(f(a.id),1)},function(){console.log("error")})})},a.pageChangeHandler=function(){},a.currentPage=1}a.module("lematClient.admin.images").controller("ImagesController",b),b.$inject=["$scope","$q","AuthFactory","AS3Factory","ImagesFactory"]}(angular),angular.module("lematClient.admin.images").factory("ImagesFactory",["$http","ServerUrl",function(a,b){var c=[],d={},e=function(){return a.get(b+"/content/images/").then(function(a){angular.copy(a.data,c)})},f=function(c){return a["delete"](b+"/content/images/"+c).then(function(){})},g=function(d){console.log("input image",d);var e={image:{credits:c.credits,image_url:d.image_url,user_id:d.user_id}};return console.log("params",e),a.post(b+"/content/images/",e).then(function(a){angular.copy(a.data,d)},function(a){console.log("error: ",a)})};return{getImages:e,uploadImage:g,deleteImage:f,images:c,image:d}}]),function(a){"use strict";function b(a,b,c,d,e){var f=this;f.images=e,f.setImage=function(a){f.image=a,toastr.info("","Image selected")},f.uploadImage=function(){var c={user_id:b.userId,image_url:f.image};d.uploadImage(c).then(function(){toastr.success(c.image_url,"Image uploaded"),f.images.push(c),a.currentIndex=f.images.length-1,f.setImage(c)})},a.ok=function(){c.close(f.image)},a.cancel=function(){c.dismiss("cancel")},a.currentIndex=0,a.setCurrentSlideIndex=function(b){a.currentIndex=b},a.isCurrentSlideIndex=function(b){return a.currentIndex===b},a.prevSlide=function(){--a.currentIndex,-1===a.currentIndex&&(a.currentIndex=f.images.length-1)},a.nextSlide=function(){++a.currentIndex,a.currentIndex>f.images.length-1&&(a.currentIndex=0)}}a.module("lematClient.admin.images").controller("ImagesUploadModalController",b),b.$inject=["$scope","$rootScope","$uibModalInstance","ImagesFactory","images"]}(angular),function(a){"use strict";function b(b,c,d,e,f,g,h,i,j,k){function l(){b.$uibModalInstance=f.open({scope:b,templateUrl:"scripts/admin/issues/issues.cover.modal/issues.cover.modal.html",controller:"IssuesCoverModalController",controllerAs:"issuesCoverModalCtrl",size:"lg",resolve:{images:function(){return j.getImages(),j.images}}}),b.$uibModalInstance.result.then(function(a){m.issue.image_url=a,m.upsertIssue(m.issue)})}var m=this;m.getIssues=function(){i.getIssues().then(function(){m.issues=i.issues})},m.getIssue=function(){i.getIssue(d.id).then(function(){m.issue=i.issue})},m.getPieces=function(){i.getIssue(d.id).then(function(){m.pieces=i.pieces})},m.upsertIssue=function(a){g.isAuthenticated()&&(i.upsertIssue(a),i.getIssues())},m.deleteIssue=function(a){g.isAuthenticated()&&i.deletePost(a)},m.upsertPiece=function(a){g.isAuthenticated()&&k.upsertPiece(a,d.id).then(function(){m.getIssue(d.id),m.getPieces()})},m.deletePiece=function(){g.isAuthenticated()&&k.deletePiece(b.piece)},m.updatePieces=function(){a.forEach(b.issue.pieces,function(a){m.upsertPiece(a)})},b.uploadImage=function(){var a={user_id:c.userId,image_url:m.issue.image_url};j.uploadImage(a)},m.openImageManager=l}a.module("lematClient.admin.issues").controller("IssuesAdminController",b),b.$inject=["$scope","$rootScope","$stateParams","$location","$uibModal","AuthFactory","AS3Factory","IssuesFactory","ImagesFactory","PiecesFactory"]}(angular),function(a){"use strict";function b(a,b,c,d,e){var f=this;f.images=e,f.setIssueImage=function(a){f.image_url=a,toastr.info("Issue cover image selected",a)},f.uploadImage=function(){var a={user_id:b.userId,image_url:f.issue.image_url};d.uploadImage(a).then(function(){d.getImages()})},a.ok=function(){c.close(f.image_url)},a.cancel=function(){c.dismiss("cancel")},a.pageChangeHandler=function(){},a.currentPage=1}a.module("lematClient.admin.issues").controller("IssuesCoverModalController",b),b.$inject=["$scope","$rootScope","$uibModalInstance","ImagesFactory","images"]}(angular),function(a){"use strict";function b(a,b){var c=this;c.getEmails=function(){b.getEmails().then(function(){c.emails=b.emails})},c.getEmail=function(){b.getEmail(a.email).then(function(){c.email=b.email})}}a.module("lematClient.admin.mail").controller("MailController",b),b.$inject=["$stateParams","EmailFactory"]}(angular),function(a){"use strict";function b(b,c){function d(){return b.get(c+"/emails/").then(function(b){a.copy(b.data,f)})}function e(d){return b.get(c+"/emails/"+d).then(function(b){a.copy(b.data,g)})}var f=[],g={};return{getEmails:d,getEmail:e,emails:f,email:g}}a.module("lematClient.admin.mail").factory("EmailFactory",b),b.$inject=["$http","ServerUrl"]}(angular),function(a){"use strict";function b(a,b,c,d,e,f,g){function h(a){for(var b=0;b<i.piece.users.length;b++)if(i.piece.users[b].id===a)return i.piece.users[b]}var i=this;i.piece={users:[]},i.getPiece=function(){g.getPiece(b.id,b.piece),i.piece=g.piece},i.upsertPiece=function(a){e.isAuthenticated()&&g.upsertPiece(a,b.id).then(function(){f.getIssue(b.id),i.getPiece()})},i.deletePiece=function(){e.isAuthenticated()&&g.deletePiece(i.piece)},i.removeUser=function(a){i.piece.users.splice(h(a),1)},a.openUserModal=function(){a.$modalInstance=d.open({scope:a,templateUrl:"views/modals/user-create.html",controller:"UsersController",size:"lg"})}}a.module("lematClient.admin.issues").controller("PiecesAdminController",b),b.$inject=["$scope","$stateParams","$location","$uibModal","AuthFactory","IssuesFactory","PiecesFactory"]}(angular),function(a){"use strict";function b(b,c,d,e,f,g,h){function i(a){for(var b=0;b<j.posts.length;b++)if(j.posts[b].id===a)return j.posts[b].id}var j=this;j.tags=h.tags,j.getPost=function(){h.getPost(d.post).then(function(){j.post=h.post})},j.getPosts=function(){h.getPosts().then(function(){j.posts=h.posts})},j.resetPost=function(){a.copy({},j.post)},j.getUsers=function(){g.getUsers().then(function(){j.users=g.users})},j.upsertPost=function(a){f.isAuthenticated()&&(h.upsertPost(a),toastr.success("Post updated","Success"))},j.deletePost=function(a){f.isAuthenticated()&&(h.deletePost(a),j.posts.splice(i(a),1))},b.openUserModal=function(){b.$modalInstance=e.open({scope:b,templateUrl:"views/admin/modals/user-create.html",controller:"UserController",size:"lg"})},b.ok=function(){b.$modalInstance.close()},b.cancel=function(){b.$modalInstance.dismiss("cancel")},b.$on("selectedUser",function(a,b){j.post.user_id=b.id})}a.module("lematClient.admin.posts").controller("PostsAdminController",b),b.$inject=["$scope","$location","$stateParams","$uibModal","AuthFactory","UsersFactory","PostsFactory"]}(angular),function(a){"use strict";function b(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){a.$uibModalInstance=e.open({templateUrl:"scripts/admin/submissions/submissions.vote.modal/submissions.vote.modal.html",controller:"SubmissionsVoteModalController",controllerAs:"submissionsVoteModalCtrl",size:"lg",resolve:{submission:function(){return n.currentSubmissions[b]}}}),a.$uibModalInstance.result.then(function(a){n.currentSubmissions[b]=a,i.updateVotes(n.currentSubmissions[b]),n.querySubmissions(n.currentSubmissions)})}var n=this;h.setUser(),n.userId=h.session.id,n.getEditors=function(){return k.getEditors().then(function(){n.editors=k.editors})},n.getNumber=function(a){return new Array(a)},n.getSubmission=function(){i.getSubmission(g.submission).then(function(){n.submission=i.submission,n.submission.attachments=n.submission.attachments})},n.getSubmissions=function(){i.getSubmissions().then(function(){n.submissions=i.submissions})},n.getAcceptedSubmissions=function(){i.getAcceptedSubmissions().then(function(){n.acceptedSubmissions=i.acceptedSubmissions})},n.getPendingSubmissions=function(){i.getPendingSubmissions().then(function(){n.pendingSubmissions=i.pendingSubmissions})},n.getPendingSubmissions=function(){i.getPendingSubmissions().then(function(){n.pendingSubmissions=i.pendingSubmissions})},n.getCurrentRoundSubmissions=function(){i.getCurrentRoundSubmissions().then(function(){n.currentSubmissions=i.currentSubmissions,n.currentSubmissions&&n.querySubmissions(n.currentSubmissions)})},n.upsertSubmission=function(){var a={attachments:n.submission.attachments,email_address:n.submission.email_address,email_content:n.submission.email_content,submission_type:n.submission.submission_type,tag_names:n.submission.tags,title:n.submission.title,uid:n.submission.uid,user:{username:n.submission.username}};i.upsertSubmission(a)},n.getTags=function(){j.getTags().then(function(){n.tags=j.tags})},a.disabled=[],n.querySubmissions=function(b){for(var c=0;b.length>c;c++)for(var d=0;b[c].votes_array.length>d;d++)console.log("submission: ",b[c].uid," : ",b[c].votes_array[d].user_id===n.userId),b[c].votes_array[d].user_id===n.userId&&(a.disabled[c]=!0)},n.convertDocxToHtml=function(){var a=d.defer(),e={submission:{document:c("filterDocs")(n.submission.attachments)[0]}};return b.post(l+"/submissions/render-doc",e).then(function(b){n.doc=b.data,toastr.success("You can edit your submission in the browser.","Preview Generated"),a.resolve(n.doc)},function(b){console.log(b),a.reject(b),toastr.info("This happens when the file format contains irregular data, we're working on being able to generate previews in all cases.","Could not generate preview")}),a.promise},n.submissionModal=function(b){a.disabled[b]===!0||m(b)},n.deleteSubmission=function(a){i.deleteSubmission(a)}}a.module("lematClient.admin.submissions").controller("SubmissionsAdminController",b),b.$inject=["$scope","$http","$filter","$q","$uibModal","$rootScope","$stateParams","AuthFactory","SubFactory","PostsFactory","UsersFactory","ServerUrl"]}(angular),function(a){"use strict";function b(b,c,d,e,f,g){function h(){i.master={},i.submission=g,a.copy(i.submission,i.master),b.index=i.submission.votes_array.length,i.submission.votes_array[b.index]={user_id:i.userId,vote:void 0,weight:e.session.weight}}var i=this;e.setUser(),i.userId=e.session.id,i.comment={user_id:i.userId,submission_id:g.id,body:""},h(),i.incrementVotes=function(a){i.currentSubmissions[a].votes_array[i.currentSubmissions[a].length]?i.currentSubmissions[a].votes.total_votes++:i.currentSubmissions[a].votes_array[i.currentSubmissions[a].length]||i.currentSubmissions[a].votes.total_votes--},b.ok=function(){f.upsertComment(i.comment),i.submission.comments.push(i.comment),d.close(i.submission)},b.cancel=function(){a.copy(i.master,i.submission),d.dismiss("cancel")},b.customMenu=[["bold","italic","underline","strikethrough","subscript","superscript"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["code","quote","paragraph"],["link"]]}a.module("lematClient.admin.submissions").controller("SubmissionsVoteModalController",b),b.$inject=["$scope","$rootScope","$uibModalInstance","AuthFactory","SubFactory","submission"]}(angular),function(a){"use strict";function b(b,c,d,e,f,g,h,i){function j(){i.users&&0!==i.users.length?l.users=i.users:i.getUsers().then(function(){l.users=i.users})}function k(){b.$uibModalInstance=d.open({templateUrl:"scripts/core/profile/profile.image-upload.modal/profile.image-upload.modal.html",controller:"ProfileImageUploadModalController",controllerAs:"profileImageUploadModalCtrl",size:"lg",resolve:{images:function(){return h.getImages(),h.images},userId:function(){return l.user.id}}}),b.$uibModalInstance.result.then(function(a){l.user.profile_image=a,l.upsertUser(l.user)})}var l=this;l.master={},j(),l.getUser=function(){i.getUser(f.user).then(function(){l.user=i.user,a.copy(l.user,l.master)})},l.getProfile=function(){g.setUser().then(function(){c.session=g.session,i.getProfile(c.session).then(function(){l.user=i.profile,a.copy(l.user,l.master)})})},l.upsertUser=function(){g.isAuthenticated()&&!a.equals(l.user,l.master)&&i.upsertUser(l.user).then(function(){toastr.success("User updated successfully","Done")})},l.deleteUser=function(a){g.isAuthenticated()&&i.deleteUser(a)},l.resetUser=function(){l.user=l.master,toastr.info("User reset to last save","Done")},b.selectedUser=function(a){a&&b.$emit("selectedUser",a.originalObject)},b.exclude=function(a){return!a.role.match(/^(admin|editor)$/)},b.select=function(b){a.element(b.target).hasClass("active")?a.element(b.target).removeClass("active"):a.element(b.target).addClass("active"),a.element(b.target).siblings().removeClass("active")},l.openImageUploadModal=k}a.module("lematClient.admin.users").controller("UsersController",b),b.$inject=["$scope","$rootScope","$uibModal","$location","$stateParams","AuthFactory","ImagesFactory","UsersFactory"]}(angular),function(a){"use strict";function b(a,b,c,d){var e=this;a.ok=function(){d.upsertUser(e.user).then(function(){toastr.success("User created successfully","Done"),e.user=d.user,console.log(e.user),c.close(e.user)})},a.cancel=function(){c.dismiss("cancel")}}a.module("lematClient.admin.users").controller("UsersCreateModalController",b),b.$inject=["$scope","$rootScope","$uibModalInstance","UsersFactory"]}(angular),function(a){"use strict";function b(a,b,c,d){var e=this;e.users=d.users,a.exclude=function(a){return!a.role.match(/^(admin|editor)$/)}}a.module("lematClient.core.editors").controller("EditorsController",b),b.$inject=["$scope","$location","AuthFactory","UsersFactory"]}(angular),function(a){"use strict";function b(a,b,c,d,e){function f(){d.issueUsers?e.issueUsersGrabDate.valueOf()-Date.now().valueOf()>2592e5?d.getIssueUsers().then(function(a){g.issueUsers=a}):g.issueUsers=d.issueUsers:(console.log("no issue users, grabbing"),d.getIssueUsers().then(function(a){g.issueUsers=a}))}var g=this;f()}a.module("lematClient.core.layout.footer").controller("FooterController",b),b.$inject=["$rootScope","$state","AuthFactory","UsersFactory","$localStorage"]}(angular),function(a){"use strict";function b(a,b,c,d,e,f,g){var h=this;h.url=b.absUrl(),h.identifier=d.entry,h.getEntries=function(){e.getEntries().then(function(){h.entries=e.entries,h.entry=c("orderBy")(e.entries,"-created_at")[0]})},h.getEntry=function(){e.getEntry(d.entry),h.entry=e.entry},h.getIssues=function(){f.getIssues(),h.issues=f.issues},h.getPosts=function(){g.getPosts().then(function(){h.posts=g.posts})},a.pageChangeHandler=function(a){console.log("going to page "+a)},a.currentPage=1}a.module("lematClient.core.entries").controller("EntriesController",b),b.$inject=["$scope","$location","$filter","$stateParams","EntryFactory","IssuesFactory","PostsFactory"]}(angular),function(a){"use strict";function b(a,b,c,d,e){var f=this;f.url=c.absUrl(),f.isAuthenticated=function(){return e.isAuthenticated()},f.logout=function(){e.logout(),b.session={}},f.getUserName=function(){b.userName=e.getUserName()},f.isAdmin=function(){return e.isAdmin()},a.$on("scroll",function(b,c){a.title=c}),a.$on("$locationChangeStart",function(){"/issue/:id"!==c.url()&&(a.title="")}),a.scrollShow=function(){return"/issue/1"===c.url()},b.filters={},b.setFilter=function(a){b.filters.tags=a,c.path("/online")}}a.module("lematClient.core.layout.header").controller("NavController",b),b.$inject=["$scope","$rootScope","$location","$http","AuthFactory"]}(angular),function(a){"use strict";function b(a,b,c,d,e,f,g,h,i,j,k){var l=this;l.title="",l.scrollToTop=function(){e.scrollTopAnimated(0)},l.getIssues=function(){j.getIssues(),l.issues=j.issues},l.getIssue=function(){j.getIssue(c.id).then(function(){l.issue=j.issue})},l.getPiece=function(){k.getPiece(c.id,c.piece).then(function(){l.piece=k.piece})},l.exclude=function(a){return a.role.includes("contributor")}}a.module("lematClient.core.issues").controller("IssuesController",b),b.$inject=["$scope","$rootScope","$stateParams","$location","$document","$http","$uibModal","AuthFactory","AS3Factory","IssuesFactory","PiecesFactory"]}(angular),function(a){"use strict";function b(a,b,c,d){var e=this;e.getPost=function(){d.getPost(c.post).then(function(){e.post=d.post})},e.getPosts=function(){d.getPosts().then(function(){e.posts=d.posts})},a.popover={templateUrl:"tag-popover.template.html"}}a.module("lematClient.core.posts").controller("PostsController",b),b.$inject=["$scope","$location","$stateParams","PostsFactory"]}(angular),function(a){"use strict";function b(a,b,c,d){var e=this;b.session=d.setUser(),b.userId=d.session.id,e.postCredentials=function(a){d.login(a).then(function(){b.session=d.setUser(),b.userId=d.session.id,c.path("/")}),toastr.success("Logged in","Done")}}a.module("lematClient.core.login").controller("LoginController",b),b.$inject=["$scope","$rootScope","$location","AuthFactory"]}(angular),function(a){"use strict";function b(b,c,d,e,f,g,h,i){function j(){k.$uibModalInstance=d.open({templateUrl:"scripts/core/profile/profile.image-upload.modal/profile.image-upload.modal.html",controller:"ProfileImageUploadModalController",controllerAs:"profileImageUploadModalCtrl",size:"lg",resolve:{images:function(){return k.user.images},userId:function(){return k.user.id}}}),k.$uibModalInstance.result.then(function(a){k.user.profile_image=a,k.upsertProfile(k.user)})}var k=this;k.master={},k.getProfile=function(){h.getUser(f.profile).then(function(){k.user=h.user})},k.getUserProfile=function(){g.setUser().then(function(){c.session=g.session,h.getProfile(c.session).then(function(){k.user=h.profile,a.copy(k.user,k.master)})})},k.upsertProfile=function(b){g.isAuthenticated()&&!a.equals(k.user,k.master)&&h.upsertUser(b).then(function(){toastr.success("User updated successfully","Done")})},k.resetProfile=function(){b.user=b.master,toastr.info("User reset to last save","Done")},k.openImageUploadModal=j,k.fields={},k.save=function(a,b,c){k.fields[b]=!k.fields[b],k.upsertProfile(c)},k.reset=function(a){27===a.keyCode&&k.userForm.$rollbackViewValue()},b.popover={templateUrl:"popoverTemplate.html"}}a.module("lematClient.core.profile").controller("ProfileController",b),b.$inject=["$scope","$rootScope","$uibModal","$location","$stateParams","AuthFactory","UsersFactory","ServerUrl"]}(angular),function(a){"use strict";function b(b,c,d,e,f,g,h){var i=this;i.images=g,i.profileImage="",i.setProfileImage=function(a){i.profileImage=a,toastr.info(a,"Issue cover image selected")},i.uploadImage=function(){var b={user_id:h,image_url:i.profileImage};f.uploadImage(b),a.copy(b,i.image),i.images.push(b)},b.ok=function(){e.close(i.profileImage)},b.cancel=function(){e.dismiss("cancel")},b.pageChangeHandler=function(){},b.currentPage=1}a.module("lematClient.core.profile").controller("ProfileImageUploadModalController",b),b.$inject=["$scope","$rootScope","$uibModal","$uibModalInstance","ImagesFactory","images","userId"]}(angular),function(a){"use strict";function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){b.$storage.submission||(b.$storage.submission={},b.$storage.submission.attachments=[],b.$storage.doc={},b.$storage.images=[]),y.doc=b.$storage.doc,y.submission=b.$storage.submission,y.submission.attachments=b.$storage.submission.attachments,y.images=b.$storage.images,y.attachment={}}function v(){b.$storage.submission={},b.$storage.submission.attachments=[],b.$storage.doc={},b.$storage.images=[],y.doc=b.$storage.doc,y.submission=b.$storage.submission,y.submission.attachments=b.$storage.submission.attachments,y.images=b.$storage.images}function w(){b.$storage.submission.attachments=[],b.$storage.doc={},b.$storage.images=[],y.submission.attachments=b.$storage.submission.attachments,y.doc=b.$storage.doc,y.images=b.$storage.images}function x(a){for(var b=0;b<y.submission.attachments.length;b++)if(y.submission.attachments[b].id===a)return b}var y=this;b.$storage=f,y.tags=p.tags,b.imagePopover={templateUrl:"image-popover.template.html"},b.tagPopover={templateUrl:"tag-popover.template.html"},b.showEdit=!1,b.$on("refresh",function(){b.$storage.submission=y.submission,b.$storage.doc=y.doc,b.$storage.images=y.images}),u(),b.$watch(function(){return y.submission.submission_type},function(a,b){a!==b&&"main.submissions-thank-you"!==i.current&&y.submission.attachments.length>0&&(w(),toastr.info("Resetting attachments","Submission type changed"))}),y.submitVideo=function(){0===y.submission.attachments.length?y.submission.attachments.push(y.submission.link):y.submission.attachments[0]=y.submission.link,toastr.info("","Video submitted")},b.uploadFile=function(){if(toastr.success("Success","File Uploaded"),/\.(gif|jpg|jpeg|tiff|png)$/i.test(y.attachment)){var a={image_url:y.attachment};o.uploadImage(a),y.submission.attachments.push(a),y.images.push(a)}else{if(0===c("filterDocs")(y.submission.attachments).length)y.submission.attachments.push(y.attachment);else for(var b=0;y.submission.attachments.length>b;b++)/\.(gif|jpg|jpeg|tiff|png)$/i.test(y.submission.attachments[b])||(y.submission.attachments[b]=y.attachment);toastr.info("","Generating Preview..."),y.convertDocxToHtml()}},y.uploadDoc=function(){var a=y.submission.title+"-"+y.submission.user.username+"-"+Date.now().toString()+".docx";y.convertHtmlToDocx(y.doc,a).then(function(a){var b=a.data;if(console.log(a.data),y.submission.attachments&&0===c("filterDocs")(y.submission.attachments).length)y.submission.attachments.push(b);else for(var d=0;y.submission.attachments.length>d;d++)/\.(gif|jpg|jpeg|tiff|png)$/i.test(y.submission.attachments[d])||(y.submission.attachments[d]=b)})},y.clearAttachments=function(){for(var a=0;y.submission.attachments.length>a;a++)if(y.submission.attachments[a].image_url){var c=y.submission.attachments[a].image_url;n.deleteFile(c)}else{var d=y.submission.attachments[a];n.deleteFile(d)}b.$storage.submission.attachments=[],b.$storage.doc={},y.doc=b.$storage.doc,y.submission.attachments=b.$storage.submission.attachments},y.deleteFile=function(a){/\.(gif|jpg|jpeg|tiff|png)$/i.test(a.image_url)?n.deleteFile(a.image_url).then(function(){o.deleteImage(a.id).then(function(){y.submission.attachments.splice(x(a.id),1)},function(){console.log("error")})}):n.deleteFile(a)},y.convertDocxToHtml=function(){var a=g.defer(),b={submission:{document:c("filterDocs")(y.submission.attachments)[0]}};return d.post(s+"/submissions/render-doc",b).then(function(b){y.doc=b.data,toastr.success("You can edit your submission in the browser.","Preview Generated"),a.resolve(y.doc)},function(b){console.log(b),a.reject(b),toastr.info("This happens when the file format contains irregular data, we're working on being able to generate previews in all cases.","Could not generate preview")}),a.promise},y.evaluateDoc=function(){return"string"==typeof y.doc},y.convertHtmlToDocx=function(a,b){var c={submission:{document:a,title:b}},e=g.defer();return d.post(s+"/submissions/convert-doc",c).then(function(a){e.resolve(a)},function(a){e.reject(a)}),e.promise},y.postSubmission=function(){q.upsertSubmission(y.submission).then(function(a){v(),i.go("main.submissions-thank-you")},function(b){console.log("error: ",b),a.forEach(b.data,function(a,b){"email_content"===b&&toastr.error("Description "+a[0],"Error")})})},b.customMenu=[["bold","italic","underline","strikethrough","subscript","superscript"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["code","quote","paragraph"],["link"]]}a.module("lematClient.core.submissions").controller("SubmissionsController",b),b.$inject=["$scope","$filter","$http","$uibModal","$localStorage","$q","$rootScope","$state","$stateParams","$sessionStorage","$timeout","$window","AS3Factory","ImagesFactory","PostsFactory","SubFactory","UsersFactory","ServerUrl","JSZipUtils"]}(angular),function(a){"use strict";function b(){function a(a,b){b.bind("change",function(b){var c=b.target.files,d=c[0];a.file=d,a.$parent.file=d,a.$apply()})}var b={restrict:"AE",scope:{file:"@"},link:a};return b}a.module("lematClient.common.directives").directive("file",b)}(angular),function(a){"use strict";function b(a,b,c){function d(d,e,f,g){d.uploadFile=function(b,e){var f=a.defer();return f.resolve(c.uploadFile(b,e).then(function(a){var b="https://lematjournal.s3.amazonaws.com/"+a.params.Key;d.filename=b})),f.promise},e.bind("change",function(a){var c=a.target.files,e=c[0];d.file=e,d.uploadFile(d.file,d.folder,d.uploadAction).then(function(){console.log(d.filename),b(function(){g.$setViewValue(d.filename)},1500).then(function(){d.uploadAction&&d.uploadAction()})})})}var e={restrict:"AE",require:"ngModel",scope:{folder:"=",uploadAction:"="},link:d};return e}a.module("lematClient.common.directives").directive("fileSelect",b),b.$inject=["$q","$timeout","AS3Factory"]}(angular),function(a){"use strict";function b(){function b(b,c){c.bind("click",function(b){a.element(b.target).siblings("#upload").trigger("click")})}var c={restrict:"A",link:b};return c}a.module("lematClient.common.directives").directive("uploadfile",b)}(angular),function(a){"use strict";function b(){var b=function(b,c){a.element(c),b.$last&&setTimeout(function(){b.$emit("lastElem")},1)};return b}a.module("lematClient.common.directives").directive("lematRepeat",b)}(angular),function(a){"use strict";function b(a){function b(b,c){b.isLoading=function(){return a.pendingRequests.length>0},b.$watch(b.isLoading,function(a){a?c.show():c.hide()})}var c={restrict:"A",link:b};return c}a.module("lematClient.common.directives").directive("lematLoading",b),b.$inject=["$http"]}(angular),function(a){"use strict";function b(){var a=function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})};return a}a.module("lematClient.common.directives").directive("ngEnter",b)}(angular),function(a){"use strict";function b(){var a=function(a,b,c){b.bind("keydown keypress",function(b){27===b.which&&(a.$apply(function(){a.$eval(c.ngEsc)}),b.preventDefault())})};return a}a.module("lematClient.common.directives").directive("ngEsc",b)}(angular),function(a){"use strict";function b(b){function c(c){var d=[];c.$on("lastElem",function(){a.forEach(c.vm.issue.pieces,function(a){var b="#"+a.title_url.toString(),c=document.querySelector(b),e=c.getBoundingClientRect().top;d.push({title:a.title,pos:e})}),d.sort(function(a,b){return parseFloat(a.pos-b.pos)})});var e=0;b.on("scroll",function(){try{c.scroll<d[0].pos&&(c.title="")}catch(a){}try{c.scroll>d[e].pos&&c.scroll>d[0].pos&&(c.vm.title=d[e].title)}catch(a){}try{c.scroll>d[e+1].pos&&e++}catch(a){}try{c.scroll<d[e].pos&&c.scroll>d[0].pos&&e--}catch(a){}c.$emit("scroll",c.vm.title.toUpperCase())})}var d={scope:!1,controller:"IssuesController",controllerAs:"vm",bindToController:!0,link:c};return d}a.module("lematClient.common.directives").directive("scroll",b),b.$inject=["$document"]}(angular),function(a){"use strict";function b(b){function c(c,d){var e=a.element(b),f=function(){c.scroll=e.scrollTop()};e.on("scroll",c.$apply.bind(c,f)),f()}var d={scope:{scroll:"=scrollPosition"},link:c};return d}a.module("lematClient.common.directives").directive("scrollPosition",b),b.$inject=["$document"]}(angular),function(a){"use strict";function b(a){function b(b,c,d){c.removeAttr("ui-sref-if"),a(c)(b),b.$watch("if",function(d){d?c.attr("ui-sref",b.val):(c.removeAttr("ui-sref"),c.removeAttr("href")),a(c)(b)})}var c={scope:{val:"@uiSrefVal","if":"=uiSrefIf"},link:b};return c}b.$inject=["$compile"],a.module("lematClient.common.directives").directive("uiSrefIf",b)}(angular),function(a){"use strict";function b(b,c,d){function e(){return b.get(d+"/amazon/sign_key").then(function(b){a.copy(b.data,i)})}function f(a,b){var d=c.defer();return e().then(function(){var c=new AWS.S3({region:"us-east-1",credentials:new AWS.Credentials(i.access_key,i.secret_key)});if(a){var e=h()+"-"+a.name.replace(/\s+/g,"-").toLowerCase(),f={Bucket:"lematjournal",Key:b+e,ContentType:a.type,Body:a,ServerSideEncryption:"AES256"};d.resolve(c.putObject(f,function(a,b){return a?!1:!0}))}else console.log("Please select a file to upload")}),d.promise}function g(a){console.log(a);var b=c.defer();return e().then(function(){var c=new AWS.S3({region:"us-east-1",credentials:new AWS.Credentials(i.access_key,i.secret_key)});a=a.replace("https://lematjournal.s3.amazonaws.com/",""),
console.log(a);var d={Bucket:"lematjournal",Key:a};b.resolve(c.deleteObject(d,function(a,b){a&&console.log(a,a.stack)}))}),b.promise}function h(){for(var a="",b="abcdefghijklmnopqrstuvwxyz0123456789",c=0;16>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}var i={};return{getKeys:e,uploadFile:f,deleteFile:g,keys:i}}a.module("lematClient.common.factories").factory("AS3Factory",b),b.$inject=["$http","$q","ServerUrl"]}(angular),function(a){"use strict";function b(b,c,d,e){function f(a){return b.post(e+"/users/login",a).then(function(a){n=a.id,m(a)})}function g(){return b.post(e+"/users/logout").then(function(){d.localStorage.removeItem("lemat-user"),n={},console.log("logged out")})}function h(a){var c={user:{email:a.email,password:a.password}};return b.post(e+"/users/",c).then(function(a){m(a)},function(a){console.log(a)})}function i(){var a=JSON.parse(d.localStorage.getItem("lemat-user"));return a?!0:!1}function j(){if(d.localStorage.getItem("lemat-user")){var a=JSON.parse(d.localStorage.getItem("lemat-user"));return"admin"===a.data.role?!0:!1}}function k(){if(i()){var a=JSON.parse(d.localStorage.getItem("lemat-user"));return a.data.role}return"user"}function l(){var b=c.defer();if(d.localStorage.getItem("lemat-user")){var e=JSON.parse(d.localStorage.getItem("lemat-user")),e={id:e.data.id,email:e.data.email,username:e.data.username,role:e.data.role,weight:e.data.weight};b.resolve(a.copy(e,o))}return b.promise}function m(a){d.localStorage.setItem("lemat-user",JSON.stringify(a)),(a.data.role="admin")&&(b.defaults.headers.common.Authorization="Token token="+a.data.token,console.log(a.data.token))}var n={},o={};return{login:f,logout:g,register:h,isAuthenticated:i,isAdmin:j,getUserRole:k,setUser:l,session:o}}a.module("lematClient.common.factories").factory("AuthFactory",b),b.$inject=["$http","$q","$window","ServerUrl"]}(angular),function(a){"use strict";function b(b,c,d,e,f){function g(){return b.get(e+"/news/entries/").then(function(b){a.copy(b.data,m)})}function h(c){return b.get(e+"/news/entries/"+c).then(function(b){a.copy(b.data,l)})}function i(a){var c={entry:{title:a.title,content:a.content,user_id:a.user_id,image_url:a.image_url,title_url:f.slugify(a.title)}};return a.id?b.patch(e+"/news/entries/"+a.id,c).then(function(a){console.log("response: ",a)},function(a){console.log(a)}):b.post(e+"/news/entries/",c).then(function(a){console.log("response: ",a),h(a.data.id)},function(a){console.log("response: ",a)})}function j(a){return b["delete"](e+"/news/entries/"+a).then(function(){m.splice(k(a),1)})}function k(a){for(var b=0;b<l.length;b++)if(l[b].id===a)return b}var l={},m=[];return{getEntries:g,getEntry:h,upsertEntry:i,deleteEntry:j,entry:l,entries:m}}a.module("lematClient.common.factories").factory("EntryFactory",b),b.$inject=["$http","$window","AuthFactory","ServerUrl","Slug"]}(angular),function(a){"use strict";function b(b,c,d){function e(){a.copy({},n)}function f(){return b.get(d+"/content/issues/").then(function(b){a.copy(b.data,m)})}function g(c){return b.get(d+"/content/issues/"+c).then(function(b){a.copy(b.data,n)})}function h(a){var c={issue:{title:a.title,image_url:a.image_url,download_link:a.download_link}};return a.id?b.patch(d+"/content/issues/"+a.id,c).then(function(a){g(a.data.id)},function(a){console.log(a)}):b.post(d+"/content/issues/",c).then(function(a){m.push(a.data)},function(a){console.log("response: ",a)})}function i(a){for(var b=0;b<n.length;b++)if(m[b].id===a)return b}function j(a,c){return b["delete"](d+"/content/issues/"+c).then(function(){m.splice(i(a),1)})}function k(c){return b.get(d+"/content/issues/"+c+"/pieces").then(function(b){a.copy(b.data,o)})}function l(c){var e={image:{image_url:c.imageUrl,user_id:c.userId,issue_id:c.issueId}};return b.post(d+"/content/images/",e).then(function(b){a.copy(b.data,c)},function(a){console.log("error: ",a)})}var m=[],n={},o=[];return{getIssues:f,getIssue:g,getIssuePieces:k,issues:m,issue:n,pieces:o,upsertIssue:h,deleteIssue:j,resetIssue:e,uploadIssueImage:l}}a.module("lematClient.common.factories").factory("IssuesFactory",b),b.$inject=["$http","$window","ServerUrl"]}(angular),function(a){"use strict";function b(a,b,c){function d(){var a=c.getUserRole();return"admin"===a?h=3:"editor"===a?h=2:"author"===a?h=1:"contributor"===a?h=1:"user"===a&&(h=0),h}function e(a){"admin"===a?this.role=j.admin:"editor"===a?this.role=j.editor:"author"===a?this.role=j.author:"contributor"===a?this.role=j.contributor:this.role=j.user}function f(){var a=!1;a=d()>=i.getLevel()?!0:!1,a||b.path("/")}function g(a){i=new e(a),f()}var h={},i={},j={admin:3,editor:2,author:1,contributor:1,user:0};return e.prototype.getLevel=function(){return this.role},{roles:j,clearance:h,setPermission:g,getPermission:f,permission:i,permissionCheck:d}}a.module("lematClient.common.factories").factory("SecFactory",b),b.$inject=["$rootScope","$location","AuthFactory"]}(angular),function(a){"use strict";function b(b,c,d,e){function f(c,e){return b.get(d+"/content/issues/"+c+"/pieces/"+e).then(function(b){a.copy(b.data,i)})}function g(a,c){var f=[];a.users&&a.users.map(function(a){console.log(a),f.push(a.id)});var g={piece:{title:a.title,content:a.content,piece_type:a.piece_type,user_ids:f,issue_id:c,order:a.order,title_url:e.slugify(a.title)}};return a.id?b.patch(d+"/content/issues/"+a.issue_id+"/pieces/"+a.id,g).then(function(a){pieces.push(a.data)},function(a){console.log(a)}):b.post(d+"/content/issues/"+c+"/pieces/",g).then(function(a){console.log("error: ",a)})}function h(a){return b["delete"](d+"/content/issues/"+a.issue_id+"/pieces/"+a.id).then(function(a){console.log("response: ",a)})}var i={};return{getPiece:f,upsertPiece:g,deletePiece:h,piece:i}}a.module("lematClient.common.factories").factory("PiecesFactory",b),b.$inject=["$http","$window","ServerUrl","Slug"]}(angular),function(a){"use strict";function b(b,c,d,e){function f(){a.copy({},n)}function g(){return b.get(e+"/content/posts/").then(function(b){a.copy(b.data,m)})}function h(c){return b.get(e+"/content/posts/"+c).then(function(b){a.copy(b.data,n)})}function i(){var a=b.get(e+"/content/tags/").then(function(a){return c.tags=a.data,c.tagsGrabDate=Date.now(),o});return a}function j(a){var c={post:{title:a.title,tag_names:a.tags,user_id:a.user_id,content:a.content,post_type:a.post_type,preview:a.preview,title_url:a.title_url}};return a.id?b.patch(e+"/content/posts/"+a.id,c).then(function(a){console.log(a)}):b.post(e+"/content/posts/",c).then(function(a){console.log(a)})}function k(a){for(var b=0;b<m.length;b++)if(m[b].id===a)return b}function l(a){return b["delete"](e+"/content/posts/"+a).then(function(){m.splice(k(a),1)})}var m=[],n={},o=c.tags;return{getPosts:g,getPost:h,getTags:i,posts:m,post:n,tags:o,upsertPost:j,deletePost:l,resetPost:f}}a.module("lematClient.common.factories").factory("PostsFactory",b),b.$inject=["$http","$localStorage","AuthFactory","ServerUrl"]}(angular),function(a){"use strict";function b(b,c){function d(){return b.get(c+"/voting/accepted").then(function(b){a.copy(b.data,p)})}function e(){return b.get(c+"/voting/current").then(function(b){var c=l(b.data);a.copy(c,r)})}function f(){return b.get(c+"/voting/pending").then(function(b){a.copy(b.data,s)})}function g(){return b.get(c+"/submissions/").then(function(b){a.copy(b.data,u)})}function h(d){return b.get(c+"/submissions/"+d).then(function(b){a.copy(b.data,v)})}function i(d){var e={submission:{attachments:d.attachments,email_address:d.email_address,email_content:d.email_content,submission_type:d.submission_type,tag_names:d.tags,title:d.title,username:d.user.username}};return d.uid?b.patch(c+"/submissions/"+d.uid,e).then(function(b){a.copy(b.data,d)}):b.post(c+"/submissions/",e).then(function(b){a.copy(b.data,d)})}function j(d){var e={comment:d};return b.post(c+"/submissions/comments",e).then(function(b){a.copy(b.data,q),console.log("comment: ",q)})}function k(d){var e={submission:{votes_array:d.votes_array,user_ids:d.user_ids}};return b.patch(c+"/voting/"+d.uid,e).then(function(b){a.copy(b.data,d)})}function l(b){var c=[];return a.forEach(b,function(a){var b=new Date(a.end_date),d=new Date,e=b.valueOf()-d.getTime().valueOf();e=e.toString(),e=e.substring(0,e.length-3),e=parseInt(e),a.end_date=e,c.push(a)}),c}function m(){return b.get(c+"/voting/rounds").then(function(b){a.copy(b.data,t)})}function n(a){return b["delete"](c+"/submissions/"+a).then(function(){s.splice(o(a),1)})}function o(a){for(var b=0;b<s.length;b++)if(s[b].id===a)return b}var p=[],q={},r=[],s=[],t=[],u=[],v={};return{acceptedSubmissions:p,currentSubmissions:r,deleteSubmission:n,getAcceptedSubmissions:d,getCurrentRoundSubmissions:e,getPendingSubmissions:f,getSubmissions:g,getSubmission:h,getRounds:m,pendingSubmissions:s,rounds:t,submissions:u,submission:v,updateVotes:k,upsertComment:j,upsertSubmission:i}}a.module("lematClient.admin.submissions").factory("SubFactory",b),b.$inject=["$http","ServerUrl"]}(angular),function(a){"use strict";function b(b,c,d,e){function f(c){return b.get(e+"/users/"+c).then(function(b){a.copy(b.data,q)})}function g(){return b.get(e+"/users/").then(function(a){c.users=a.data,c.usersGrabDate=Date.now()})}function h(){b.get(e+"/users/post-users").then(function(a){return c.postUsers=a.data,c.postUsersGrabDate=Date.now(),c.postUsers})}function i(){b.get(e+"/users/issue-users").then(function(a){return c.issueUsers=a.data,c.issueUsersGrabDate=Date.now(),c.issueUsers})}function j(){return b.get(e+"/users/editors").then(function(b){a.copy(b.data,o)})}function k(c){var d={user:{email:c.email,username:c.username.replace(/[^\w\s]/gi,""),role:c.role,bio:c.bio,password:c.password,profile_image:c.profile_image,social_links:c.social_links}};return c.id?b.patch(e+"/users/"+c.id,d).then(function(b){a.copy(b.data,c),p.push(b.data)},function(a){console.log(a)}):b.post(e+"/users/",d).then(function(b){a.copy(b.data,c),p.push(b.data)},function(a){console.log(a)})}function l(a){for(var b=0;b<p.length;b++)if(p[b].id===a)return b}function m(a){return b["delete"](e+"/users/"+a).then(function(){p.splice(l(a),1)})}function n(c){return b.get(e+"/users/profiles/"+c.id).then(function(b){a.copy(b.data,s)})}var o=[],p=c.users,q={},r=c.postUsers,s={},t=c.issueUsers;return{getEditors:j,getUser:f,getUsers:g,getPostUsers:h,getIssueUsers:i,getProfile:n,upsertUser:k,deleteUser:m,editors:o,user:q,users:p,profile:s,postUsers:r,issueUsers:t}}a.module("lematClient.common.factories").factory("UsersFactory",b),b.$inject=["$http","$localStorage","AuthFactory","ServerUrl"]}(angular),angular.module("lematClient.common.filters").filter("to_trusted",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("lematClient.common.filters").filter("escapeHtml",function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return function(b){return String(b).replace(/[&<>"'\/]/g,function(b){return a[b]})}}),angular.module("lematClient.common.filters").filter("spaceless",function(){return function(a){return a?a.replace(/[()&<>"'\/]/g,"").replace(/\s+/g,"-"):void 0}}),angular.module("lematClient.common.filters").filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!==e&&(a=a.substr(0,e))}return a+(d||"…")}}),angular.module("lematClient.common.filters").filter("filterImages",function(){return function(a){var b=[];return angular.forEach(a,function(a){a.image_url&&b.push(a)}),b}}),angular.module("lematClient.common.filters").filter("filterDocs",function(){return function(a){var b=[];return angular.forEach(a,function(a){a.image_url||b.push(a)}),b}}),angular.module("lematClient.common.filters").filter("newlines",function(){return function(a){return a?a.replace(/(\r\n|\n|\r)/gm,""):void 0}}),function(){"use strict";angular.module("bootstrapColumnsSameHeight",[]).directive("sameHeight",["$window",function(a){var b=function(a){var b=0;angular.forEach(a,function(a){a.style.minHeight="0px",a.offsetHeight>b&&(b=a.offsetHeight,console.log("tallest col: ",b))}),angular.forEach(a,function(a){a.style.minHeight=b+"px"})},c=function(a){var b=a.children(),c=[],d=function(a){var b=/col-xs-([0-9]{1,2})/.exec(a);return b?parseInt(b[1],10):0},e=function(a){var b=/col-sm-([0-9]{1,2})/.exec(a);return b?parseInt(b[1],10):d(a)},f=function(a){var b=/col-md-([0-9]{1,2})/.exec(a);return b?parseInt(b[1],10):e(a)},g=function(a){var b=/col-lg-([0-9]{1,2})/.exec(a);return b?parseInt(b[1],10):f(a)};return angular.forEach(b,function(a){var b=angular.element(a).attr("class");c.push({xs:d(b),sm:e(b),md:f(b),lg:g(b)})}),c},d=function(){return a.innerWidth<768?"xs":a.innerWidth>=768&&a.innerWidth<992?"sm":a.innerWidth>=992&&a.innerWidth<1200?"md":"lg"},e=function(a){var e=c(a),f=a.children(),g=[],h=0,i=[];angular.forEach(e,function(a,b){h+a[d()]<=12?(i.push(f[b]),h+=a[d()]):(g.push(i),i=[],i.push(f[b]),h=a[d()])}),i.length>0&&g.push(i),angular.forEach(g,function(a){b(a)})};return{restrict:"EA",link:function(b,c){b.$on("lastElem",function(){e(c)}),angular.element(a).bind("resize",function(){e(c)})}}}])}(),function(a){"use strict";function b(){function a(){try{return new window.XMLHttpRequest}catch(a){}}function b(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}var c={};c._getBinaryFromXHR=function(a){return a.response||a.responseText};var d=window.ActiveXObject?function(){return a()||b()}:a;return c.getBinaryContent=function(a,b){try{var e=d();e.open("GET",a,!0),"responseType"in e&&(e.responseType="arraybuffer"),e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.onreadystatechange=function(d){var f,g;if(4===e.readyState)if(200===e.status||0===e.status){f=null,g=null;try{f=c._getBinaryFromXHR(e)}catch(h){g=new Error(h)}b(g,f)}else b(new Error("Ajax error for "+a+" : "+this.status+" "+this.statusText),null)},e.send()}catch(f){b(new Error(f),null)}},c}a.module("lematClient.common.libs").factory("JSZipUtils",b)}(angular),angular.module("truncate",[]).filter("characters",function(){return function(a,b,c){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>b){if(a=a.substring(0,b),c)for(;" "===a.charAt(a.length-1);)a=a.substr(0,a.length-1);else{var d=a.lastIndexOf(" ");-1!==d&&(a=a.substr(0,d))}return a+"…"}return a}}).filter("splitcharacters",function(){return function(a,b){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>b){var c=a.substring(0,b/2),d=a.substring(a.length-b/2,a.length);return c+"..."+d}return a}}).filter("words",function(){return function(a,b){if(isNaN(b))return a;if(0>=b)return"";if(a){var c=a.split(/\s+/);c.length>b&&(a=c.slice(0,b).join(" ")+"…")}return a}}),function(a){"use strict";a.module("lematClient").config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("admin",{url:"/admin",views:{"@":{templateUrl:"scripts/admin/admin.html"},"nav@":{templateUrl:"scripts/core/layout/nav/nav.html",controller:"NavController",controllerAs:"navCtrl"},"nav@admin":{templateUrl:"scripts/admin/layout/nav/nav.html"},"footer@":{templateUrl:"scripts/core/layout/footer/footer.html",controller:"FooterController",controllerAs:"footerCtrl"}},resolve:{permission:["SecFactory",function(a){a.setPermission("admin")}]}}).state("admin.entries",{url:"/entries",templateUrl:"scripts/admin/entries/entries.html",controller:"EntriesAdminController",controllerAs:"entriesAdminCtrl"}).state("admin.entries-create",{url:"/entries/create",templateUrl:"scripts/admin/entries/entries.create/entries.create.html",controller:"EntriesAdminController",controllerAs:"entriesAdminCtrl"}).state("admin.entries-edit",{url:"/entries/:entry/edit",templateUrl:"scripts/admin/entries/entries.edit/entries.edit.html",controller:"EntriesAdminController",controllerAs:"entriesAdminCtrl"}).state("admin.images",{url:"/images",templateUrl:"scripts/admin/images/images.html",controller:"ImagesController",controllerAs:"imagesCtrl"}).state("admin.issues",{url:"/issues",templateUrl:"scripts/admin/issues/issues.html",controller:"IssuesAdminController",controllerAs:"issuesAdminCtrl"}).state("admin.issues-create",{url:"/issues/create",templateUrl:"scripts/admin/issues/issues.create/issues.create.html",controller:"IssuesAdminController",controllerAs:"issuesAdminCtrl"}).state("admin.issues-edit",{url:"/issues/:id/edit",templateUrl:"scripts/admin/issues/issues.edit/issues.edit.html",controller:"IssuesAdminController",controllerAs:"issuesAdminCtrl"}).state("admin.issues-edit-piece",{url:"/issues/:id/edit/:piece",templateUrl:"scripts/admin/issues/pieces/pieces.edit/pieces.edit.html",controller:"PiecesAdminController",controllerAs:"piecesAdminCtrl"}).state("admin.email",{url:"/email",templateUrl:"scripts/admin/mail/mail.html",controller:"MailController",controllerAs:"mailCtrl"}).state("admin.email-detail",{url:"/email/:email",templateUrl:"scripts/admin/mail/mail.detail/mail.detail.html",controller:"MailController",controllerAs:"mailCtrl"}).state("admin.posts",{url:"/posts",templateUrl:"scripts/admin/posts/posts.html",controller:"PostsAdminController",controllerAs:"postsAdminCtrl"}).state("admin.posts-create",{url:"/posts/create",templateUrl:"scripts/admin/posts/posts.create/posts.create.html",controller:"PostsAdminController",controllerAs:"postsAdminCtrl"}).state("admin.posts-edit",{url:"/posts/:post/edit",templateUrl:"scripts/admin/posts/posts.edit/posts.edit.html",controller:"PostsAdminController",controllerAs:"postsAdminCtrl"}).state("admin.submissions",{url:"/submissions",templateUrl:"scripts/admin/submissions/submissions.html",controller:"SubmissionsAdminController",controllerAs:"submissionsCtrl"}).state("admin.submissions-comments",{url:"/submissions/:submission/comments",templateUrl:"scripts/admin/submissions/comments/comments.html",controller:"SubmissionsAdminController",controllerAs:"submissionsCtrl"}).state("admin.submissions-detail",{url:"/submissions/:submission",templateUrl:"scripts/admin/submissions/submissions.detail/submissions.detail.html",controller:"SubmissionsAdminController",controllerAs:"submissionsCtrl"}).state("admin.submissions-edit",{url:"/submissions/:submission/edit",templateUrl:"scripts/admin/submissions/submissions.edit/submissions.edit.html",controller:"SubmissionsAdminController",controllerAs:"submissionsCtrl"}).state("admin.users",{url:"/users",templateUrl:"scripts/admin/users/users.html",controller:"UsersController",controllerAs:"usersCtrl"}).state("admin.users-create",{url:"/users/create",templateUrl:"scripts/admin/users/users.create/users.create.html",controller:"UsersController",controllerAs:"usersCtrl"}).state("admin.users-edit",{url:"/users/:user/edit",templateUrl:"scripts/admin/users/users.edit/users.edit.html",controller:"UsersController",controllerAs:"usersCtrl"})}])}(angular),function(a){"use strict";a.module("lematClient").config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("root",{"abstract":!0,views:{"@":{},"footer@":{templateUrl:"scripts/core/layout/footer/footer.html",controller:"FooterController",controllerAs:"footerCtrl"},"nav@":{templateUrl:"scripts/core/layout/nav/nav.html",controller:"NavController",controllerAs:"navCtrl"}}}).state("main",{url:"/",views:{"@":{templateUrl:"scripts/core/entries/entries.html",controller:"EntriesController",controllerAs:"entriesCtrl"},"logo@":{templateUrl:"scripts/core/layout/logo/logo.html"}},parent:"root"}).state("main.entries-detail",{url:"news/:entry",views:{"@":{templateUrl:"scripts/core/entries/entries.detail/entries.detail.html",controller:"EntriesController",controllerAs:"entriesCtrl"},"logo@":{}}}).state("main.issues",{url:"issues",views:{"@":{templateUrl:"scripts/core/issues/issues.html",controller:"IssuesController",controllerAs:"issuesCtrl"},"logo@":{}}}).state("main.issues-detail",{url:"issues/:id",views:{"@":{templateUrl:"scripts/core/issues/issues.detail/issues.detail.html",controller:"IssuesController",controllerAs:"issuesCtrl"},"logo@":{}}}).state("main.issues-detail-piece",{url:"issues/:id/:piece",views:{"@":{templateUrl:"scripts/core/issues/issues.detail/piece.html",controller:"IssuesController",controllerAs:"issuesCtrl"},"logo@":{}}}).state("main.posts",{url:"online",views:{"@":{templateUrl:"scripts/core/posts/posts.html",controller:"PostsController",controllerAs:"postsCtrl"},"logo@":{}}}).state("main.posts-detail",{url:"online/:post",views:{"@":{templateUrl:"scripts/core/posts/posts.detail/posts.detail.html",controller:"PostsController",controllerAs:"postsCtrl"},"logo@":{}}}).state("main.profile",{url:"profile",views:{"@":{templateUrl:"scripts/core/profile/profile.html",controller:"ProfileController",controllerAs:"profileCtrl"},"logo@":{}}}).state("main.profile-detail",{url:"profile/:profile",views:{"@":{templateUrl:"scripts/core/profile/profile.detail/profile.detail.html",controller:"ProfileController",controllerAs:"profileCtrl"},"logo@":{}}}).state("main.editors",{url:"editors",views:{"@":{templateUrl:"scripts/core/editors/editors.html",controller:"EditorsController",controllerAs:"editorsCtrl"},"logo@":{}}}).state("main.login",{url:"login",views:{"@":{templateUrl:"scripts/core/login/login.html",controller:"LoginController",controllerAs:"loginCtrl"},"logo@":{}}}).state("main.submissions",{url:"submissions",views:{"@":{templateUrl:"scripts/core/submissions/submissions.html"},"logo@":{}}}).state("main.submissions-form",{url:"submissions/form",views:{"@":{templateUrl:"scripts/core/submissions/submissions.form/submissions.form.html",controller:"SubmissionsController",controllerAs:"submissionsCtrl"},"logo@":{},"title@main.submissions-form":{templateUrl:"scripts/core/submissions/submissions.form/submissions.title/submissions.title.html"}},redirectTo:"main.submissions-info"}).state("main.submissions-info",{url:"/info",views:{"logo@":{},"body@main.submissions-form":{templateUrl:"scripts/core/submissions/submissions.form/submissions.page-1/submissions.page-1.html"}},parent:"main.submissions-form"}).state("main.submissions-upload",{url:"/upload",views:{"logo@":{},"body@main.submissions-form":{templateUrl:"scripts/core/submissions/submissions.form/submissions.page-2/submissions.page-2.html"}},parent:"main.submissions-form"}).state("main.submissions-final",{url:"/final",views:{"logo@":{},"body@main.submissions-form":{templateUrl:"scripts/core/submissions/submissions.form/submissions.page-3/submissions.page-3.html"},"title@main.submissions-form":{templateUrl:"scripts/core/submissions/submissions.form/submissions.title/submissions.title-complete.html"}},parent:"main.submissions-form"}).state("main.submissions-thank-you",{url:"/thanks",views:{"logo@":{},"body@main.submissions-form":{templateUrl:"scripts/core/submissions/submissions.form/submissions.page-4/submissions.page-4.html"},"title@main.submissions-form":{}},parent:"main.submissions-form"}).state("main.about",{url:"about",views:{"@":{templateUrl:"scripts/core/about/about.html"},"logo@":{}}})}]),a.module("lematClient").run(["$rootScope","$state",function(a,b){a.$on("$stateChangeStart",function(a,c,d){c.redirectTo&&(a.preventDefault(),b.go(c.redirectTo,d))})}]),a.module("lematClient").run(["$rootScope","$window",function(b,c){var d=a.element(c);d.on("beforeunload",function(a){console.log("refresh detected"),a.preventDefault(),b.$broadcast("refresh")})}]),a.module("lematClient").run(["$localStorage","PostsFactory","UsersFactory","ServerUrl",function(a,b,c,d){!function(){c.users?a.usersGrabDate.valueOf()-Date.now().valueOf()>2592e5&&c.getUsers():c.getUsers(),b.tags?a.tagsGrabDate.valueOf()-Date.now().valueOf()>36e5&&b.getTags():b.getTags()}()}])}(angular),angular.module("lematClient").run(["$templateCache",function(a){"use strict";a.put("scripts/admin/admin.html",'<div ui-view="nav"></div> <div ui-view></div>'),a.put("scripts/admin/entries/entries.create/entries.create.html",'<div class="container"> <div class="row"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="entriesAdminCtrl.entry.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group" ng-controller="UsersController as usersCtrl"> <label for="user">Author: </label>{{ ::entriesAdminCtrl.entry.user.username }} <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="entriesAdminCtrl.openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="usersCtrl.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <label for="image">Preview Image: </label> <div class="input-group"> <span class="input-group-addon" id="image-addon"><a ng-click="entriesAdminCtrl.openImageUploadModal()">Select image</a></span> <input type="text" ng-model="entriesAdminCtrl.entry.image_url" id="image" placeholder="Set preview image url" class="form-control" required aria-describedby="image-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="content" textarea-class="form-control" textarea-height="400px" textarea-name="textareaPreview" textarea-required ng-model="entriesAdminCtrl.entry.content"></wysiwyg> </div> <div class="form-group"> <label for="content">Embedded HTML</label> <input type="text" class="form-control" ng-model="entriesAdminCtrl.entry.content"> </div> </div> <div class="row"> <div class="btn-group pull-right" style="margin-bottom: 5px"> <a class="btn btn-default" ng-click="entriesAdminCtrl.upsertEntry(entriesAdminCtrl.entry)">Submit</a> </div> </div> </div>'),a.put("scripts/admin/entries/entries.edit/entries.edit.html",'<div class="container" ng-init="entriesAdminCtrl.getEntry()"> <div class="row"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="entriesAdminCtrl.entry.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group" ng-controller="UsersController as usersCtrl"> <label for="user">Author: </label>{{ ::entriesAdminCtrl.entry.user.username }} <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="entriesAdminCtrl.openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="usersCtrl.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <label for="image">Preview Image: </label> <div class="input-group"> <span class="input-group-addon" id="image-addon"><a ng-click="entriesAdminCtrl.openImageUploadModal()">Select image</a></span> <input type="text" ng-model="entriesAdminCtrl.entry.image_url" id="image" placeholder="Set preview image url" class="form-control" required aria-describedby="image-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="content" textarea-class="form-control" textarea-height="400px" textarea-name="textareaPreview" textarea-required ng-model="entriesAdminCtrl.entry.content"></wysiwyg> </div> <div class="form-group"> <label for="content">Embedded HTML</label> <input type="text" class="form-control" ng-model="entriesAdminCtrl.entry.content"> </div> </div> <div class="row"> <div class="btn-group pull-right" style="margin-bottom: 5px"> <a class="btn btn-default" ng-click="entriesAdminCtrl.upsertEntry(entriesAdminCtrl.entry)">Submit</a> </div> </div> </div>'),a.put("scripts/admin/entries/entries.html",'<div class="container" ng-init="entriesAdminCtrl.getEntries()"> <div class="row"> <table class="table"> <col style="width: 5%"> <col style="width: 25%"> <col style="width: 10%"> <col style="width: 25%"> <col style="width: 30%"> <h1>news entries</h1> <tr> <th>id</th> <th>title</th> <th>author</th> <th>created</th> <th>options</th> </tr> <tr ng-repeat="entry in entriesAdminCtrl.entries"> <td>{{ entry.id }}</td> <td>{{ entry.title }}</td> <td>{{ entry.user.username }}</td> <td>{{ entry.created_at | date:\'medium\' }}</td> <td> <div class="btn-group"><a class="btn btn-default" ui-sref="main.entries-detail({ entry: entry.title_url })">View</a> <a class="btn btn-default" ui-sref="admin.entries-edit({ entry: entry.title_url })">Edit</a> <a class="btn btn-default" ng-click="entriesAdminCtrl.deleteEntry(entry.id)" confirm="are you sure?">Delete</a></div> </td> </tr> </table> <a class="btn btn-default btn-block" ui-sref="admin.entries-create">Add Entry</a> </div> </div>'),a.put("scripts/admin/images/images.html",'<div class="container" ng-init="imagesCtrl.getImages()"> <div class="row"> <h1>images</h1> <hr> <div dir-paginate="image in imagesCtrl.images | itemsPerPage: 8" current-page="currentPage"> <div class="col-xs-3"> <div class="profile-image"> <img ng-src="{{ image.image_url }}" height="255px" width="255px"> <div class="inner-box"> <p class="pull-right"><a ng-click="imagesCtrl.deleteImage(image)">[x]</a></p> </div> <div class="description"> owner: {{ image.user }} </div> </div> </div> </div> </div> <div class="row"> <ul class="pager"> <dir-pagination-controls template-url="scripts/common/templates/pagination.template.html"></dir-pagination-controls> </ul> </div> </div>'),a.put("scripts/admin/images/images.upload.modal/images.upload.modal.html",'<div class="modal-body" style="height: 785px; width: 900px"> <!-- navigation --> <div class="lightbox-nav row-centered"> <!-- close button --> <button class="close" aria-hidden="true" ng-click="cancel()">×</button> <div class="btn-group"> <a class="btn btn-xs btn-default" ng-click="prevSlide()"> ‹ Previous </a> <a target="_blank" class="btn btn-xs btn-default" title="Open in new tab"> Open image in new tab </a> <a class="btn btn-xs btn-default" ng-click="nextSlide()"> Next › </a> </div> </div> <!--   <dir-pagination-controls template-url="scripts/admin/issues/issues.cover.modal/issues.cover.modal.pagination.tpl.html"></dir-pagination-controls>--> <hr> <div class="lightbox-image-container row-centered"> <!-- image --> <div class="modal-image" style="margin-top: 5px"> <a ng-click="imagesUploadModalCtrl.setImage(imagesUploadModalCtrl.images[currentIndex])"> <img ng-repeat="image in imagesUploadModalCtrl.images" ng-hide="!isCurrentSlideIndex($index)" ng-src="{{ image.image_url }}" height="600px" width="100%"> <a class="arrow prev pull-right" ng-click="nextSlide()"><i class="glyphicon glyphicon-chevron-right"></i></a> <a class="arrow next pull-left" ng-click="prevSlide()" style="height: 100px"><span class="glyphicon glyphicon-chevron-left"></span></a> <nav class="nav carousel-nav"> <div class="wrapper"> <ul class="dots"> <li class="dot" ng-repeat="image in imagesUploadModalCtrl.images"> <a ng-class="{\'active\':isCurrentSlideIndex($index)}" ng-click="setCurrentSlideIndex($index);">{{ image.image_url }}</a></li> </ul> </div> </nav> </a> <!-- caption --> <!-- caption will go here --> </div> </div> <div class="row-centered" style="margin-top: 5px"> <div class="form-group"> <input id="upload" type="file" name="file" class="upload" style="display: none" file-select folder="\'uploads/\'" ng-model="imagesUploadModalCtrl.image" accept="image/*" upload-action="imagesUploadModalCtrl.uploadImage"> <button type="button" uploadfile class="btn btn-default btn-block">Select Image to upload</button> <!--         <button type="button" ng-click="openImageManager()" class="btn btn-default btn-block">Manage User Images</button>--> </div> <div class="btn-group pull-right" style="margin-bottom: 5px"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok()" style="margin-left: 5px">Save</a> </div> </div> </div>'),a.put("scripts/admin/issues/issues.cover.modal/issues.cover.modal.html",'<div class="modal-body" style="height: 785px; width: 900px"> <!-- navigation --> <dir-pagination-controls template-url="scripts/admin/issues/issues.cover.modal/issues.cover.modal.pagination.tpl.html"></dir-pagination-controls> <hr> <div class="lightbox-image-container row-centered"> <!-- image --> <div class="profile-image" dir-paginate="image in issuesCoverModalCtrl.images | itemsPerPage: 1" current-page="currentPage" style="margin-top: 5px"> <a ng-click="issuesCoverModalCtrl.setIssueImage(image.image_url)"> <img ng-src="{{ image.image_url }}" height="600px" width="100%"> </a> <!-- caption --> <!-- caption will go here --> </div> </div> <div class="row-centered" style="margin-top: 5px"> <div class="form-group"> <input id="upload" type="file" name="file" class="upload" style="display: none" file-select folder="\'uploads/\'" ng-model="issuesCoverModalCtrl.profileImage" accept="image/*" upload-action="issuesCoverModalCtrl.uploadImage"> <button type="button" uploadfile class="btn btn-default btn-block">Select Image to upload</button> <!--         <button type="button" ng-click="openImageManager()" class="btn btn-default btn-block">Manage User Images</button>--> </div> <div class="btn-group pull-right" style="margin-bottom: 5px"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok()" style="margin-left: 5px">Save</a> </div> </div> </div>'),
a.put("scripts/admin/issues/issues.cover.modal/issues.cover.modal.pagination.tpl.html",'<div class="lightbox-nav row-centered"> <!-- close button --> <button class="close" aria-hidden="true" ng-click="$parent.cancel()">×</button> <div class="btn-group"> <a class="btn btn-xs btn-default" ng-class="{ disabled : pagination.current == 1 }" ng-click="setCurrent(pagination.current - 1)"> ‹ Previous </a> <a target="_blank" class="btn btn-xs btn-default" title="Open in new tab"> Open image in new tab </a> <a class="btn btn-xs btn-default" ng-class="{ disabled : pagination.current == pagination.last }" ng-click="setCurrent(pagination.current + 1)"> Next › </a> </div> </div>'),a.put("scripts/admin/issues/issues.create/issues.create.html",'<div class="container"> <div class="row"> <h1>add issue:</h1> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="issue.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="download">Download Link</label> <input id="upload" type="file" name="pdf" class="upload" style="display: none" file-select folder="\'issues/\'" accept=".pdf" ng-model="issue.downloadLink"> <button type="button" uploadfile class="btn btn-default btn-block">Select pdf to upload</button> </div> <!--\n      <div class="form-group">\n         <label for="image">Cover Image</label>\n         <input id="upload" type="file" name="cover" class="upload" style="display: none" file-select folder="\'covers/\'" accept="image/*" ng-model="image" />\n         <button type="button" uploadfile class="btn btn-default btn-block">Select Image to upload</button>\n      </div>\n--> <a class="btn btn-default" ng-click="issuesAdminCtrl.upsertIssue(issuesAdminCtrl.issue)">Submit</a> </div> </div>'),a.put("scripts/admin/issues/issues.edit/issues.edit.html",'<div class="container" ng-init="issuesAdminCtrl.getIssue()"> <div class="row"> <h1>issue options</h1> <hr> <h3>issue name: <input type="text" style="width: 50%" ng-model="issuesAdminCtrl.issue.title"></h3> <h3>created: {{ ::issuesAdminCtrl.issue.created_at | date: \'medium\' }}, updated: {{ ::issuesAdminCtrl.issue.updated_at | date: \'medium\' }}</h3> <h3>num. of pieces: {{ issuesAdminCtrl.issue.pieces.length }}</h3> <h3>download link: {{ issuesAdminCtrl.issue.download_link }}</h3> <h3>cover image:</h3> <img class="center-block" uib-tooltip="click to change" ng-click="issuesAdminCtrl.openImageManager()" ng-src="{{ issuesAdminCtrl.issue.image_url }}" style="width: 50%; height: 25%; margin-bottom: 5px"> <div class="form-group" style="margin-bottom: 5px"> <input id="upload" type="file" name="cover" class="upload" style="display: none" file-select folder="\'covers/\'" accept="image/*" ng-model="issuesAdminCtrl.issue.image_url" upload-action="uploadImage"> <button type="button" uploadfile class="btn btn-default btn-block">Upload Cover Image</button> </div> <div class="form-group" style="margin-bottom: 5px"> <input id="upload" type="file" name="pdf" class="upload" style="display: none" file-select folder="\'issues/\'" accept=".pdf" ng-model="issuesAdminCtrl.issue.download_link"> <button type="button" uploadfile class="btn btn-default btn-block">Upload Issue pdf</button> </div> <div class="form-group"> <button class="btn btn-default btn-block" ng-click="issuesAdminCtrl.upsertIssue(issuesAdminCtrl.issue)">Save</button> </div> </div> <div class="row"> <h1>issue pieces</h1> <table class="table"> <tr> <th>order</th> <th>title</th> <th>author</th> <th>options</th> </tr> <tr ng-repeat="piece in issuesAdminCtrl.issue.pieces | orderBy: \'order\'"> <td>{{ piece.order }}</td> <td>{{ piece.title | cut:true: 25 }}</td> <td>by <font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font> </td> <th><a class="btn btn-default" ui-sref="admin.issues-edit-piece({ id: piece.issue_id, piece: piece.title_url })">Edit</a> <a class="btn btn-default" href="#!/admin/issues/{{ ::issuesAdminCtrl.issue.id }}/{{ ::piece.title_url }}">Preview</a> <a class="btn btn-default" ng-click="piece.order = piece.order + 1"><span class="glyphicon glyphicon-chevron-up"></span></a> <a class="btn btn-default" ng-click="piece.order = piece.order - 1"><span class="glyphicon glyphicon-chevron-down"></span></a> </th> </tr> </table> <a class="btn btn-default btn-block" href="#!/admin/issues/{{ issuesAdminCtrl.issue.id}}/pieces/create">Add Piece</a> <a class="btn btn-default btn-block" ng-click="issuesAdminCtrl.updatePieces()">Update Order</a> </div> </div>'),a.put("scripts/admin/issues/issues.html",'<div class="container" ng-init="issuesAdminCtrl.getIssues()"> <div class="row"> <table class="table"> <h1>issues</h1> <col style="width: 10%"> <col style="width: 23%"> <col style="width: 33%"> <col style="width: 34%"> <tr> <th>id</th> <th>title</th> <th>created</th> <th>options</th> </tr> <tr ng-repeat="issue in issuesAdminCtrl.issues"> <td>{{ issue.id }}</td> <td>{{ issue.title | cut:true: 25 }}</td> <td>{{ issue.created_at | date: \'medium\' }}</td> <td><div class="btn-group"><a class="btn btn-default" ui-sref="main.issues-detail({ id: issue.id })">View</a> <a class="btn btn-default" ui-sref="admin.issues-edit({ id: issue.id })">Edit</a> <a class="btn btn-default" ng-click="issuesAdminCtrl.deleteIssue(issue.id)" confirm="are you sure?">Delete</a></div> </td> </tr> </table> </div> <div class="row"> <a class="btn btn-default btn-block" ui-sref="admin.issues-create">Create Issue</a> </div> </div>'),a.put("scripts/admin/issues/pieces/pieces.create/pieces.create.html",'<div class="container"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="issuesAdminCtrl.piece.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="type">Type</label> <input type="text" ng-model="issuesAdminCtrl.piece.piece_type" id="type" class="form-control" placeholder="type" required> </div> <div class="form-group" ng-controller="UserController" ng-init="getUsers()"> <label for="user">Author(s):</label><font ng-repeat="user in issuesAdminCtrl.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font> <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create User</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="issuesAdminCtrl.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="issuesAdminCtrl.piece.content"></wysiwyg> </div> <a class="btn btn-default" ng-click="issuesAdminCtrl.upsertPiece(piece)">Submit</a> </div>'),a.put("scripts/admin/issues/pieces/pieces.edit/pieces.edit.html",'<div class="container" ng-init="piecesAdminCtrl.getPiece()"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="piecesAdminCtrl.piece.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="type">Type</label> <input type="text" ng-model="piecesAdminCtrl.piece.piece_type" id="type" class="form-control" placeholder="type" required> </div> <div class="form-group" ng-controller="UsersController as usersCtrl" ng-init="usersCtrl.getUsers()"> <label for="user">Author(s):</label> <font ng-repeat="user in piecesAdminCtrl.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}<a ng-click="piecesAdminCtrl.removeUser(user.id)"><span class="glyphicon glyphicon-remove"></span></a></font> <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="user.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" initial-value="piecesAdminCtrl.piece.author" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="piecesAdminCtrl.piece.content"></wysiwyg> </div> <a class="btn btn-default" ng-click="piecesAdminCtrl.upsertPiece(piece)">Submit</a> <a class="btn btn-default" ng-click="piecesAdminCtrl.deletePiece()"><i class="glyphicon glyphicon-trash"></i></a> </div>'),a.put("scripts/admin/layout/nav/nav.html",'<div class="container"> <header class="contrast-bar"> <h3 class="section-title"><a ui-sref="admin.entries">NEWS</a> // <a ui-sref="admin.images">IMAGES</a> // <a ui-sref="admin.issues">ISSUES</a> // <a ui-sref="admin.email">MAIL</a> // <a ui-sref="admin.posts">POSTS</a> // <a ui-sref="admin.submissions">SUBMISSIONS</a> // <a ui-sref="admin.users">USERS</a></h3> </header> <hr> </div>'),a.put("scripts/admin/mail/mail.detail/mail.detail.html",'<div class="content" ng-init="mailCtrl.getEmail()"> <div class="container"> <p>subject: {{ mailCtrl.email.subject }}</p> <p>sender: {{ mailCtrl.email.sender }}</p> <p ng-bind-html="mailCtrl.email.body | to_trusted"></p> </div> </div>'),a.put("scripts/admin/mail/mail.html",'<div class="container" ng-init="mailCtrl.getEmails()"> <div class="row" ng-show="mailCtrl.emails.length > 0" ng-animate="{enter: \'animate-enter\', leave: \'animate-leave\'}"> <h1>mail</h1> <table class="table"> <tr> <th>subject</th> <th>sender</th> <th>uid</th> <th>options</th> </tr> <tr ng-repeat="email in mailCtrl.emails | orderBy:\'uid\' : reverse"> <td>{{ ::email.subject }}</td> <td>{{ ::email.sender }}</td> <td>{{ ::email.uid }}</td> <td> <a class="btn btn-default" ui-sref="admin.email-detail({ email: email.uid })">View</a> </td> </tr> </table> </div> </div>'),a.put("scripts/admin/posts/posts.create/posts.create.html",'<div class="container" ng-init="postAdminCtrl.getTags()"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="postAdminCtrl.post.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="name">Type</label> <select ng-model="postAdminCtrl.post.post_type" id="type" class="form-control" required> <option value="image">image</option> <option value="text">text</option> <option value="video">video</option> </select> </div> <div class="form-group"> <label for="tags">Tags</label> <tags-input display-property="name" ng-model="postAdminCtrl.post.tags"> <auto-complete source="postAdminCtrl.tags"></auto-complete> </tags-input> </div> <div class="form-group" ng-controller="UsersController as usersCtrl" ng-init="usersCtrl.getUsers()"> <label for="user">Author(s):</label><font ng-repeat="user in postAdminCtrl.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last & !$first"> and </span>{{ user.username }}</font> <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="user.users" search-fields="username" title-field="username" minlength="1" input-class="form-control" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="postAdminCtrl.post.content"></wysiwyg> </div> <div class="form-group"> <label>Embedded html</label> <input type="text" class="form-control" ng-model="postAdminCtrl.post.content"> </div> <!--\n   <div class="form-group">\n      <label>Preview html</label>\n      <input type="text" class="form-control" ng-model="postAdminCtrl.post.preview">\n   </div>\n--> <a class="btn btn-default" ng-click="postAdminCtrl.upsertPost(postAdminCtrl.post)">Submit</a> </div>'),a.put("scripts/admin/posts/posts.edit/posts.edit.html",'<div class="container" ng-init="postsAdminCtrl.getPost()"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="postsAdminCtrl.post.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="name">Type</label> <select ng-model="postsAdminCtrl.post.post_type" id="type" class="form-control" required> <option value="image">image</option> <option value="text">text</option> <option value="video">video</option> </select> </div> <div class="form-group" ng-init="postsAdminCtrl.getTags()"> <label for="tags">Tags</label> <tags-input display-property="name" ng-model="postsAdminCtrl.post.tags"> <auto-complete source="postsAdminCtrl.tags"></auto-complete> </tags-input> </div> <div class="form-group" ng-controller="UsersController as usersCtrl" ng-init="usersCtrl.getUsers()"> <label for="user">Author(s):</label><font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last"> and </span>{{ user.username }}</font> <div class="input-group"> <span class="input-group-addon" id="user-addon"><a ng-click="openUserModal()">Create user</a></span> <angucomplete-alt id="authors" placeholder="Search contributing authors" pause="100" selected-object="selectedUser" local-data="users" search-fields="username" title-field="username" minlength="1" input-class="form-control form-control-small" initial-value="postsAdminCtrl.post.user.username" aria-describedby="user-addon"> </div> </div> <div class="form-group"> <wysiwyg textarea-id="post" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="postsAdminCtrl.post.content" ng-hide="postsAdminCtrl.post.post_type !== \'text\'"></wysiwyg> </div> <div class="form-group"> <label>Embedded html</label> <input type="text" class="form-control" ng-model="postsAdminCtrl.post.content"> </div> <!--\n   <div class="form-group">\n      <label>Preview html</label>\n      <input type="text" class="form-control" ng-model="postsAdminCtrl.post.preview">\n   </div>\n--> <a class="btn btn-default" ng-click="postsAdminCtrl.upsertPost(postsAdminCtrl.post)">Submit</a> <a class="btn btn-default" ng-click="postsAdminCtrl.deletePost()"><i class="glyphicon glyphicon-trash"></i> Delete</a> </div>'),a.put("scripts/admin/posts/posts.html",'<div class="container" ng-init="postsAdminCtrl.getPosts()"> <div class="row"> <table class="table"> <h1>posts</h1> <col style="width: 5%"> <col style="width: 25%"> <col style="width: 10%"> <col style="width: 25%"> <col style="width: 30%"> <tr> <th>id</th> <th>title</th> <th>author</th> <th>created</th> <th>options</th> </tr> <tr ng-repeat="post in postsAdminCtrl.posts"> <td>{{ ::post.id }}</td> <td>{{ ::post.title }} </td> <td>{{ ::post.user.username }}</td> <td>{{ ::post.created_at | date:\'medium\' }}</td> <td><div class="btn-group"><a class="btn btn-default" ui-sref="main.posts-detail({ post: post.title_url })">View</a> <a class="btn btn-default" ui-sref="admin.posts-edit({ post: post.title_url })">Edit</a> <a class="btn btn-default" ng-click="vm.deletePost(post.id)" confirm="are you sure?">Delete</a></div> </td> </tr> </table> <a class="btn btn-default btn-block" ui-sref="admin.posts-create">Add Post</a> </div> </div>'),a.put("scripts/admin/submissions/comments/comments.html",'<div class="container" ng-init="submissionsCtrl.getSubmission()"> <div class="row" ng-repeat="comment in submissionsCtrl.submission.comments" ng-if="submissionsCtrl.submission.comments"> <div class="media" style="margin-top: 10px"> <div class="media-left"> <div class="profile-image"> <img class="media-object" ng-src="{{ comment.user.profile_image }}" alt="..." height="64px" width="64px"> </div> </div> <div class="media-body"> <h4 class="media-heading">{{ submissionsCtrl.submission.vote_array[userId] }}</h4> <p>{{ comment.body }}</p> </div> </div> </div> <div class="row" ng-if="!submissionsCtrl.submission.comments"> <h1 class="text-center">no comments yet</h1> </div> </div>'),a.put("scripts/admin/submissions/submissions.detail/submissions.detail.html",'<div class="content" ng-init="submissionsCtrl.getSubmission()"> <div class="container"> <div class="row-centered"> <h3>{{ submissionsCtrl.submission.title }} from {{ submissionsCtrl.submission.email_address }}</h3> </div> <div class="row-centered"> <p ng-bind-html="submissionsCtrl.doc"></p> </div> <div class="row-centered" ng-repeat="attachment in submissionsCtrl.submission.attachments | filterImages"> <h3 class="title text-center">Attachments</h3> <div class="profile-image"> <img ng-src="{{ attachment.image_url }}" width="100%" height="100%"> <p class="text-center">{{ attachment.credits }}</p> </div> </div> <div class="row row-centered" ng-repeat="attachment in submissionsCtrl.submission.attachments"> <a ng-show="submissionsCtrl.submission.submission_type === \'text\'" class="btn btn-default" href="{{ attachment }}">download submission</a> </div> </div> </div>'),a.put("scripts/admin/submissions/submissions.edit/submissions.edit.html",'<div class="container" ng-init="submissionsCtrl.getSubmission()"> <div class="form-group"> <label for="name">Title</label> <input type="text" ng-model="submissionsCtrl.submission.title" id="title" class="form-control" placeholder="title" required> </div> <div class="form-group"> <label for="name">Type</label> <select ng-model="submissionsCtrl.submission.submission_type" id="type" class="form-control" required> <option value="image">image</option> <option value="text">text</option> <option value="video">video</option> </select> </div> <div class="form-group" ng-init="submissionsCtrl.getTags()"> <label for="tags">Tags</label> <tags-input display-property="name" ng-model="submissionsCtrl.submission.tags"> <auto-complete source="submissionsCtrl.tags"></auto-complete> </tags-input> </div> <div class="form-group"> <wysiwyg textarea-id="submission" textarea-class="form-control" textarea-height="400px" textarea-name="document" textarea-required ng-model="submissionsCtrl.doc" ng-hide="submissionsCtrl.submission.submission_type !== \'text\'"></wysiwyg> </div> <div class="row" ng-show="submissionsCtrl.submission.submission_type === \'text\' && submissionsCtrl.evaluateDoc()"> <h4 class="title text-center">{{ submissionsCtrl.submission.title }}</h4> <p class="text-center">{{ submissionsCtrl.submission.user.username }}</p> <p class="text-center">{{ submissionsCtrl.submission.created_at | date: \'medium\' }}</p> <hr> <p ng-bind-html="submissionsCtrl.doc"></p> </div> <a class="btn btn-default" ng-click="submissionsCtrl.upsertSubmission()">Submit</a> <a class="btn btn-default" ng-click="submissionsCtrl.deleteSubmission()"><i class="glyphicon glyphicon-trash"></i> Delete</a> </div>'),a.put("scripts/admin/submissions/submissions.html",'<div class="container" ng-init="submissionsCtrl.getCurrentRoundSubmissions();\n                                submissionsCtrl.getEditors();\n                                submissionsCtrl.getTags();\n                                submissionsCtrl.getPendingSubmissions();\n                                submissionsCtrl.getAcceptedSubmissions()"> <div class="row"> <h1>pending submissions: {{ submissionsCtrl.pendingSubmissions.length }}</h1> <table class="table" ng-show="submissionsCtrl.pendingSubmissions.length > 0"> <col style="width: 10%"> <col style="width: 23%"> <col style="width: 33%"> <col style="width: 34%"> <tr> <th>id</th> <th>sender</th> <th>uid</th> <th>options</th> </tr> <tr ng-repeat="submission in submissionsCtrl.pendingSubmissions"> <td>{{ ::submission.id }}</td> <td>{{ ::submission.email_address }}</td> <td>{{ ::submission.uid }}</td> <td> <div class="btn-group"> <a class="btn btn-default" ui-sref="admin.submissions-detail({ submission: submission.uid })">view</a> <a class="btn btn-default" ui-sref="admin.submissions-edit({ submission: submission.uid })">edit</a> <a class="btn btn-default" ng-click="submissionsCtrl.deleteSubmission(submission.id)">delete</a></div> </td> </tr> </table> </div> <div class="row"> <h1>current voting round: {{ submissionsCtrl.currentSubmissions[0].round_id || "none" }}</h1> <table class="table" ng-show="submissionsCtrl.currentSubmissions.length > 0"> <col style="width: 4%"> <col style="width: 13%"> <col style="width: 15%"> <col style="width: 10%"> <col style="width: 18%"> <col style="width: 35%"> <tr> <th>id</th> <th>sender</th> <th>uid</th> <th>total votes</th> <th>time remaining</th> <th>options</th> </tr> <tr ng-repeat="submission in submissionsCtrl.currentSubmissions"> <td>{{ ::submission.id }}</td> <td>{{ ::submission.email_address }}</td> <td>{{ ::submission.uid }}</td> <td>{{ submission.votes.total_votes }} out of {{ submissionsCtrl.editors.length }}</td> <td> <timer countdown="submission.end_date" max-time-unit="\'day\'" interval="1000" ng-if="submission.votes !== submissionsCtrl.editors.length">{{days}} day{{daysS}}, {{hours}} hour{{hoursS}}, {{minutes}} minute{{minutesS}}, {{seconds}} second{{secondsS}}</timer> <p ng-if="submission.votes === submissionsCtrl.editors.length">voting complete</p> </td> <td> <div class="btn-group"> <a class="btn btn-default" ui-sref="admin.submissions-detail({ submission: submission.uid })">view</a> <a class="btn btn-default" ng-class="{ disabled: submission.comments.length === 0 }" ui-sref="admin.submissions-comments({ submission: submission.uid })">discussion</a> <a class="btn btn-default" ng-disabled="disabled[$index]" ng-click="submissionsCtrl.submissionModal($index)">Cast Vote</a></div> </td> </tr> </table> </div> <div class="row"> <table class="table"> <h1>accepted submissions: {{ submissionsCtrl.acceptedSubmissions.length }}</h1> <col style="width: 10%"> <col style="width: 23%"> <col style="width: 33%"> <col style="width: 34%"> <tr> <th>id</th> <th>sender</th> <th>uid</th> <th>options</th> </tr> <tr ng-repeat="submission in submissionsCtrl.acceptedSubmissions"> <td>{{ submission.id }}</td> <td>{{ submission.email_address }}</td> <td>{{ submission.uid }}</td> <td> <div class="btn-group"><a class="btn btn-default" ui-sref="admin.submissions-detail({ submission: submission.uid })">view</a> <a class="btn btn-default" ui-sref="admin.submissions-edit({ submission: submission.uid })">edit</a> <a class="btn btn-default" ng-click="submissionsCtrl.deleteSubmission(submission.id)">delete</a></div> </td> </tr> </table> </div> <!--\n   <div class="row">\n      <h1>previous rounds</h1>\n      <table class="table">\n         <tr>\n            <th>round</th>\n            <th>created at</th>\n            <th>accepted submissions</th>\n            <th>passed submissions</th>\n         </tr>\n         <tr ng-repeat="round in submissionsCtrl.rounds">\n            <td>{{ round.id }}</td>\n            <td>{{ round.created_at | date:\'medium\' }}</td>\n            <td>{{ (round.submissions | filter: { accepted: true }).length }}</td>\n            <td>{{ (round.submissions | filter: { accepted: false }).length }}</td>\n            <td><font ng-repeat="user in record.voters"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ user.username }}</font></td>\n         </tr>\n      </table>\n   </div>\n--> </div>'),a.put("scripts/admin/submissions/submissions.vote.modal/submissions.vote.modal.html",'<div class="container" style="width: 99%"> <h3>submission uid: {{ submissionsVoteModalCtrl.submission.uid }}</h3> <h3>{{ submissionsVoteModalCtrl.submission.votes_array }}</h3> <label>Cast your vote and leave a detailed comment</label> <div class="radio"> <label> <input type="radio" value="YES" ng-model="submissionsVoteModalCtrl.submission.votes_array[index].vote"> Yes </label> </div> <div class="radio"> <label> <input type="radio" value="NO" ng-model="submissionsVoteModalCtrl.submission.votes_array[index].vote"> No </label> </div> <div class="radio"> <label> <input type="radio" value="ABSTAIN" ng-model="submissionsVoteModalCtrl.submission.votes_array[index].vote"> Abstain </label> </div> <div class="row" style="margin-bottom: 5px"> <wysiwyg style="margin-bottom: 5px" textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="comment" textarea-required ng-model="submissionsVoteModalCtrl.comment.body" textarea-menu="customMenu"></wysiwyg> <div class="btn-group pull-right"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok()" style="margin-left: 5px">Cast Vote</a> </div> </div> </div>'),a.put("scripts/admin/users/users.create.modal/users.create.modal.html",'<div class="container" style="width: 850px; height: 100%"> <div class="row"> <h1>Create User</h1> <div class="form-group"> <label for="name">Email</label> <input type="text" ng-model="usersCreateModalCtrl.user.email" id="email" class="form-control" placeholder="email"> </div> <div class="form-group"> <label for="author">Username</label> <input type="name" ng-model="usersCreateModalCtrl.user.username" id="username" class="form-control" placeholder="username" required> </div> <div class="form-group"> <label for="role">Role</label> <select class="form-control" ng-model="usersCreateModalCtrl.user.role"> <option value="editor">editor</option> <option value="author">author</option> <option value="contributor">contributor</option> </select> </div> <div class="form-group"> <label for="password">Password</label> <input type="password" ng-model="usersCreateModalCtrl.user.password" id="password" class="form-control" placeholder="password" required> </div> <div class="form-group"> <label for="password">Confirm Password</label> <input type="password" ng-model="usersCreateModalCtrl.user.passwordConfirm" id="passord" class="form-control" placeholder="password" match="usersCreateModalCtrl.user.password" required> </div> </div> <div class="row" style="margin-bottom: 15px"> <div class="btn-group pull-right" style="margin-bottom: 5px"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok()" style="margin-left: 5px">Save</a> </div> </div> </div>'),a.put("scripts/admin/users/users.create/users.create.html",'<div class="container"> <div class="row"> <div class="form-group"> <label for="name">Email</label> <input type="text" ng-model="usersCtrl.user.email" id="email" class="form-control" placeholder="email"> </div> <div class="form-group"> <label for="author">Username</label> <input type="name" ng-model="usersCtrl.user.username" id="username" class="form-control" placeholder="username" required> </div> <div class="form-group"> <label for="role">Role</label> <select ng-model="usersCtrl.user.role" class="form-control"> <option value="admin">admin</option> <option value="editor">editor</option> <option value="author">author</option> <option value="contributor">contributor</option> </select> </div> </div> <div class="row"> <div class="form-group"> <label for="password">Password</label> <input type="password" ng-model="usersCtrl.user.password" id="password" class="form-control" placeholder="password" required> </div> <div class="form-group"> <label for="password">Confirm Password</label> <input type="password" ng-model="usersCtrl.user.passwordConfirm" id="passord" class="form-control" placeholder="password" match="usersCtrl.user.password" required> </div> </div> <div class="row"> <a class="btn btn-default btn-block" ng-click="usersCtrl.upsertUser(usersCtrl.user)">Submit</a> </div> </div>'),a.put("scripts/admin/users/users.edit/users.edit.html",'<div class="container" ng-init="usersCtrl.getUser()"> <div class="row"> <h3 class="title text-center">{{ usersCtrl.user.username }}</h3> <hr> <div class="profile-image"> <a ng-click="usersCtrl.openImageUploadModal()" uib-tooltip="click to change"><img class="img-responsive center-block" src="{{ usersCtrl.user.profile_image }}" height="455px" width="455px"> </a> </div> <br> </div> <hr> <div class="row"> <!--panel--> <div class="panel panel-default"> <div class="panel-heading">User</div> <div class="panel-body"> <div class="row"> <div class="col-md-6"> <div class="list-group"> <a class="list-group-item" ng-click="select($event); selection = \'info\'">Info</a> <a class="list-group-item" ng-click="select($event); selection = \'role\'">Role</a> <a class="list-group-item active" ng-click="select($event); selection = \'settings\'">Settings</a> <a class="list-group-item" ng-click="select($event); selection = \'password\'">Password</a> <a class="list-group-item" ng-click="select($event); selection = \'actions\'">Actions</a> </div> </div> <div class="col-md-6" ng-switch on="selection"> <div class="animate-switch" ng-switch-when="actions"> <a class="btn btn-default btn-block" ng-click="usersCtrl.upsertUser(user)">Save</a> <a class="btn btn-default btn-block" ng-click="usersCtrl.resetUser()">Reset</a> <a class="btn btn-default btn-block" ng-click="usersCtrl.deleteUser(usersCtrl.user.id, usersCtrl.user.username)">Delete</a> </div> <div class="animate-switch" ng-switch-default> <div class="form-group"> <label for="name">Email</label> <input type="text" ng-model="usersCtrl.user.email" id="email" class="form-control" placeholder="email"> </div> <div class="form-group"> <label for="name">Username</label> <input type="text" ng-model="usersCtrl.user.username" id="username" class="form-control" placeholder="username"> </div> </div> <div class="animate-switch" ng-switch-when="role"> <div class="form-group"> <label for="role">Role</label> <select class="form-control" ng-model="usersCtrl.user.role"> <option value="admin">admin</option> <option value="editor">editor</option> <option value="author">author</option> <option value="contributor">contributor</option> </select> </div> </div> <div class="animate-switch" ng-switch-when="info"> <h4>email: {{ usersCtrl.user.email }}</h4> <h4>username: {{ usersCtrl.user.username }}</h4> <h4>role: {{ usersCtrl.user.role }}</h4> <h4>issue pieces: {{ usersCtrl.user.pieces.length }}</h4> <h4>online content: {{ usersCtrl.user.posts.length }}</h4> <h4>news entries: {{ usersCtrl.user.entries.length }}</h4> </div> <div class="animate-switch" ng-switch-when="password"> <div class="form-group"> <label for="password">Password</label> <input type="password" ng-model="usersCtrl.user.password" id="author" class="form-control" placeholder="password" required> </div> <div class="form-group"> <label for="author">Confirm Password</label> <input type="password" ng-model="usersCtrl.user.passwordConfirm" id="password" class="form-control" placeholder="password confirm" match="usersCtrl.user.password" required> </div> </div> </div> </div> </div> </div> </div> <div class="row" ng-if="usersCtrl.user.bio"> <div class="panel panel-default"> <div class="panel-heading">Bio</div> <div class="panel-body"> <p>{{ usersCtrl.user.bio }}</p> </div> </div> </div> <div class="row"> <div class="panel panel-default"> <div class="panel-heading">Content</div> <div class="panel-body"> <div class="container" style="margin-top: -50px"> <div class="row" ng-if="usersCtrl.user.pieces.length > 0"> <table class="table"> <col style="width: 50%"> <col style="width: 50%"> <tr> <th>pieces</th> <th>options</th> </tr> <tr ng-repeat="piece in usersCtrl.user.pieces | orderBy: \'order\'"> <td>{{ ::piece.title | cut:true: 25 }}</td> <td><a class="btn btn-default" ui-sref="main.issues-detail-piece({ id: piece.issue_id, piece: piece.title_url })">View</a> <a class="btn btn-default" ui-sref="admin.issues-edit-piece({ id: piece.issue_id, piece: piece.title_url })">Edit</a> </td> </tr> </table> </div> <div class="row" ng-if="usersCtrl.user.posts.length > 0"> <table class="table"> <tr> <th>online content</th> <th>options</th> </tr> <col style="width: 50%"> <col style="width: 50%"> <tr ng-repeat="post in usersCtrl.user.posts"> <td>{{ ::post.title }}</td> <td><a class="btn btn-default" ui-sref="main.posts-detail({ post: post.title_url })">View</a> <a class="btn btn-default" ui-sref="admin.posts-edit({ post: post.title_url })">Edit</a> </td> </tr> </table> </div> <div class="row" ng-if="usersCtrl.user.entries.length > 0"> <table class="table"> <tr> <th>news entries</th> <th>options</th> </tr> <col style="width: 50%"> <col style="width: 50%"> <tr ng-repeat="entry in usersCtrl.user.entries"> <td>{{ ::entry.title }}</td> <td> <a class="btn btn-default" ui-sref="main.entries-detail({ entry: entry.title_url })">View</a> <a class="btn btn-default" ui-sref="admin.entries.edit({ entry: entry.title_url })">Edit</a> </td> </tr> </table> </div> </div> </div> </div> </div> </div>'),
a.put("scripts/admin/users/users.html",'<div class="container"> <div class="row"> <table class="table"> <h1>users</h1> <col style="width: 5%"> <col style="width: 25%"> <col style="width: 20%"> <col style="width: 15%"> <col style="width: 35%"> <tr> <th>id</th> <th>user</th> <th>name</th> <th>role</th> <th>options</th> </tr> <tr ng-repeat="user in usersCtrl.users"> <td>{{ ::user.id }}</td> <td>{{ ::user.email }}</td> <td>{{ ::user.username }}</td> <td>{{ ::user.role }}</td> <td><div class="btn-group"><a class="btn btn-default" ui-sref="main.profile-detail({ profile: user.username })">View</a> <a class="btn btn-default" ui-sref="admin.users-edit({ user: user.username })">Edit</a> <a class="btn btn-default" ng-click="usersCtrl.deleteUser(user.id)" confirm="are you sure?">Delete</a></div> </td> </tr> </table> <a class="btn btn-default btn-block" ui-sref="admin.users-create">Add User</a> </div> </div>'),a.put("scripts/common/libs/angular-truncate/demo/index.html",'<!DOCTYPE html> <html ng-app="myApp"> <head> <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"> <title>Angular truncate text filter demo</title> <script src="../test/lib/angular/angular.min.js"></script> <script src="../src/truncate.js"></script> <script src="js/app.js"></script> </head> <body ng-controller="demoController"> <div class="container"> <h2>Angular Truncate Demo</h2> <div class="hero-unit"> <h4>Example Text</h4> <textarea ng-model="text" rows="3" placeholder="Enter test text"></textarea> <br><br> <strong>Truncate by characters</strong> <label>Number of characters (will not break on a word): <input ng-model="numChars" type="number"></label> <label>Break in the middle of words <input type="checkbox" ng-model="breakOnWord"></label> <h4>Output</h4> <div class="well text-info"> <p> {{ text | characters:numChars : breakOnWord }} </p> </div> <h4>Code</h4> <pre>{<span></span>{ text | characters:{{ numChars }}: {{ breakOnWord }}<span></span>}</pre> </div> <div class="hero-unit"> <strong>Truncate by words</strong> <label>Number of words: <input ng-model="numWords" type="number"> </label> <h4>Code</h4> <pre>{<span></span>{ text | words:{{ numWords }}:ignoreSpaces }<span></span>}</pre> <h4>Output</h4> <div class="well text-info"> <p> {{ text | words:numWords }} </p> </div> </div> <br><br> <hr> <p> <a href="https://raw.github.com/sparkalow/angular-infinite-scroll/master/src/infinite-scroll.js" class="btn btn-primary">Download</a><span class="help-inline">infinite-scroll.js</span> </p> </div> </body> </html>'),a.put("scripts/common/templates/pagination.template.html",'<ul class="pagination" ng-if="1 < pages.length"> <li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"> <a class="pager" href="" ng-click="setCurrent(1)">&laquo;</a> </li> <li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }" class="ng-scope"> <a class="pager" href="" ng-click="setCurrent(pagination.current - 1)" class="ng-binding">‹</a> </li> <li ng-repeat="pageNumber in pages track by $index" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' }"> <a class="pager" href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a> </li> <li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }" class="ng-scope"> <a class="pager" href="" ng-click="setCurrent(pagination.current + 1)" class="ng-binding">›</a> </li> <li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == pagination.last }"> <a class="pager" href="" ng-click="setCurrent(pagination.last)">&raquo;</a> </li> </ul>'),a.put("scripts/core/about/about.html",'<div class="container"> <h1 class="text-center title">LE MAT POST-JOKE NON-MANIFESTO</h1> <br> <p class="about-text">Le Mat is a non-philosophical enterprise that programmatically exploits its own ignorance in the name of annihilating—aesthetically and discursively—the “subject of science” or a “subject supposed to know” which has haunted philosophical and artistic discourse. Le Mat decisively locates itself as the obverse of this subject; by making it speak it deploys an unconscious strategy of subverting or exiting their (philosophy and art’s) linear dialectics of negation/deconstruction as a wager that, by knowing nothing at all, it situates itself in the position of truth. Thus, it engages a dehiscent discourse emerging in the real or recognized absence of this subject of science—a situation which authorizes—proscribes the generative program/analytic practice of dialectically anticipating, reproducing, and directing the negativizing effects of this absence as a strategy of anti-pedagogical and anti-humanist dissemination of a “problem set” or a “program of research” informed our elected discursive procedures in the domains of psychoanalysis, aesthetics, politics, etc.</p> <br> <p class="about-text">Thus, Le Mat is a [de]regulated cybernetics of the discursive effects of ignorance, a playful Jacobinism-Reagonomics (Reacobinism) in the political economy of philosophy which simultaneously decenters as it aggregates the remnants of the philosophical state’s [logo]centralized humanist discursive apparatus—undoing and exposing philosophy’s various decisions and deploying it in the name of our aesthetic and political practices—heretofore parasitized for philosophy’s own purposes (namely, to validate and exercise the Principle of Sufficient Philosophy) and used to scaffold its degenerating program of research.</p> <br> <p class="about-text">In a word, Le Mat makes extensive use of Evil (reflexivity, infinite exchangeability, spiraling negativity, undecidability, undeconstructability, etc.) as a part of its philosophical conspiracy to establish localized hallucinogenic epistemologies, agitate, or produce “revolutionary flows” by engaging a set of philosophical reciprocally redefined pragmatics (Lacauzian, Delecanian, Dergelian, and Herridian) as the groundwork for an as-yet-unknown and nonspecific democratic/democratizing project.</p> <p style="font-size: 16px" class="pull-right">- The Editors</p> </div>'),a.put("scripts/core/editors/editors.html",'<div class="container" ng-init="editorsCtrl.getUsers()"> <div class="row" ng-repeat="editor in editorsCtrl.users | omit: exclude"> <div> <div class="row"> <h3 class="title text-center">{{ ::editor.username }}</h3> <img class="img-responsive center-block" ng-src="{{ ::editor.profile_image }}"> <br> </div> <div class="row" ng-if="editor.pieces.length > 0"> <h4 class="title text-center">ISSUE PIECES</h4> <div ng-repeat="piece in editor.pieces"> <p class="text-center"><a href="#!/issue/{{ ::piece.issue_id }}/{{ ::piece.title_url }}">{{ piece.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="editors.posts.length > 0"> <h4 class="title text-center">ARTWORK/ONLINE CONTENT</h4> <div ng-repeat="post in user.posts"> <p class="text-center"><a href="#!/online/{{ ::post.title_url }}">{{ ::post.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="editors.entries.length > 0"> <h4 class="title text-center">NEWS ENTRIES</h4> <div ng-repeat="entry in editors.entries"> <p class="text-center"><a href="#!/entry/{{ ::entry.id }}">{{ ::entry.title | uppercase }}</a> </p> </div> </div> </div> </div> </div>'),a.put("scripts/core/entries/entries.detail/entries.detail.html",'<div class="container" ng-init="entriesCtrl.getEntry()"> <div class="row"> <h3 class="title text-center">{{ entriesCtrl.entry.title }}</h3> </div> <br> <div class="row"> <p ng-bind-html="entriesCtrl.entry.content | to_trusted"></p> <p class="pull-right">- {{ entriesCtrl.entry.user.email }}</p> </div> <div class="row"> <a class="btn btn-default" ng-href="/#!/">Back</a> <a class="btn btn-default" social-twitter custom-url="{{ ::entriesCtrl.url }}"><span class="fa fa-twitter"></span></a> <dir-disqus disqus-shortname="lematjournal" disqus-identifier="{{ entries.identifier }}" disqus-url="{{ entriesCtrl.url }}" disqus-title="{{ entriesCtrl.entry.title }}"> </dir-disqus> </div> </div>'),a.put("scripts/core/entries/entries.html",'<div class="container" ng-init="entriesCtrl.getEntries(); entriesCtrl.getIssues()"> <div class="row"> <h3 style="padding-left: 20px">NEWS // LATEST</h3> </div> <div class="row"> <div class="col-md-5 news-image"> <a ui-sref="main.entries-detail({ entry: entriesCtrl.entry.title_url })"> <img height="400" width="400" ng-src="{{ entriesCtrl.entry.image_url }}"> </a> </div> <div class="col-md-6"> <a ui-sref="main.entries-detail({ entry: entriesCtrl.entry.title_url })"><h3 class="news-entry" style="text-transform: uppercase">{{ ::entriesCtrl.entry.title }}</h3></a> <p class="entry-meta">Posted by <a ui-sref="main.profile-detail({ profile: entriesCtrl.entry.user.username })"> {{ ::entriesCtrl.entry.user.email }}</a> on {{ ::entriesCtrl.entry.created_at | date:\'medium\' }}</p> <p ng-bind-html="entriesCtrl.entry.content |  words: 165 | to_trusted"></p> </div> </div> <hr class="dotted"> <div class="row"> <h3 style="padding-left: 20px">NEWS // ELSE</h3> </div> <div class="row"> <div class="col-md-3" ng-repeat="entry in entriesCtrl.entries | orderBy: \'-created_at\'" ng-show="!$first"> <a ui-sref="main.entries-detail({ entry: entry.title_url })"> <div class="news-image-thumbnail"> <img height="190px" ng-src="{{ ::entry.image_url }}"> <div class="date"> <h3 class="date-text" style="text-transform: uppercase">{{ ::entry.title }}<br> {{ ::entry.created_at | date: \'short\'}}</h3> </div> </div> <hr class="dotted"> </a> </div> </div> <div class="row"> <h3 style="padding-left: 20px; text-transform: uppercase">CURRENT ISSUE // {{ entriesCtrl.issues[0].title }}</h3> </div> <div class="row"> <div class="content" ng-repeat="issue in entriesCtrl.issues"> <div class="col-md-6"> <div class="content-inner"> <h2><a ui-sref="main.issues-detail({ id: issue.id })"><img ng-src="{{ ::issue.image_url }}" class="img-responsive"></a> </h2> </div> </div> <div class="col-md-6"> <div class="content-inner" ng-repeat="piece in issue.pieces | orderBy: \'order\'"> <li><a ui-sref="main.issues-detail-piece({ id: piece.issue_id, piece: piece.title_url })"><h4>{{ ::piece.title }} - <font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font></h4></a>  </li> </div> </div> </div> </div> </div>'),a.put("scripts/core/issues/issues.detail/issues.detail.html",'<div class="container" id="contents" ng-init="issuesCtrl.getIssue()" scroll> <div class="row"> <div class="col-md-4"> <h2>WRITTEN</h2> <ul ng-repeat="piece in issuesCtrl.issue.pieces | orderBy: \'order\' | filter: { piece_type: \'!Picture\' }"> <li><a href="#{{ ::piece.title_url }}" du-smooth-scroll>{{ ::piece.title }}</a> </li> </ul> </div> <div class="col-md-4"> <h2>PICTURED</h2> <ul ng-repeat="piece in issuesCtrl.issue.pieces | filter: { piece_type: \'Picture\'}"> <li><a href="#{{ ::piece.title_url }}" du-smooth-scroll>{{ ::piece.title }}</a></li> </ul> </div> <div class="col-md-4"> <h2>CONTRIBUTORS</h2> <ul ng-repeat="piece in issuesCtrl.issue.pieces | unique:\'users\' | orderBy: \'order\'" author> <li><font ng-repeat="user in piece.users | reverse"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span><a ui-sref="main.profile-detail({ profile: user.username })">{{ ::user.username }}</a></font></li> </ul> </div> </div> <div class="row"> <div ng-repeat="piece in issuesCtrl.issue.pieces | orderBy: \'order\' | filter: author.name" lemat-repeat> <div class="content" id="{{ ::piece.title_url }}" style="margin-bottom: 50px"> <h4 class="title text-center"><a ui-sref="main.issues-detail-piece({ id: piece.issue_id, piece: piece.title_url })">{{ ::piece.title }}</a></h4> <p class="text-center"><font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span><a ui-sref="main.profile-detail({ profile: user.username })">{{ ::user.username }}</a></font></p> <br> <p ng-bind-html="piece.content | to_trusted"></p> </div> </div> </div> </div>'),a.put("scripts/core/issues/issues.detail/piece.html",'<div class="container" ng-init="issuesCtrl.getPiece()"> <div class="content"> <h4 class="title text-center">{{ issuesCtrl.piece.title }}</h4> <p class="text-center"><font ng-repeat="user in issuesCtrl.piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ user.username }}</font></p> <br> <p ng-bind-html="issuesCtrl.piece.content | to_trusted"></p> </div> </div>'),a.put("scripts/core/issues/issues.html",'<div class="container" ng-init="issuesCtrl.getIssues()"> <div class="content" ng-repeat="issue in issuesCtrl.issues"> <div class="content-inner"> <h2 style="text-transform: uppercase"><a ui-sref="main.issues-detail({ id: issue.id })">{{ ::issue.title }}:</a></h2> <h2><a ui-sref="main.issues-detail({ id: issue.id })"><img ng-src="{{ ::issue.image_url }}" class="img-responsive"></a> </h2> </div> <div class="content-inner"> <h3>CONTENTS:</h3> <hr class="dotted"> <div class="content-inner" ng-repeat="piece in issue.pieces | orderBy: \'order\'"> <li><a ui-sref="main.issues-detail-piece({ id: issue.id, piece: piece.title_url })"><h4>{{ ::piece.title }} - <font ng-repeat="user in piece.users"><span ng-show="!$first && !$last">, </span><span ng-show="$last && !$first"> and </span>{{ ::user.username }}</font></h4></a>  </li> </div> </div> <br> <div class="content-inner" ng-if="issue.download_link"> <h3>DOWNLOAD ISSUE: <a href="{{ ::issue.download_link }}"></a></h3> <hr> </div> </div> <br> </div>'),a.put("scripts/core/layout/footer/footer.html",'<div class="footer" id="footer"> <div class="container"> <div class="row"> <div class="col-lg-2 col-md-2 col-sm-4 col-xs-6"> <h3>EDITORS</h3> <ul> <li><a ui-sref="main.profile-detail({ profile: \'Carter Halbrooks\' })">Carter Halbrooks</a> </li> <li><a ui-sref="main.profile-detail({ profile: \'Danielle Norris\' })">Danielle Norris</a> </li> <li><a ui-sref="main.profile-detail({ profile: \'Ian Delairre\' })">Ian Delairre</a> </li> <li><a ui-sref="main.profile-detail({ profile: \'Phoebe Meskill\' })">Phoebe Meskill</a> </li> <li><a ui-sref="main.profile-detail({ profile: \'Ian McCament\' })">Ian McCament</a> </li> <li><a ui-sref="main.profile-detail({ profile: \'Shelby Jackson\' })">Shelby Jackson</a> </li> <li><a ui-sref="main.profile-detail({ profile: \'Turner Roth\' })">Turner Roth</a> </li> <li><a ui-sref="main.profile-detail({ profile: \'Jacky Connolly\' })">Jacky Connolly</a> </li> </ul> </div> <div class="col-lg-2 col-md-2 col-sm-4 col-xs-6"> <h3>CONTRIBUTORS</h3> <ul> <li ng-repeat="user in footerCtrl.issueUsers"><a ui-sref="main.profile-detail({ profile: user })">{{ user }}</a> </li> </ul> </div> <div class="col-lg-2 col-md-2 col-sm-4 col-xs-6"> <h3>JOURNAL</h3> <ul> <li><a ui-sref="main.about">About</a> </li> <li><a ui-sref="main.editors">Editors</a> </li> <li><a ui-sref="main.issues">Issues</a> </li> <li><a ui-sref="main.submissions">Submissions</a> </li> </ul> </div> <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12 pull-right social-buttons"> <h3>SOCIAL LINKS</h3> <ul class="social"> <li> <a href="https://www.facebook.com/lematjournal"><i class="fa fa-facebook"></i></a> </li> <li> <a href="https://twitter.com/lematjournal"><i class="fa fa-twitter"></i></a> </li> <li> <a href="https://github.com/lematjournal"><i class="fa fa-github"></i></a> </li> </ul> </div> </div> <!--/.row--> </div> <!--/.container--> </div> <!--/.footer--> <!--\n<div class="footer-bottom">\n	<div class="container">\n		<p class="pull-left"></p>\n	</div>\n</div>-->'),a.put("scripts/core/layout/header/header.html",'<div class="row"> <header class="contrast-bar"> <h3 class="section-title"><a ui-sref="main">NEWS</a> // <a ui-sref="main.posts">ONLINE</a> // <a ui-sref="main.issues-detail({ id: \'1\' })">CURRENT ISSUE</a></h3> </header> </div> <hr class="dotted">'),a.put("scripts/core/layout/logo/logo.html",'<div class="row"> <h1 class="title"><a ui-sref="main">LE MAT JOURNAL</a> // <a ui-sref="main.issues-detail({ id: 1 })">CURRENT ISSUE</a> // <a ui-sref="main.posts">ONLINE</a></h1> </div> <hr class="zero">'),a.put("scripts/core/layout/main.html","<div ui-view></div>"),a.put("scripts/core/layout/nav/nav.html",'<nav class="navbar navbar-default navbar-fixed-top" style="margin-top: -25px"> <div class="container-fluid"> <div class="navbar-header-dropdown" uib-dropdown dropdown-append-to-body> <a class="menu-bar" uib-dropdown-toggle><span class="glyphicon glyphicon-menu-hamburger" style="font-size: 16px"></span><font class="menu-logo"><b ng-if="title"> //</b> {{ title }}</font></a> <div class="dropdown-menu row" same-height> <ul class="nav col-sm-6 col-xs-6" role="menu"> <li> <h4 style="padding-left: 5px">HOME</h4> </li> <li class="divider"></li> <li><a ui-sref="main">MAIN PAGE</a> </li> <li><a ui-sref="main.issues-detail({ id: 1 })">CURRENT ISSUE</a> </li> <li><a ui-sref="main.issues">ISSUES</a> </li> <li ng-if="navCtrl.isAuthenticated()"><a ui-sref="main.profile">PROFILE</a></li> <li ng-if="!navCtrl.isAuthenticated()"><a ui-sref="main.login">LOGIN</a> </li> <li ng-if="navCtrl.isAuthenticated()"><a ng-click="navCtrl.logout()">LOGOUT</a> </li> </ul> <ul class="nav col-sm-6 col-xs-6" role="menu"> <li> <h4 style="padding-left: 5px">ONLINE</h4> </li> <li class="divider"></li> <li><a ng-click="setFilter()">CONTENTS</a> </li> <li><a ng-click="setFilter(\'art\')">ART</a> </li> <li><a ng-click="setFilter(\'essay\')">ESSAYS</a> </li> <li><a ng-click="setFilter(\'poetry\')">POETRY</a> </li> </ul> <ul class="nav col-sm-6 col-xs-6 contact" role="menu"> <li> <h4 style="padding-left: 5px">JOURNAL</h4> </li> <li class="divider"></li> <li><a ui-sref="main.about">ABOUT</a> </li> <li ng-if="navCtrl.isAdmin()"><a ui-sref="admin">ADMIN</a> </li> <li><a ui-sref="main.editors">EDITORS</a> </li> <li><a ui-sref="main.submissions">SUBMISSIONS</a> </li> </ul> <ul class="nav col-sm-6 col-xs-6" role="menu"> <li> <h4 style="padding-left: 5px">SOCIAL</h4> </li> <li class="divider"></li> <li> <a href="https://www.facebook.com/lematjournal"><i class="fa fa-facebook"></i></a> </li> <li> <a href="https://twitter.com/lematjournal"><i class="fa fa-twitter"></i></a> </li> <li> <a href="https://github.com/lematjournal"><i class="fa fa-github"></i></a> </li> </ul> </div> </div> </div> </nav>'),a.put("scripts/core/login/login.html",'<div class="container"> <form name="loginForm" novalidate> <h1>login</h1> <hr> <div class="form-group"> <label for="email">Email address</label> <input type="email" class="form-control" id="email" placeholder="Enter email" ng-model="credentials.email" required> </div> <div class="form-group"> <label for="password">Password</label> <input type="password" class="form-control" id="password" placeholder="Password" ng-model="credentials.password" required> </div> <button class="btn" value="Login" ng-click="loginCtrl.postCredentials(credentials)">Submit</button> </form> <br> </div>'),a.put("scripts/core/posts/posts.deckgrid.tpl.html",'<div class="panel panel-default"> <div class="panel-heading" ng-if="card.post_type === \'text\'"><a style="text-transform: uppercase" ui-sref="main.posts-detail({ post: card.title_url })">{{ card.title }}</a> </div> <div class="panel-body"> <div class="video embed-responsive embed-responsive-16by9" ng-if="card.post_type === \'video\'"> <youtube-video video-url="card.content" style="padding-bottom: 5px"></youtube-video> </div> <p class="overflow elipsis" ng-if="card.post_type === \'text\'" ng-bind-html="card.content | to_trusted"></p> </div> <div class="panel-footer"> <div class="row meta"> <div class="tags-meta"> <a class="text-center" style="margin-top: 5px" uib-popover-template="popover.templateUrl"> <p>TAGS</p> </a> <script type="text/ng-template" id="tag-popover.template.html"><div class="form-group">\n                  <p><font ng-repeat="tag in card.tags"><span ng-show="!$first">, </span><a ng-click="setFilter(tag)">#{{ ::tag | uppercase }}</a></font></p>\n               </div></script> </div> <div class="author"> <a ui-sref="main.profile-detail({ profile: card.user.username })"> <p class="text-center" style="margin-top: 5px">{{ ::card.user.username }}</p> </a> </div> <div class="share" style="text-align: center"> <a social-twitter custom-url="http://lematjournal.org/#!/online/{{ ::post.title_url }}" style="margin-top: 5px"> <p class="fa fa-twitter"></p> </a> </div> <div class="link"> <a ui-sref="main.posts-detail({ post: card.title_url })" style="margin-top: 5px"> <p class="text-center" style="margin-left: -5px">LINK</p> </a> </div> </div> </div> </div>'),a.put("scripts/core/posts/posts.detail/posts.detail.html",'<div class="container" ng-init="postsCtrl.getPost()"> <div class="row"> <h4 class="title text-center">{{ postsCtrl.post.title }}</h4> <p class="text-center">{{ postsCtrl.post.user.username }}</p> <p class="text-center">{{ postsCtrl.post.created_at | date: \'medium\' }}</p> <hr> <div class="embed-responsive embed-responsive-16by9" ng-if="postsCtrl.post.post_type === \'video\'"> <youtube-video video-url="postsCtrl.post.content"></youtube-video> </div> <p ng-if="postsCtrl.post.post_type === \'text\'" ng-bind-html="postsCtrl.post.content | to_trusted"></p> <hr> <a class="btn btn-default" ng-href="/#!/online">Back</a> <a class="btn btn-default" social-twitter custom-url="{{ postCtrls.url }}"><span class="fa fa-twitter"></span></a> <dir-disqus disqus-shortname="lematjournal" disqus-identifier="{{ postsCtrl.identifier }}" disqus-url="{{ postsCtrl.url }}" disqus-title="{{ postsCtrl.post.title }}"> </dir-disqus> </div> </div>'),a.put("scripts/core/posts/posts.html",'<div class="container" ng-init="postsCtrl.getPosts()"> <header class="contrast-bar"> <h3 class="section-title"><a ng-click="setFilter()">all</a> // <a ng-click="setFilter(\'art\')">art</a> // <a ng-click="setFilter(\'essay\')"> essays</a> // <a ng-click="setFilter(\'poetry\')">poetry</a> // search: <input type="text" style="width: 200px" ng-model="filters.tags"></h3> </header> <div class="row"> <div deckgrid class="deckgrid" source="postsCtrl.posts" filter="filters" cardtemplate="scripts/core/posts/posts.deckgrid.tpl.html"> </div> </div> </div>'),a.put("scripts/core/profile/profile.detail/profile.detail.html",'<div class="container" ng-init="profileCtrl.getProfile()"> <div class="row"> <h3 class="title text-center">{{ profileCtrl.user.username }}</h3> <hr class="dotted"> <img class="img-responsive center-block" ng-src="{{ profileCtrl.user.profile_image }}"> <br> </div> <div class="row" ng-if="profileCtrl.user.bio"> <h4 class="title text-center">BIO</h4> <p class="text-center">{{ profileCtrl.user.bio }}</p> </div> <div class="row" ng-if="profileCtrl.user.pieces.length > 0"> <h4 class="title text-center">ISSUE PIECES</h4> <div ng-repeat="piece in profileCtrl.user.pieces"> <p class="text-center"><a ui-sref="main.issues-detail-piece({ id: piece.issue_id, piece: piece.title_url })">{{ piece.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="profileCtrl.user.posts.length > 0"> <h4 class="title text-center">ARTWORK/ONLINE CONTENT</h4> <div ng-repeat="post in profileCtrl.user.posts"> <p class="text-center"><a ui-sref="main.posts-detail({ post: post.title_url })">{{ post.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="profileCtrl.user.entries.length > 0"> <h4 class="title text-center">NEWS ENTRIES</h4> <div ng-repeat="entry in profileCtrl.user.entries"> <p class="text-center"><a ui-sref="main.entries-detail({ entry: entry.title_url })">{{ entry.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="profileCtrl.user.social_links.length > 0"> <h4 class="title text-center">SOCIAL LINKS</h4> <div class="col-xs-6 col-center-block"> <ul class="social" ng-repeat="(key, val) in profileCtrl.user.social_links"> <li class="social-link" ng-if="val"><a ng-href="{{ val }}"><i ng-class="{\'fa fa-twitter\' : key === \'twitter\', \'fa fa-facebook\' : key === \'facebook\', \'fa fa-linkedin\' : key === \'linked_in\', \'fa fa-tumblr\' : key === \'tumblr\', \'fa fa-behance\' : key === \'behance\', \'fa fa-github\' : key === \'github\', \'fa fa-youtube-play\' : key === \'youtube\', \'fa fa-wordpress\' : key === \'wordpress\', \'fa fa-instagram\' : key === \'instagram\', \'fa fa-google-plus\' : key === \'google_plus\' }"></i></a> </li> </ul> </div> </div> </div>'),a.put("scripts/core/profile/profile.html",'<div class="container" ng-init="profileCtrl.getUserProfile()"> <form name="userForm"> <div class="row"> <h3 class="title text-center"><a ng-click="profileCtrl.fields.editName = !profileCtrl.fields.editName" ng-show="!fields.editName">{{ profileCtrl.user.username }}</a></h3> <h3><input type="text" name="editName" class="title text-center" ng-model="profileCtrl.user.username" style="width: 100%" ng-keyup="reset($event, field)" ng-show="profileCtrl.fields.editName" ng-enter="save($event, \'editName\', user)"></h3> <hr class="dotted"> <div class="profile-image"> <a ng-click="profileCtrl.openImageUploadModal()" uib-tooltip="click to change"><img class="img-responsive center-block" src="{{ profileCtrl.user.profile_image }}" height="455px" width="443.636px"> </a> </div> <br> </div> <div class="row"> <a ng-click="profileCtrl.fields.editBio = !profileCtrl.fields.editBio"><h4 class="title text-center">BIO</h4> <p class="text-center" ng-hide="profileCtrl.fields.editBio" ng-show="!profileCtrl.fields.editBio">{{ profileCtrl.user.bio }}</p></a> <input type="text" name="userBio" ng-model="profileCtrl.user.bio" ng-keyup="reset($event, field)" ng-if="profileCtrl.fields.editBio" class="form-control" ng-enter="profileCtrl.save($event, \'editBio\', profileCtrl.user)"> <i ng-if="editBio">* press \'esc\' to reset field</i> </div> <div class="row" ng-if="profileCtrl.user.pieces.length > 0"> <h4 class="title text-center">ISSUE PIECES</h4> <div ng-repeat="piece in profileCtrl.user.pieces"> <p class="text-center"><a ui-sref="main.issues-detail-piece({ id: piece.issue_id, piece: piece.title_url })">{{ piece.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="profileCtrl.user.posts.length > 0"> <h4 class="title text-center">ARTWORK/ONLINE CONTENT</h4> <div ng-repeat="post in profileCtrl.user.posts"> <p class="text-center"><a ui-sref="main.posts-detail({ post: post.title_url })">{{ post.title | uppercase }}</a> </p> </div> </div> <div class="row" ng-if="profileCtrl.user.entries.length > 0"> <h4 class="title text-center">NEWS ENTRIES</h4> <div ng-repeat="entry in profileCtrl.user.entries"> <p class="text-center"><a ui-sref="main.entries-detail({ entry: entry.title_url })">{{ entry.title | uppercase }}</a> </p> </div> </div> <div class="row"> <h4 class="title text-center">SOCIAL LINKS</h4> <div class="col-xs-6 col-center-block"> <ul class="social" ng-repeat="(key, val) in profileCtrl.user.social_links"> <li class="social-link" uib-popover-template="popover.templateUrl"><a><i ng-class="{\'fa fa-twitter\' : key === \'twitter\', \'fa fa-facebook\' : key === \'facebook\', \'fa fa-linkedin\' : key === \'linked_in\', \'fa fa-tumblr\' : key === \'tumblr\', \'fa fa-behance\' : key === \'behance\', \'fa fa-github\' : key === \'github\', \'fa fa-youtube-play\' : key === \'youtube\', \'fa fa-wordpress\' : key === \'wordpress\', \'fa fa-instagram\' : key === \'instagram\', \'fa fa-google-plus\' : key === \'google_plus\' }"></i></a> <script type="text/ng-template" id="popoverTemplate.html"><div class="form-group">\n                        <input type="text" ng-model="profileCtrl.user.social_links[key]" class="form-control" style="width: 100%" placeholder="enter {{ key }} link" ng-enter="profileCtrl.save($event, nil, profileCtrl.user)" />\n                     </div>\n                     <a class="btn-default"></a></script> </li> </ul> </div> </div> </form> </div>'),a.put("scripts/core/profile/profile.image-upload.modal/profile.image-manager.html",'<div class="container" style="width: 700px" ng-init="vm.getUserImages()"> <div class="deckgrid clearfix center-block" deckgrid source="images" cardtemplate="views/core/partials/deckgrid-template.html"></div> <br> <a class="btn btn-default btn-block" ng-click="$modalInstance.dismiss(\'cancel\'); getUser()" style="margin-bottom: 20px">Close</a> </div>'),a.put("scripts/core/profile/profile.image-upload.modal/profile.image-upload.modal.html",'<div class="modal-body" style="height: 785px; width: 900px"> <!-- navigation --> <dir-pagination-controls template-url="scripts/core/profile/profile.image-upload.modal/profile.image-upload.modal.pagination.tpl.html"></dir-pagination-controls> <hr> <div class="lightbox-image-container row-centered"> <!-- image --> <div class="profile-image" dir-paginate="image in profileImageUploadModalCtrl.images | itemsPerPage: 1" current-page="currentPage" style="margin-top: 5px"> <a ng-click="profileImageUploadModalCtrl.setProfileImage(image.image_url)"> <img ng-src="{{ image.image_url }}" height="600px" width="100%"> </a> <!-- caption --> </div> </div> <div class="row-centered" style="margin-top: 5px"> <div class="form-group"> <input id="upload" type="file" name="file" class="upload" style="display: none" file-select folder="\'uploads/\'" ng-model="profileImageUploadModalCtrl.profileImage" accept="image/*" upload-action="profileImageUploadModalCtrl.uploadImage"> <button type="button" uploadfile class="btn btn-default btn-block">Select Image to upload</button> <!--         <button type="button" ng-click="openImageManager()" class="btn btn-default btn-block">Manage User Images</button>--> </div> <div class="btn-group pull-right" style="margin-bottom: 5px"> <a class="btn btn-default" ng-click="cancel()">Close</a> <a class="btn btn-default" ng-click="ok()" style="margin-left: 5px">Save</a> </div> </div> </div>'),a.put("scripts/core/profile/profile.image-upload.modal/profile.image-upload.modal.pagination.tpl.html",'<div class="lightbox-nav row-centered"> <!-- close button --> <button class="close" aria-hidden="true" ng-click="$parent.cancel()">×</button> <div class="btn-group"> <a class="btn btn-xs btn-default" ng-class="{ disabled : pagination.current == 1 }" ng-click="setCurrent(pagination.current - 1)"> ‹ Previous </a> <a target="_blank" class="btn btn-xs btn-default" title="Open in new tab"> Open image in new tab </a> <a class="btn btn-xs btn-default" ng-class="{ disabled : pagination.current == pagination.last }" ng-click="setCurrent(pagination.current + 1)"> Next › </a> </div> </div>'),a.put("scripts/core/submissions/submissions.form/submissions.form.html",'<div class="container"> <div ui-view="title"></div> <div ui-view="body"></div> </div>'),a.put("scripts/core/submissions/submissions.form/submissions.page-1/submissions.page-1.html",'<div class="row"> <section> <div class="wizard"> <div class="wizard-inner"> <div class="connecting-line"></div> <ul class="nav nav-tabs" role="tablist"> <li role="presentation" ui-sref-active="active"> <a ui-sref="main.submissions-info" aria-controls="step1" role="tab" title="Step 1"> <span class="round-tab"><i class="glyphicon glyphicon-pencil"></i></span> </a> </li> <li role="presentation"> <a aria-controls="step2" role="tab" title="Step 2" ng-class="{ disabled: !valid }" ui-sref-if="!infoForm.$invalid" ui-sref-val="main.submissions-upload"> <span class="round-tab"><i class="glyphicon glyphicon-folder-open"></i></span> </a> </li> <li role="presentation"> <a ng-class=" { disabled : !valid }" ui-sref-if="!infoForm.$invalid && submissionsCtrl.submission.attachments.length > 0" ui-sref-val="main.submissions-final" aria-controls="complete" role="tab" title="Complete"> <span class="round-tab"><i class="glyphicon glyphicon-ok"></i></span> </a> </li> </ul> </div> </div> </section> </div> <div class="row"> <h2 class="title text-center">Info</h2> <hr> <form name="infoForm"> <div class="form-group"> <label for="name">Title</label> <input type="text" name="title" ng-model="submissionsCtrl.submission.title" id="title" class="form-control" required> </div> <div class="form-group"> <label for="name">Name</label> <input type="text" name="username" ng-model="submissionsCtrl.submission.user.username" id="name" class="form-control" required> </div> <div class="form-group"> <label for="email">Email Address†</label> <br> <label for="email" class="text-muted"><i>†we will not send you any unsolicited emails, this is to send a confirmation that we have recieved your submission and so the editors can coordinate with you on publishing your piece</i></label> <input type="email" name="email" ng-model="submissionsCtrl.submission.email_address" id="email" class="form-control" required> </div> <div class="form-group"> <label for="name">Submission Type</label> <select ng-model="submissionsCtrl.submission.submission_type" id="type" name="type" class="form-control" required> <option value="image">image(s)</option> <option value="text">text</option> <option value="video">video</option> </select> </div> <div class="form-group"> <label for="tags">Tags††</label> <br> <label class="text-muted"><i>††enter how you would like your work to be tagged in the online edition</i></label> <tags-input display-property="name" ng-model="submissionsCtrl.submission.tags"> <auto-complete source="submissionsCtrl.tags"></auto-complete> </tags-input> </div> <div class="form-group"> <label for="content">Description†††</label> <br> <label class="text-muted"><i>†††in a short message to the editors describe your work, how you would like it shown and anything else you\'d like to let us know</i></label> <wysiwyg textarea-id="description" textarea-class="form-control" textarea-height="200px" textarea-name="description" textarea-required ng-model="submissionsCtrl.submission.email_content" textarea-menu="customMenu"></wysiwyg> </div> </form> <hr class="dotted"> <a class="btn btn-default pull-right" ng-class="{ disabled: infoForm.$invalid }" ui-sref-if="!infoForm.$invalid" ui-sref-val="main.submissions-upload">Next</a> </div>'),
a.put("scripts/core/submissions/submissions.form/submissions.page-2/submissions.page-2.html",'<div class="row"> <section> <div class="wizard"> <div class="wizard-inner"> <div class="connecting-line"></div> <ul class="nav nav-tabs" role="tablist"> <li role="presentation"> <a ui-sref="main.submissions-info" aria-controls="step1" role="tab" title="Step 1"> <span class="round-tab"><i class="glyphicon glyphicon-pencil"></i></span> </a> </li> <li role="presentation" class="active"> <a aria-controls="step2" role="tab" title="Step 2" ng-class="{ disabled: !valid }" ui-sref="main.submissions-upload"> <span class="round-tab"><i class="glyphicon glyphicon-folder-open"></i></span> </a> </li> <li role="presentation"> <a ng-class=" { disabled : !valid }" ui-sref-if="submissionsCtrl.submission.attachments.length > 0" ui-sref-val="main.submissions-final" aria-controls="complete" role="tab" title="Complete"> <span class="round-tab"><i class="glyphicon glyphicon-ok"></i></span> </a> </li> </ul> </div> </div> </section> </div> <div class="row"> <h2 class="title text-center">Upload</h2> <hr> <form name="linkForm" ng-show="submissionsCtrl.submission.submission_type === \'video\'"> <p class="text-center" ng-show="submissionsCtrl.submission.submission_type !== \'image\'">Please upload your submission to YouTube and provide a link below. Click submit when you\'ve finished.</p> <div class="form-group"> <label>Link to YouTube Video</label> <div class="form-group"> <input type="url" class="form-control" ng-model="submissionsCtrl.submission.link" ng-enter="submissionsCtrl.submitVideo()" required> </div> <div class="form-group"> <a class="btn btn-default btn-block" ng-click="submissionsCtrl.submitVideo()">Submit</a> </div> <div class="form-group" ng-show="linkForm.$valid"> <div class="embed-responsive embed-responsive-16by9"> <youtube-video video-url="submissionsCtrl.submission.link"></youtube-video> </div> </div> </div> </form> <form name="uploadForm" ng-show="submissionsCtrl.submission.submission_type !== \'video\'" novalidate> <p class="text-center" ng-show="submissionsCtrl.submission.submission_type !== \'image\'">Please upload a document with your written work. <br> You can also copy and paste your submission by clicking "edit attachment" and pasting it in the text editor.</p> <p class="text-center" ng-show="submissionsCtrl.submission.submission_type === \'image\'">Upload any image files you wish to include in your submission. <br> You can also upload a document containing any text you would like accompanying your text. <br> If you would like the images and text displayed in a specific way, <br> please indicate your specifications in the document.</p> <div class="form-group" ng-show="submissionsCtrl.images.length > 0 && submissionsCtrl.submission.attachments.length > 0"> <table class="table"> <label>Attached Images</label> <tr> <th>image thumbnail*</th> <th>filename</th> <th>credits</th> </tr> <tr ng-repeat="attachment in submissionsCtrl.submission.attachments | filterImages"> <td> <div class="profile-image"> <a uib-popover-template="imagePopover.templateUrl" popover-placement="right"><img ng-src="{{ attachment.image_url }}" height="50px" width="50px"></a> </div> </td> <script type="text/ng-template" id="image-popover.template.html"><div class="text-center profile-image">\n                     <img class="popover-image" ng-src="{{ attachment.image_url }}" height="50%" width="499px" />\n                  </div></script> <td><a uib-popover="{{ attachment.image_url }}" popover-placement="right">{{ attachment.image_url | cut:true:30 }}</a></td> <td> <input type="text" class="form-control" ng-model="submissionsCtrl.submission.attachments[$index].credits" placeholder="title, date, medium and dimensions" ng-enter=""> </td> </tr> </table> <p>*click to preview image</p> </div> <div class="form-group" ng-show="submissionsCtrl.doc && submissionsCtrl.submission.attachments.length > 0"> <table class="table"> <label>Attached Document</label> <tr> <th>filename</th> </tr> <tr ng-repeat="attachment in submissionsCtrl.submission.attachments | filterDocs"> <td><a ng-href="{{ attachment }}">{{ attachment }}</a></td> </tr> </table> </div> <br> <div class="form-group"> <label>Upload Options</label> <input id="upload" type="file" name="submission" class="upload" style="display: none" file-select folder="\'submissions/\'" ng-model="submissionsCtrl.attachment" upload-action="uploadFile"> <button type="button" uploadfile class="btn btn-default btn-block"><i class="glyphicon glyphicon-cloud-upload"></i> Select file to upload</button> </div> <div class="form-group"> <button type="button" ng-click="$parent.showEdit = !$parent.showEdit" class="btn btn-default btn-block"><i class="glyphicon glyphicon-text-size"></i>Edit Attachment</button> </div> <div class="form-group"> <button type="button" ng-disabled="submissionsCtrl.submission.attachments.length === 0" class="btn btn-default btn-block" ng-click="submissionsCtrl.clearAttachments()"><i class="glyphicon glyphicon-erase"></i> Clear Attachments</button> </div> <div class="form-group" ng-show="showEdit || submissionsCtrl.doc.length > 0"> <label>Edit Document</label> <br> <label class="text-muted"><i>note: when editing your attachment some styles and elements like footnotes or list items may have to be manually formatted (this is a beta feature)</i></label> <wysiwyg textarea-id="question" textarea-class="form-control" textarea-height="400px" textarea-name="textareaQuestion" textarea-required ng-model="submissionsCtrl.doc"></wysiwyg> <br> <button type="button" class="btn btn-default btn-block" ng-click="submissionsCtrl.uploadDoc(submissionsCtrl.doc)" ng-disabled="!submissionsCtrl.doc"><i class="glyphicon glyphicon-cloud-upload"></i> Submit and Upload Document</button> </div> <p class="text-center"><i>note: if you opt to copy and paste your text or edit the attachment before submission you can preview your submission on the final page of this form.</i></p> </form> </div> <hr class="dotted"> <div class="btn-group pull-right"> <a class="btn btn-default" ui-sref="main.submissions-info">Back</a> <a class="btn btn-default" ng-class="{ disabled: submissionsCtrl.submission.attachments.length === 0 }" ui-sref-if="submissionsCtrl.submission.attachments.length > 0" ui-sref-val="main.submissions-final" style="margin-left: 5px">Next</a> <!--   <a class="btn btn-default" ng-if="submissionsCtrl.submission_type === \'video\'" ng-class="{ disabled: !linkForm.$invalid" ui-sref-if="!linkForm.$invalid" ui-sref-val="main.submissions-final" style="margin-left: 5px">Next</a>--> </div>'),a.put("scripts/core/submissions/submissions.form/submissions.page-3/submissions.page-3.html",'<div class="row" ng-init="submissionsCtrl.getAttachmentHtml()"> <section> <div class="wizard"> <div class="wizard-inner"> <div class="connecting-line"></div> <ul class="nav nav-tabs" role="tablist"> <li role="presentation"> <a ui-sref="main.submissions-info" aria-controls="step1" role="tab" title="Step 1"> <span class="round-tab"><i class="glyphicon glyphicon-pencil"></i></span> </a> </li> <li role="presentation"> <a aria-controls="step2" role="tab" title="Step 2" ui-sref="main.submissions-upload"> <span class="round-tab"><i class="glyphicon glyphicon-folder-open"></i></span> </a> </li> <li role="presentation" class="active"> <a ng-class="{ disabled : !valid }" aria-controls="complete" role="tab" title="Complete"> <span class="round-tab"><i class="glyphicon glyphicon-ok"></i></span> </a> </li> </ul> </div> </div> </section> </div> <div class="row"> <div class="row-centered"> <h2 class="title">Submission Info</h2> <hr> <h4 class="title">Name</h4> <p>{{ submissionsCtrl.submission.user.username }}</p> <h4 class="title">Email</h4> <p class="">{{ submissionsCtrl.submission.email_address }}</p> <h4 class="title">Type</h4> <p class="">{{ submissionsCtrl.submission.submission_type }}</p> <h4 class="title">Description</h4> <p class="" ng-bind-html="submissionsCtrl.submission.email_content"></p> <h4 class="title">Attachment(s)</h4> <div class="form-group" ng-show="submissionsCtrl.submission.submission_type === \'video\'"> <p ng-repeat="attachment in submissionsCtrl.submission.attachments"> {{ attachment }}</p> </div> <div class="form-group" ng-show="submissionsCtrl.submission.submission_type === \'text\'"> <p class="title">Document</p> <p class="" ng-repeat="attachment in submissionsCtrl.submission.attachments | filterDocs">{{ attachment }}</p> </div> <div class="form-group" ng-show="submissionsCtrl.images.length > 0"> <p class="title">Images</p> <p class="" ng-repeat="attachment in submissionsCtrl.submission.attachments">{{ attachment.image_url }}</p> </div> </div> <!--\n   <div class="row" ng-show="submissionsCtrl.doc || submissionsCtrl.images.length > 0">\n      <h2 class="title text-center">Meta</h2>\n      <p class="text-center">a rough rendering of how your piece will look in the "/online" view</p>\n      <div class="row row-centered">\n         <div class="col-md-6 col-centered">\n            <div class="panel panel-default">\n               <div class="panel-heading"><a style="text-transform: uppercase" uib-sref="">{{ submissionsCtrl.submission.title }}</a>\n               </div>\n               <div class="panel-body">\n                  <div class="video embed-responsive embed-responsive-16by9" ng-if="submissionsCtrl.submission.submission_type === \'video\'">\n                     <youtube-video video-url="submissionsCtrl.submission.link" style="padding-bottom: 5px"></youtube-video>\n                  </div>\n                  <p class="overflow elipsis" ng-bind-html="submissionsCtrl.doc" ng-if="submissionsCtrl.doc"></p>\n                  <div class="video" ng-repeat="image in submissionsCtrl.submission.attachments | filterImages">\n                     <img ng-src="{{ image.image_url }}" height="100%" width="100%" ng-class="{ \'margin-bottom: 50px\' : !$last }">\n                  </div>\n               </div>\n               <div class="panel-footer">\n                  <div class="row meta">\n                     <div class="tags-meta">\n                        <a class="text-center" style="margin-top: 5px" uib-popover-template="tagPopover.templateUrl">\n                           <p style="margin-right: 30px">TAGS</p>\n                        </a>\n                        <script type="text/ng-template" id="tag-popover.template.html">\n                           <div class="form-group">\n                              <p><font ng-repeat="tag in submissionsCtrl.submission.tags"><span ng-show="!$first">, </span><a>#{{ ::tag | uppercase }}</a></font></p>\n                           </div>\n                        </script>\n                     </div>\n                     <div class="author">\n                        <a>\n                           <p class="text-center" style="margin-top: 5px">{{ submissionsCtrl.submission.user.username }}</p>\n                        </a>\n                     </div>\n                     <div class="share" style="text-align: center">\n                        <a style="margin-top: 5px">\n                           <p class="fa fa-twitter"></p>\n                        </a>\n                     </div>\n                     <div class="link">\n                        <a style="margin-top: 5px">\n                           <p class="text-center" style="margin-left: -5px">LINK</p>\n                        </a>\n                     </div>\n                  </div>\n               </div>\n            </div>\n         </div>\n      </div>\n   </div>\n   <hr>\n--> <div class="row" ng-show="submissionsCtrl.submission.submission_type === \'text\' && submissionsCtrl.evaluateDoc()"> <h2 class="title text-center">Document Preview</h2> <hr> <h4 class="title text-center">{{ submissionsCtrl.submission.title }}</h4> <p class="text-center">{{ submissionsCtrl.submission.user.username }}</p> <p class="text-center">{{ submissionsCtrl.submission.created_at | date: \'medium\' }}</p> <p ng-bind-html="submissionsCtrl.doc"></p> </div> <div class="row" ng-show="submissionsCtrl.images.length > 0 && submissionsCtrl.submission.submission_type === \'image\'"> <h2 class="title text-center">Images Preview</h2> <hr> <div class="text-center" ng-repeat="attachment in submissionsCtrl.submission.attachments | filterImages"> <img ng-src="{{ attachment.image_url }}"> <p class="text-center">{{ attachment.credits }}</p> </div> </div> <hr class="dotted"> <div class="btn-group pull-right"> <a class="btn btn-default" ui-sref="main.submissions-upload">Back</a> <a class="btn btn-default" style="margin-left: 5px" ng-click="submissionsCtrl.postSubmission()">Submit</a> </div> </div>'),a.put("scripts/core/submissions/submissions.form/submissions.page-4/submissions.page-4.html",'<h1 class="title text-center">Thank you for your submission!</h1> <hr class="zero"> <h2 class="title text-center" style="margin-bottom: 50px">expect to hear from us soon</h2> <p class="pull-right" style="margin-bottom: 50px">- The Editors</p>'),a.put("scripts/core/submissions/submissions.form/submissions.title/submissions.title-complete.html",'<div class="row row-centered"> <h1 class="text-center title">REVIEW SUBMISSION</h1> <div class="col-md-6 col-centered"> <p class="text-center">Preview your submission before submitting.</p> </div> </div>'),a.put("scripts/core/submissions/submissions.form/submissions.title/submissions.title.html",'<div class="row row-centered"> <h1 class="text-center title">SUBMISSION FORM (BETA)</h1> <div class="col-md-6 col-centered"> <p class="text-center">note: this form is a beta that seems to work pretty well with most browsers. If something weird happens, send your submission to <a href="mailto:lematjournal@gmail.com">lematjournal@gmail.com</a> and note the weird thing that happened.</p> </div> </div>'),a.put("scripts/core/submissions/submissions.html",'<div class="container"> <h1 class="text-center title">LE MAT SUBMISSION GUIDELINES</h1> <br> <p class="about-text">There are two ways to send submissions:</p> <ul> <li class="about-text">Via our <a ui-sref="main.submissions-form">online submission form</a>: <a ui-sref="main.submissions-form">link</a></li> <li class="about-text">Via our email address at <a href="mailto:lematjournal@gmail.com">lematjournal@gmail.com</a></li> </ul> <p class="about-text">If you decide to submit via email then please use the following guidelines:</p> <ul> <li class="about-text">In your email include a short description of your work, the name (your name) with which you wish to be credited and any other information you would like to share about you or your piece. Optionally you may include any hashtag catagories you would like to associate with your piece.</li> <li class="about-text">For written work we will accept the following:</li> <blockquote> <ul> <li class="about-text">1 to 5 poems</li> <li class="about-text">Weird short stories/experimental fiction.</li> <li class="about-text">Critical works (art criticism, philosophy, literary theory/analysis, art history, knickknacks) of 1000 to 3000 words. Please use MLA format for footnoting, etc.</li> <li class="about-text">Feel free to submit longer works, however, shorter pieces work better with our format.</li> </ul> </blockquote> <li class="about-text">Please use the ".docx" file type for your submission and include all the works you are submitting in a single document.</li> <li class="about-text">For visual art we will accept 1 to 5 images of 10mb or less in any file type. Final proportions are to be determined mostly by our format and printing/cost constraints. We accept all species of photography and digital art. All submissions should be captioned in the following format: <br> <blockquote class="about-text">Artist, title, date, medium, and dimensions followed by the museum/collection, city, copyright and any other photo credits. There is no terminal period unless the basic caption information is followed by a descriptive sentence. Complete information on medium, dimensions, and collection should be provided if possible. Proper copyright information is manditory if the work is copy protected.</blockquote> </li> <li class="about-text">For video art please upload your work to YouTube and submit using our online submission form. Please follow the above citation style. </li> </ul> <p style="font-size: 16px" class="pull-right">- The Editors</p> </div>')}]);